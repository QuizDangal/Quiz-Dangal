import{j as n}from"./index-b52a2ac4.js";import{r as o}from"./react-63c462fe.js";import{a9 as m}from"./icons-2bdec3f2.js";import"./supabase-24c2e735.js";import"./router-d6d570a4.js";const I=()=>{const[u,d]=o.useState(!1),[a,r]=o.useState(null),[c,l]=o.useState(!1);o.useEffect(()=>{if(typeof window=="undefined")return;const e=typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)"):null;d((()=>{var t;try{return!!(e!=null&&e.matches||((t=window.navigator)==null?void 0:t.standalone)===!0)}catch(i){return!1}})());const s=t=>{var i;d(!!(t!=null&&t.matches)||((i=window.navigator)==null?void 0:i.standalone)===!0)};if(e)try{e.addEventListener("change",s)}catch(t){e.addListener&&e.addListener(s)}const p=t=>{t.preventDefault(),r(t),l(!0)},f=()=>{r(null),l(!1)};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",f),()=>{if(window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",f),e)try{e.removeEventListener("change",s)}catch(t){e.removeListener&&e.removeListener(s)}}},[]);const w=async()=>{try{if(!a)return;a.prompt(),await a.userChoice,r(null),l(!1)}catch(e){}},h=async()=>{c&&a&&await w()};return u||!c||!a?null:n.jsxs("button",{onClick:h,className:"w-14 h-14 rounded-full btn-fire transition-all duration-300 transform hover:scale-105 flex items-center justify-center group relative overflow-hidden",style:{position:"fixed",bottom:"100px",right:"20px",zIndex:9999},"aria-label":"Install App",title:"Install App",children:[n.jsxs("svg",{className:"pointer-events-none absolute -top-2 left-1/2 -translate-x-1/2 w-6 h-6 opacity-70",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:[n.jsx("path",{d:"M12 2c1.5 2 2 3.5 2 5 0 1.5-.5 3-2 4-1.5-1-2-2.5-2-4 0-1.5.5-3 2-5Z",fill:"url(#flameGrad)"}),n.jsx("defs",{children:n.jsxs("linearGradient",{id:"flameGrad",x1:"12",y1:"2",x2:"12",y2:"11",gradientUnits:"userSpaceOnUse",children:[n.jsx("stop",{stopColor:"#fde047"}),n.jsx("stop",{offset:"1",stopColor:"#f97316"})]})})]}),n.jsx("div",{className:"absolute inset-0"}),n.jsx(m,{className:"w-5 h-5 relative z-10 drop-shadow"}),n.jsx("span",{className:"hidden group-hover:block absolute right-16 bg-gray-900/90 backdrop-blur text-white px-2 py-1 rounded text-xs whitespace-nowrap border border-white/10 shadow",children:"Install App"})]})};export{I as default};
