import{u as d,l as m,N as p,j as t,D as x,v as h,w as N,x as g,B as y}from"./index-46da9ffe.js";import{r as o}from"./react-63c462fe.js";import"./supabase-24c2e735.js";import"./router-d6d570a4.js";import"./icons-2bdec3f2.js";const P=()=>{const{user:s}=d(),{subscribeToPush:r}=m(),[c,a]=o.useState(!1),n=o.useRef(null),i=o.useMemo(()=>`qd_notifChoice_${(s==null?void 0:s.id)||"guest"}`,[s]);o.useEffect(()=>{try{typeof Notification!="undefined"&&Notification.permission!=="default"&&localStorage.setItem(i,"true")}catch(e){}},[i]),o.useEffect(()=>{try{const e=typeof window!="undefined"&&"Notification"in window,f=(()=>{try{return localStorage.getItem(i)==="true"}catch(w){return!1}})();return!s||!e||Notification.permission!=="default"||f?void 0:(n.current=setTimeout(()=>a(!0),p),()=>{n.current&&clearTimeout(n.current)})}catch(e){}},[s,i]);const l=async()=>{try{await r()}catch(e){}try{typeof Notification!="undefined"&&Notification.permission!=="default"&&localStorage.setItem(i,"true")}catch(e){}a(!1)},u=()=>{a(!1)};return t.jsx(x,{open:c,onOpenChange:e=>{e||u()},children:t.jsxs(h,{className:"bg-slate-900/95 border border-slate-800 text-slate-100 sm:rounded-2xl p-4 sm:p-6 max-w-sm w-[92vw]",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:[t.jsx(N,{children:t.jsx(g,{className:"text-base sm:text-lg",children:"Get quiz reminders"})}),t.jsx("div",{className:"text-sm text-slate-300",children:"Turn on notifications to get alerts before a quiz starts and when results are announced."}),t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsx(y,{onClick:l,className:"font-semibold px-6",children:"Allow"})})]})})};export{P as default};
