import{u as Y,h as S,g as A,l as B,b as J,a as M,j as e,S as K,f as $,p as X,c as P,d as ee}from"./index-sZV1i97I.js";import{u as te,r as g}from"./router-D53U3OCX.js";import{m as r}from"./motion-lite-CITOPWQs.js";import{T as O,P as R,h as U,o as ie}from"./icons-DXR8YHNI.js";import"./supabase-BMIB7Fuo.js";import"./react-DQQtrPfG.js";const me=()=>{const _=te(),{user:b,userProfile:y}=Y(),[x,N]=g.useState([]),[Z,k]=g.useState(!0),[H,z]=g.useState({}),[se,V]=g.useState(0),G=g.useRef(new Set),v=g.useCallback(async()=>{if(!b)return;if(!S){N([]);return}const t=await A();if(!t){N([]);return}try{const a=new Date().toISOString(),d="id, slot_id, title, start_time, end_time, prize_type, prizes",{data:l,error:o}=await t.from("my_quizzes_view").select(d).gt("end_time",a).order("start_time",{ascending:!0}).limit(20);if(o)throw o;const n="id, slot_id, title, end_time, prize_type, prizes, leaderboard",{data:c,error:i}=await t.from("my_quizzes_view").select(n).lte("end_time",a).order("end_time",{ascending:!1}).limit(5);if(i)throw i;N([...l||[],...c||[]])}catch(a){B.error("fetchMyQuizzes failed",a),N([])}},[b]);g.useEffect(()=>{if(!b||!S||!Array.isArray(x)||x.length===0)return;const t=Date.now(),a=x.filter(n=>{try{return!(!(n!=null&&n.id)||!(n!=null&&n.end_time)||!(new Date(n.end_time).getTime()<=t)||!(!Array.isArray(n.leaderboard)||n.leaderboard.length===0)||G.current.has(n.id))}catch(c){return!1}});if(!(J({defaultValue:!0})||(y==null?void 0:y.role)==="admin")||a.length===0)return;let l=!1;const o=(n,c=2500)=>{try{if(typeof window!="undefined"&&"requestIdleCallback"in window){window.requestIdleCallback(()=>{try{n()}catch(i){}},{timeout:c});return}}catch(i){}setTimeout(()=>{try{n()}catch(i){}},Math.max(0,c))};for(const n of a)G.current.add(n.id);return o(async()=>{try{const n=await A();if(!n||l||!(await Promise.allSettled(a.map(s=>ee(n,s.id)))).some(s=>s.status==="fulfilled"&&s.value===!0)||l)return;const{data:p}=await n.from("my_quizzes_view").select("*");if(l)return;N((p||[]).map(s=>({...s})))}catch(n){}}),()=>{l=!0}},[b,y==null?void 0:y.role,x]),g.useEffect(()=>{if(typeof window!="undefined"&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().catch(()=>{}),!b){k(!1),N([]),z({});return}(async()=>{k(!0);try{await v()}finally{k(!1)}})();const a=setInterval(v,3e4),d=()=>{document.visibilityState==="visible"&&v()};document.addEventListener("visibilitychange",d);const l=()=>{v()};return window.addEventListener("online",l),()=>{clearInterval(a),document.removeEventListener("visibilitychange",d),window.removeEventListener("online",l)}},[b,v]);const W=(()=>{var t;try{const d=(t=(typeof window!="undefined"&&window.__QUIZ_DANGAL_ENV__?window.__QUIZ_DANGAL_ENV__:{}).VITE_ENABLE_REALTIME)!=null?t:"1",l=String(d).toLowerCase();return l==="1"||l==="true"||l==="yes"}catch(a){return!0}})(),F=(()=>{try{if(typeof window=="undefined"||!window.isSecureContext||!("WebSocket"in window)||navigator&&navigator.onLine===!1)return!1;const t=navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection)||null;return!(t&&(t.saveData||typeof t.effectiveType=="string"&&/(^|\b)2g(\b|$)/i.test(t.effectiveType)))}catch(t){return!1}})(),q=W&&F&&!!b&&!!S;if(M({enabled:q,channelName:"myquizzes-results-channel",event:"INSERT",table:"quiz_results",onChange:()=>{v();try{typeof window!="undefined"&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Quiz Result Ready",{body:"Your quiz results are available. Tap to view."})}catch(t){}},joinTimeoutMs:5e3}),M({enabled:q,channelName:"myquizzes-results-update-channel",event:"UPDATE",table:"quiz_results",onChange:()=>{v()},joinTimeoutMs:5e3}),M({enabled:q,channelName:"myquizzes-slots-channel",event:"*",table:"quiz_slots",onChange:()=>{v()},joinTimeoutMs:5e3}),g.useEffect(()=>{let t=null;try{const a=Date.now();(x||[]).some(l=>{const o=l.start_time?new Date(l.start_time).getTime():0,n=l.end_time?new Date(l.end_time).getTime():0;return o&&a<o||o&&n&&a>=o&&a<n})&&(t=setInterval(()=>{V(l=>(l+1)%1e6)},1e3))}catch(a){}return()=>{t&&clearInterval(t)}},[x]),g.useEffect(()=>{const t=async()=>{try{if(!S){z({});return}const a=await A();if(!a){z({});return}const d=Date.now(),l=(x||[]).filter(i=>i.end_time&&d<new Date(i.end_time).getTime()),o=l.filter(i=>!i.slot_id).map(i=>i.id),n=l.filter(i=>!!i.slot_id).map(i=>i.slot_id),c={};if(o.length){const{data:i,error:p}=await a.rpc("get_engagement_counts_many",{p_quiz_ids:o});if(p)throw p;for(const s of i||[]){const m=s.pre_joined||0,u=s.joined||0;c[s.quiz_id]=m+u}}if(n.length){const i=s=>{var h,E,C,I,L,T,w;const m=Number((C=(E=(h=s==null?void 0:s.participants_joined)!=null?h:s==null?void 0:s.joined_count)!=null?E:s==null?void 0:s.joined)!=null?C:0),u=Number((T=(L=(I=s==null?void 0:s.participants_pre)!=null?I:s==null?void 0:s.pre_joined_count)!=null?L:s==null?void 0:s.pre_joined)!=null?T:0),f=Number((w=s==null?void 0:s.participants_total)!=null?w:m+u);return Number.isFinite(f)?f:0},p=s=>(s==null?void 0:s.id)||(s==null?void 0:s.slot_id)||null;try{const{data:s,error:m}=await a.from("quiz_slots_view").select("*").in("id",n);if(m)throw m;for(const u of s||[]){const f=p(u);f&&(c[f]=i(u))}}catch(s){try{const{data:m,error:u}=await a.from("quiz_slots_view").select("*").in("slot_id",n);if(u)throw u;for(const f of m||[]){const h=p(f);h&&(c[h]=i(f))}}catch(m){}}}z(c)}catch(a){z({})}};x&&x.length&&t()},[x]),Z)return e.jsx("div",{className:"relative pt-14 mx-auto max-w-5xl px-4 py-4",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[e.jsxs("div",{className:"qd-card rounded-2xl border border-slate-800/70 bg-slate-950/70 p-4 sm:p-6 mb-6 animate-pulse",children:[e.jsx("div",{className:"h-7 w-32 bg-slate-700 rounded mb-4"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"h-7 w-28 bg-slate-800 rounded-full"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-4 w-28 bg-slate-700 rounded mb-3"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-5 flex-1 bg-slate-700 rounded"}),e.jsx("div",{className:"h-5 w-16 bg-slate-800 rounded-full"})]}),e.jsx("div",{className:"flex gap-2 mb-3",children:[1,2,3].map(a=>e.jsx("div",{className:"h-8 w-16 bg-slate-800 rounded-lg"},a))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsx("div",{className:"h-12 bg-slate-800 rounded-md"}),e.jsx("div",{className:"h-12 bg-slate-800 rounded-md"})]}),e.jsx("div",{className:"h-10 bg-gradient-to-r from-slate-700 to-slate-600 rounded-lg"})]},t))})]}),e.jsx("div",{className:"h-4 w-20 bg-slate-700 rounded mb-3"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-2xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-32 bg-slate-700 rounded mb-2"}),e.jsx("div",{className:"h-3 w-20 bg-slate-800 rounded"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3].map(a=>e.jsx("div",{className:"h-14 bg-slate-800 rounded-xl"},a))})]},t))})]})});if(x.length===0)return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden","aria-hidden":"true",children:[e.jsx(r.div,{className:"absolute top-20 -left-20 w-64 h-64 rounded-full bg-gradient-to-br from-orange-500/20 via-pink-500/15 to-purple-600/20 blur-[80px]",animate:{x:[0,30,0],y:[0,20,0],scale:[1,1.1,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(r.div,{className:"absolute top-1/3 -right-20 w-72 h-72 rounded-full bg-gradient-to-br from-violet-600/20 via-blue-500/15 to-cyan-500/20 blur-[90px]",animate:{x:[0,-25,0],y:[0,30,0],scale:[1.1,1,1.1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(r.div,{className:"absolute bottom-40 left-1/4 w-56 h-56 rounded-full bg-gradient-to-br from-emerald-500/15 via-teal-500/10 to-cyan-500/15 blur-[70px]",animate:{x:[0,20,0],y:[0,-20,0],scale:[1,1.15,1]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs(r.div,{className:"relative z-10 text-center px-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.22,1,.36,1]},children:[e.jsxs(r.div,{className:"relative w-44 h-44 mx-auto mb-5",animate:{y:[0,-10,0],rotateY:[0,5,0,-5,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},children:[e.jsx(r.div,{className:"absolute inset-0 bg-gradient-to-b from-violet-500/40 via-pink-500/30 to-cyan-500/20 blur-3xl scale-150",animate:{opacity:[.5,.8,.5],scale:[1.4,1.6,1.4]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),e.jsxs("svg",{viewBox:"0 0 160 160",className:"w-full h-full relative z-10",fill:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"isoTop",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#c4b5fd"}),e.jsx("stop",{offset:"100%",stopColor:"#a78bfa"})]}),e.jsxs("linearGradient",{id:"isoLeft",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#7c3aed"}),e.jsx("stop",{offset:"100%",stopColor:"#5b21b6"})]}),e.jsxs("linearGradient",{id:"isoRight",x1:"100%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#6d28d9"})]}),e.jsxs("linearGradient",{id:"goldGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),e.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),e.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]}),e.jsxs("linearGradient",{id:"lineGrad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f472b6"}),e.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]}),e.jsxs("linearGradient",{id:"lineGrad2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),e.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]}),e.jsx("filter",{id:"softShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:e.jsx("feDropShadow",{dx:"0",dy:"8",stdDeviation:"6",floodColor:"#7c3aed",floodOpacity:"0.35"})})]}),e.jsxs("g",{filter:"url(#softShadow)",transform:"translate(80, 85)",children:[e.jsx("path",{d:"M-35 -50 L-35 45 L0 65 L0 -30 Z",fill:"url(#isoLeft)"}),e.jsx("path",{d:"M0 -30 L0 65 L35 45 L35 -50 Z",fill:"url(#isoRight)"}),e.jsx("path",{d:"M-35 -50 L0 -70 L35 -50 L0 -30 Z",fill:"url(#isoTop)"}),e.jsxs("g",{transform:"translate(0, -60)",children:[e.jsx("path",{d:"M-12 -8 L0 -14 L12 -8 L12 4 L0 10 L-12 4 Z",fill:"url(#goldGrad)"}),e.jsx("ellipse",{cx:"0",cy:"-2",rx:"4",ry:"3",fill:"#92400e"})]}),e.jsxs("g",{transform:"translate(-25, -25)",children:[e.jsx("rect",{x:"0",y:"0",width:"28",height:"4",rx:"2",fill:"url(#lineGrad1)",opacity:"0.9",children:e.jsx("animate",{attributeName:"opacity",values:"0.6;1;0.6",dur:"2s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"0",y:"12",width:"22",height:"4",rx:"2",fill:"#a78bfa",opacity:"0.8",children:e.jsx("animate",{attributeName:"opacity",values:"1;0.6;1",dur:"2.2s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"0",y:"24",width:"25",height:"4",rx:"2",fill:"url(#lineGrad2)",opacity:"0.85",children:e.jsx("animate",{attributeName:"opacity",values:"0.7;1;0.7",dur:"1.8s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"0",y:"36",width:"18",height:"4",rx:"2",fill:"#fbbf24",opacity:"0.75",children:e.jsx("animate",{attributeName:"opacity",values:"0.5;0.9;0.5",dur:"2.5s",repeatCount:"indefinite"})})]}),e.jsx("text",{x:"5",y:"35",fontSize:"24",fontWeight:"bold",fill:"#ddd6fe",opacity:"0.4",children:"?"})]}),e.jsxs("g",{children:[e.jsxs("path",{d:"M130 30 L132 36 L138 38 L132 40 L130 46 L128 40 L122 38 L128 36 Z",fill:"#fbbf24",children:[e.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"2s",repeatCount:"indefinite"}),e.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 130 38",to:"360 130 38",dur:"6s",repeatCount:"indefinite"})]}),e.jsxs("path",{d:"M25 50 L26.5 54 L31 55.5 L26.5 57 L25 61 L23.5 57 L19 55.5 L23.5 54 Z",fill:"#ec4899",children:[e.jsx("animate",{attributeName:"opacity",values:"1;0.4;1",dur:"1.8s",repeatCount:"indefinite"}),e.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"360 25 55.5",to:"0 25 55.5",dur:"5s",repeatCount:"indefinite"})]}),e.jsxs("circle",{cx:"140",cy:"100",r:"4",fill:"#22d3ee",children:[e.jsx("animate",{attributeName:"r",values:"3;5;3",dur:"2s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.6;1;0.6",dur:"2s",repeatCount:"indefinite"})]}),e.jsxs("circle",{cx:"20",cy:"110",r:"3",fill:"#f472b6",children:[e.jsx("animate",{attributeName:"r",values:"2;4;2",dur:"2.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"2.5s",repeatCount:"indefinite"})]}),e.jsx("circle",{cx:"135",cy:"130",r:"2.5",fill:"#a78bfa",children:e.jsx("animate",{attributeName:"opacity",values:"0.4;1;0.4",dur:"1.5s",repeatCount:"indefinite"})})]})]})]}),e.jsx(r.p,{className:"text-base text-slate-400 mb-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:"No Quizzes Joined"}),e.jsxs(r.button,{onClick:()=>_("/"),className:"relative px-8 py-3.5 rounded-xl font-semibold text-white overflow-hidden",style:{background:"linear-gradient(135deg, #7c3aed, #db2777, #ea580c)",boxShadow:"0 8px 32px -8px rgba(124, 58, 237, 0.5)"},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},whileHover:{scale:1.02,boxShadow:"0 12px 40px -8px rgba(124, 58, 237, 0.6)"},whileTap:{scale:.98},children:[e.jsx(r.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/25 to-transparent -skew-x-12",animate:{x:["-200%","200%"]},transition:{duration:2.5,repeat:1/0,repeatDelay:2}}),e.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üéØ"}),e.jsx("span",{children:"Explore Quizzes"})]})]})]})]});const j=Date.now(),D=x.filter(t=>t.end_time&&j<new Date(t.end_time).getTime()),Q=x.filter(t=>t.end_time&&j>=new Date(t.end_time).getTime()).sort((t,a)=>{const d=t.end_time?new Date(t.end_time).getTime():0;return(a.end_time?new Date(a.end_time).getTime():0)-d}).slice(0,5);return D.sort((t,a)=>{const d=t.start_time?new Date(t.start_time).getTime():0,l=t.end_time?new Date(t.end_time).getTime():0,o=a.start_time?new Date(a.start_time).getTime():0,n=a.end_time?new Date(a.end_time).getTime():0,c=d&&l&&j>=d&&j<l,i=o&&n&&j>=o&&j<n;return c!==i?c?-1:1:d-o}),e.jsxs("div",{className:"relative pt-16 pb-8 px-3 sm:px-4 mx-auto w-full max-w-md sm:max-w-4xl lg:max-w-5xl xl:max-w-6xl min-h-screen",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden","aria-hidden":"true",children:[e.jsx(r.div,{className:"absolute top-20 -left-20 w-64 h-64 rounded-full bg-gradient-to-br from-orange-500/20 via-pink-500/15 to-purple-600/20 blur-[80px]",animate:{x:[0,30,0],y:[0,20,0],scale:[1,1.1,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(r.div,{className:"absolute top-1/3 -right-20 w-72 h-72 rounded-full bg-gradient-to-br from-violet-600/20 via-blue-500/15 to-cyan-500/20 blur-[90px]",animate:{x:[0,-25,0],y:[0,30,0],scale:[1.1,1,1.1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(r.div,{className:"absolute bottom-40 left-1/4 w-56 h-56 rounded-full bg-gradient-to-br from-emerald-500/15 via-teal-500/10 to-cyan-500/15 blur-[70px]",animate:{x:[0,20,0],y:[0,-20,0],scale:[1,1.15,1]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}})]}),e.jsx(K,{title:"My Quizzes ‚Äì Quiz Dangal",description:"Track the quizzes you have joined, monitor live rounds, and revisit completed contests on Quiz Dangal.",canonical:"https://quizdangal.com/my-quizzes/",robots:"noindex, nofollow",author:"Quiz Dangal",datePublished:"2025-01-01"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(r.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"overflow-hidden",children:[e.jsx(r.div,{className:"text-center mb-8",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx(r.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(O,{className:"w-9 h-9 text-amber-400 drop-shadow-[0_0_15px_rgba(251,191,36,0.7)]"})}),e.jsx("h1",{className:"text-3xl font-black bg-gradient-to-r from-orange-300 via-pink-300 to-violet-400 bg-clip-text text-transparent drop-shadow-sm",children:"My Quizzes"})]})}),D.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs(r.div,{className:"flex items-center justify-between gap-3 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r.div,{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 grid place-items-center",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx(R,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-base font-bold bg-gradient-to-r from-emerald-300 to-teal-300 bg-clip-text text-transparent",children:"Live & Upcoming"})]}),e.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-emerald-500/20 border border-emerald-500/30 text-emerald-300",children:[D.length," quizzes"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map((t,a)=>{var I,L,T;const d=t.start_time?new Date(t.start_time):null,l=t.end_time?new Date(t.end_time):null,o=d&&l&&j>=d.getTime()&&j<l.getTime(),n=o?Math.max(0,Math.floor((l.getTime()-Date.now())/1e3)):d?Math.max(0,Math.floor((d.getTime()-Date.now())/1e3)):0,c=d&&l?Math.max(1,l.getTime()-d.getTime()):null,i=o&&c?Math.min(100,Math.max(0,Math.round((Date.now()-d.getTime())/c*100))):null,p=Array.isArray(t.prizes)?t.prizes:[],s=t.prize_type||"coins",m=(I=p[0])!=null?I:0,u=(L=p[1])!=null?L:0,f=(T=p[2])!=null?T:0,h=w=>P(s,w,{fallback:0}).formatted,E=H[t.slot_id||t.id]||0,C=t.slot_id?`/quiz/slot/${t.slot_id}`:`/quiz/${t.id}`;return e.jsx(r.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:a*.06,duration:.3,ease:[.25,.46,.45,.94]},className:"quiz-slot-card cursor-pointer",onClick:()=>_(C),children:e.jsxs("div",{className:`quiz-slot-card-inner ${o?"quiz-slot-card-live":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"quiz-slot-lang",children:"üåê Hindi / English"}),e.jsxs("span",{className:`quiz-slot-badge ${o?"quiz-slot-badge-live":"quiz-slot-badge-upcoming"}`,children:[o&&e.jsx("span",{className:"quiz-slot-badge-dot"}),o?"LIVE":"UPCOMING"]})]}),e.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:t.title}),e.jsxs("div",{className:"quiz-slot-time-section",children:[e.jsxs("div",{className:"quiz-slot-time-row",children:[e.jsxs("div",{className:"quiz-slot-time-box",children:[e.jsx("span",{className:"quiz-slot-time-label",children:"START"}),e.jsx("span",{className:"quiz-slot-time-value",children:t.start_time?$(t.start_time):"‚Äî"})]}),e.jsx("div",{className:"quiz-slot-time-divider",children:"‚Üí"}),e.jsxs("div",{className:"quiz-slot-time-box",children:[e.jsx("span",{className:"quiz-slot-time-label",children:"END"}),e.jsx("span",{className:"quiz-slot-time-value",children:t.end_time?$(t.end_time):"‚Äî"})]})]}),n!==null&&e.jsxs("div",{className:`quiz-slot-timer ${o?"quiz-slot-timer-live":""}`,children:[e.jsx(U,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:o?"Ends in":"Starts in"}),e.jsxs("span",{className:"quiz-slot-timer-value",children:[String(Math.floor(n/60)).padStart(2,"0"),":",String(n%60).padStart(2,"0")]})]})]}),e.jsxs("div",{className:"quiz-slot-prize-section",children:[e.jsx("div",{className:"quiz-slot-prize-title",children:"üèÜ Prizes"}),e.jsxs("div",{className:"quiz-slot-prize-row",children:[e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-gold",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"1st"}),e.jsx("span",{className:"quiz-slot-prize-value",children:h(m)})]}),e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-silver",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"2nd"}),e.jsx("span",{className:"quiz-slot-prize-value",children:h(u)})]}),e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-bronze",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"3rd"}),e.jsx("span",{className:"quiz-slot-prize-value",children:h(f)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:"quiz-slot-stat",children:[e.jsx(ie,{className:"w-3 h-3"})," ",E," Joined"]}),e.jsx("span",{className:"quiz-slot-stat quiz-slot-stat-joined",children:"‚úì You're In"})]}),i!==null&&e.jsx("div",{className:"w-full bg-slate-800/50 rounded-full h-1.5 mb-3 overflow-hidden",children:e.jsx("div",{className:"h-1.5 bg-emerald-500/80 rounded-full",style:{width:`${i}%`}})}),e.jsxs("button",{type:"button",onClick:w=>{w.stopPropagation(),_(C)},onMouseEnter:()=>X("/quiz"),className:`quiz-slot-btn ${o?"quiz-slot-btn-live":"quiz-slot-btn-default"}`,children:[e.jsx(R,{className:"w-4 h-4 mr-1"})," PLAY"]})]})},`lu-${t.slot_id||t.id}`)})})]}),e.jsxs(r.div,{className:"mt-8 flex items-center justify-between gap-3 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r.div,{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-purple-600 grid place-items-center",animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0},children:e.jsx(O,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-base font-bold bg-gradient-to-r from-violet-300 to-purple-300 bg-clip-text text-transparent",children:"Finished"})]}),e.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-violet-500/20 border border-violet-500/30 text-violet-300",children:["Recent ",Q.length]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Q.map((t,a)=>{var u,f;const d=new Date,l=new Date(t.end_time),o=l.toLocaleString([],{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}),n=Array.isArray(t.leaderboard)?t.leaderboard:[],c=d>=l&&n.length>0,i=c?n.find(h=>h.user_id===(b==null?void 0:b.id)):null,p=t.prize_type&&String(t.prize_type).trim()?t.prize_type:"coins",s=i!=null&&i.rank&&Array.isArray(t.prizes)?t.prizes[i.rank-1]:null,m=i!=null&&i.rank?P(p,s!=null?s:0,{fallback:0}).formatted:"‚Äî";return e.jsx(r.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:a*.06,duration:.3,ease:[.25,.46,.45,.94]},onClick:()=>_(t.slot_id?`/results/slot/${t.slot_id}`:`/results/${t.id}`),className:"quiz-slot-card cursor-pointer",children:e.jsxs("div",{className:"quiz-slot-card-inner",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"quiz-slot-lang",children:"üåê Hindi / English"}),e.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),o]})]}),e.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:t.title}),c?e.jsxs(r.div,{className:"mb-3 p-2.5 rounded-xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-white/10 overflow-hidden relative",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsx(r.div,{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 via-violet-500/5 to-emerald-500/5",animate:{opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0}}),e.jsxs("div",{className:"relative flex items-stretch gap-1.5 min-w-0",children:[e.jsxs(r.div,{className:"flex-1 min-w-0 text-center py-2 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-600/10 border border-amber-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(r.div,{className:"absolute inset-0 bg-gradient-to-t from-amber-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-amber-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Rank"}),e.jsxs(r.div,{className:"text-base font-black text-amber-400 drop-shadow-[0_0_8px_rgba(251,191,36,0.4)] w-full truncate",animate:{scale:(i==null?void 0:i.rank)<=3?[1,1.05,1]:1},transition:{duration:2,repeat:1/0},children:["#",(u=i==null?void 0:i.rank)!=null?u:"-"]})]}),(i==null?void 0:i.rank)<=3&&e.jsx(r.div,{className:"absolute -top-0.5 -right-0.5 text-[10px]",animate:{rotate:[0,15,-15,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:"üèÜ"})]}),e.jsxs(r.div,{className:"flex-1 min-w-0 text-center py-2 rounded-lg bg-gradient-to-br from-violet-500/20 to-purple-600/10 border border-violet-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(r.div,{className:"absolute inset-0 bg-gradient-to-t from-violet-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-violet-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Score"}),e.jsx("div",{className:"text-base font-black text-violet-400 drop-shadow-[0_0_8px_rgba(139,92,246,0.4)] w-full truncate",children:(f=i==null?void 0:i.score)!=null?f:"-"})]})]}),e.jsxs(r.div,{className:"flex-1 min-w-0 text-center py-2 rounded-lg bg-gradient-to-br from-emerald-500/20 to-teal-600/10 border border-emerald-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(r.div,{className:"absolute inset-0 bg-gradient-to-t from-emerald-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-emerald-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Won"}),e.jsx(r.div,{className:"text-base font-black text-emerald-400 drop-shadow-[0_0_8px_rgba(52,211,153,0.4)] w-full truncate",animate:m!=="-"?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0,delay:.5},children:m})]}),m!=="-"&&m!=="0"&&e.jsx(r.div,{className:"absolute -top-0.5 -right-0.5 text-[10px]",animate:{y:[0,-2,0]},transition:{duration:1.5,repeat:1/0},children:"ü™ô"})]})]})]}):e.jsx(r.div,{className:"mb-3 py-3 rounded-xl bg-gradient-to-r from-slate-800/60 via-slate-700/40 to-slate-800/60 border border-white/5 text-center",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0},style:{backgroundSize:"200% 100%"},children:e.jsxs(r.span,{className:"text-xs text-slate-400 inline-flex items-center gap-2",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[e.jsx(r.span,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:"‚è≥"}),"Calculating Results..."]})}),e.jsxs("button",{type:"button",onClick:h=>{h.stopPropagation(),_(t.slot_id?`/results/slot/${t.slot_id}`:`/results/${t.id}`)},className:"quiz-slot-btn quiz-slot-btn-default",children:[e.jsx(O,{className:"w-4 h-4"})," VIEW RESULT"]})]})},t.slot_id||t.id)})})]})})]})};export{me as default};
