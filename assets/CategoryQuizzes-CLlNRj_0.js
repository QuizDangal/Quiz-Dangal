import{l as ne,R as ye,v as Ee,e as Me,u as Ae,k as ke,j as t,S as $e,t as pe,f as U,p as ge,s as Q,c as fe,o as Pe}from"./index-BUms4FRM.js";import{g as Ce,u as Je,f as Ue,r as _}from"./router-CWIfZQRv.js";import{m as Qe}from"./motion-lite-CguNR5TK.js";import{s as Oe}from"./smartJoinQuiz-A09reOUr.js";import{j as xe,p as he,M as ze,B as Re,T as Fe,d as Ve}from"./icons-BNA5wz6Z.js";import"./supabase-cQshKuiM.js";import"./react-MKCYUrdX.js";function Be(s){var f,p,v,u,y,w,N,I,d,x;if(!s)return null;const o=Number((v=(p=(f=s.participants_joined)!=null?f:s.joined_count)!=null?p:s.joined)!=null?v:0),m=Number((w=(y=(u=s.participants_pre)!=null?u:s.pre_joined_count)!=null?y:s.pre_joined)!=null?w:0),c=Number((N=s.participants_total)!=null?N:o+m),g=s.id||s.slot_id||s.quiz_slot_id||null,D=s.quiz_id||s.quizid||null;return{slotId:g,quizId:D,category:s.category||null,title:s.quiz_title||s.title||s.slot_title||null,start_time:s.start_time||s.slot_start||s.starts_at||null,end_time:s.end_time||s.slot_end||s.ends_at||null,status:s.status||"scheduled",prizes:Array.isArray(s.prizes)?s.prizes:Array.isArray(s.quiz_prizes)?s.quiz_prizes:[],questions:Array.isArray(s.questions)?s.questions:[],prize_type:s.prize_type||s.quiz_prize_type||"coins",participants_joined:o,participants_pre:m,participants_total:c,questions_count:Number((x=(d=(I=s.questions_count)!=null?I:s.question_count)!=null?d:s.q_count)!=null?x:0),auto_enabled:typeof s.auto_enabled=="boolean"?s.auto_enabled:void 0,stop_override:!!s.stop_override}}async function We(s,o){if(!s)return{slots:[],mode:"none",auto:!0};let m=[],c=[],g=!0;try{const{data:u,error:y}=await s.from("quiz_slots_view").select("*").eq("category",o).order("start_time",{ascending:!0});!y&&u&&(m=u.map(Be))}catch(u){ne.debug("quiz_slots_view error",u.message||u)}try{const{data:u,error:y}=await s.from("quizzes").select("id,title,start_time,end_time,status,prizes,prize_type,slot_id,questions(count)").eq("category",o).order("start_time",{ascending:!0});if(!y&&u){const w=Date.now(),N=(u||[]).filter(d=>!d.slot_id);let I={};if(N.length>0)try{const{data:d}=await s.rpc("get_engagement_counts_many",{p_quiz_ids:N.map(x=>x.id)});if(d)for(const x of d)I[x.quiz_id]=(x.pre_joined||0)+(x.joined||0)}catch(d){ne.debug("get_engagement_counts_many RPC error (non-critical):",(d==null?void 0:d.message)||d)}c=N.map(d=>{var x,O;return{slotId:d.id,quizId:d.id,category:o,title:d.title,quiz_title:d.title,start_time:d.start_time,end_time:d.end_time,status:He(d,w),prizes:Array.isArray(d.prizes)?d.prizes:[],prize_type:d.prize_type||"coins",participants_joined:I[d.id]||0,participants_total:I[d.id]||0,questions_count:((O=(x=d.questions)==null?void 0:x[0])==null?void 0:O.count)||0,auto_enabled:!0,isLegacy:!0}})}}catch(u){ne.debug("Legacy quizzes fetch error",u.message||u)}try{const{data:u,error:y}=await s.from("category_runtime_overrides").select("category,auto_enabled:is_auto").eq("category",o).maybeSingle();!y&&u&&(g=!!u.auto_enabled)}catch(u){}const D=new Set(m.map(u=>u.quizId).filter(Boolean)),f=c.filter(u=>!D.has(u.quizId)),p=[...m,...f];p.sort((u,y)=>{const w=u.start_time?new Date(u.start_time).getTime():0,N=y.start_time?new Date(y.start_time).getTime():0;return w-N});const v=m.length>0?"slots":f.length>0?"legacy":"none";return{slots:p,mode:v,auto:g}}function He(s,o){const m=s.start_time?new Date(s.start_time).getTime():null,c=s.end_time?new Date(s.end_time).getTime():null;return m&&c&&o>=m&&o<c?"active":m&&o<m?"scheduled":c&&o>=c?"finished":"scheduled"}function Ge(s){const o=Date.now(),m=s.find(f=>{const p=f!=null&&f.start_time?new Date(f.start_time).getTime():null,v=f!=null&&f.end_time?new Date(f.end_time).getTime():null;return p&&v&&o>=p&&o<v}),c=s.filter(f=>{const p=f!=null&&f.start_time?new Date(f.start_time).getTime():null;return p?o<p:!1});c.sort((f,p)=>new Date(f.start_time).getTime()-new Date(p.start_time).getTime());const g=c[0]||null,D=c[1]||null;return{live:m,next:g,queued:D}}const M=new Map,Ke=500;let je=0;function W(s){if(M.size>=Ke||je%200===0||M.size>=100)for(const[o,m]of M.entries()){const c=(m.windowMs||ye)*2;s-m.firstTs>c&&M.delete(o)}}function Xe(s,{max:o=Ee,windowMs:m=ye}={}){je+=1;const c=Date.now(),g=M.get(s);return g?c-g.firstTs>g.windowMs?(M.set(s,{count:1,firstTs:c,windowMs:m}),W(c),{allowed:!0,remaining:o-1}):g.count>=o?(W(c),{allowed:!1,remaining:0}):(g.count+=1,W(c),{allowed:!0,remaining:o-g.count}):(M.set(s,{count:1,firstTs:c,windowMs:m}),W(c),{allowed:!0,remaining:o-1})}function Ye(s=""){const o=String(s||"").toLowerCase();return o.includes("opinion")?{title:"Opinion Quizzes",emoji:"ðŸ’¬",Icon:ze,from:"from-indigo-600/30",to:"to-fuchsia-600/30",ring:"ring-fuchsia-500/30"}:o.includes("gk")?{title:"GK Quizzes",emoji:"ðŸ§ ",Icon:Re,from:"from-emerald-600/30",to:"to-teal-600/30",ring:"ring-emerald-500/30"}:o.includes("sport")?{title:"Sports Quizzes",emoji:"ðŸ†",Icon:Fe,from:"from-orange-600/30",to:"to-red-600/30",ring:"ring-orange-500/30"}:o.includes("movie")?{title:"Movie Quizzes",emoji:"ðŸŽ¬",Icon:Ve,from:"from-violet-600/30",to:"to-indigo-600/30",ring:"ring-violet-500/30"}:{title:`${s} Quizzes`,emoji:"â­",Icon:ze,from:"from-sky-600/30",to:"to-indigo-600/30",ring:"ring-sky-500/30"}}const H=s=>s!=null&&s.start_time?new Date(s.start_time).getTime():null,be=s=>s!=null&&s.end_time?new Date(s.end_time).getTime():null,_e=s=>{const o=H(s),m=be(s);if(!o||!m)return!1;const c=Date.now();return c>=o&&c<m},Ze=s=>{const o=H(s);return o?Date.now()<o:!1},ot=()=>{const{slug:s}=Ce(),o=Je(),m=Ue(),{toast:c}=Me(),{user:g}=Ae(),{isSubscribed:D,subscribeToPush:f}=ke(),[p]=_.useState([]),[v,u]=_.useState(!0),[y,w]=_.useState(null),[N,I]=_.useState({}),[d,x]=_.useState({}),[O,ae]=_.useState(0),[q,ve]=_.useState([]),[L,G]=_.useState("detect"),[Ne,we]=_.useState(!0),Ie=2e4,R=_.useCallback(async()=>{if(Q)try{const{slots:e,mode:n,auto:i}=await We(Q,s);ve(e),we(i),G(n==="slots"||n==="legacy"?"slots":"legacy")}catch(e){G("legacy")}},[s]);_.useEffect(()=>{u(!0),R().finally(()=>{u(!1)})},[R]),_.useEffect(()=>{if(L==="none")return;const e=setInterval(()=>{R()},Ie);return()=>clearInterval(e)},[L,R]),_.useEffect(()=>{const e=Date.now();if(!(p||[]).some(a=>{const l=a.start_time?new Date(a.start_time).getTime():0,r=a.end_time?new Date(a.end_time).getTime():0;return l&&e<l||l&&r&&e>=l&&e<r}))return;const i=setInterval(()=>ae(a=>(a+1)%1e6),1e3);return()=>clearInterval(i)},[p]),_.useEffect(()=>{if(L!=="slots")return;const e=Date.now();if(!(q||[]).some(a=>{const l=a.start_time?new Date(a.start_time).getTime():0,r=a.end_time?new Date(a.end_time).getTime():0;return l&&e<l||l&&r&&e>=l&&e<r}))return;const i=setInterval(()=>ae(a=>(a+1)%1e6),1e3);return()=>clearInterval(i)},[q,L]),_.useEffect(()=>{const e=async()=>{try{const n=(p||[]).map(r=>r.id);if(!n.length){I({});return}const{data:i,error:a}=await Q.rpc("get_engagement_counts_many",{p_quiz_ids:n});if(a)throw a;const l={};for(const r of i||[]){const h=r.pre_joined||0,j=r.joined||0;l[r.quiz_id]=h+j}I(l)}catch(n){}};p&&p.length&&e()},[p]),_.useEffect(()=>{(async()=>{const n=r=>!r||typeof r!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r),i=(p||[]).map(r=>r.id).filter(n),a=(q||[]).map(r=>r.quizId||r.quiz_id||r.id).filter(n),l=[...new Set([...i,...a])];if(!g||!l.length){x({});return}try{const r={},{data:h,error:j}=await Q.from("quiz_participants").select("quiz_id,status").eq("user_id",g.id).in("quiz_id",l);if(!j&&h)for(const z of h)z.quiz_id&&(r[z.quiz_id]=z.status==="pre_joined"?"pre":"joined");for(const z of q||[]){const b=z.quizId||z.quiz_id||z.id;b&&r[b]&&z.slotId&&(r[z.slotId]=r[b])}x(r)}catch(r){x({})}})()},[g,p,q]);const re=async e=>{if(!g){c({title:"Login required",description:"Please sign in to join the quiz.",variant:"destructive"}),o("/login");return}const n=e.slotId||e.id;try{const i=String((e==null?void 0:e.status)||"").trim().toLowerCase();if(i==="paused"||i==="stopped"||i==="skipped"||e!=null&&e.stop_override){c({title:"Paused",description:"This category is paused right now. Please try later.",variant:"destructive"});return}}catch(i){}w(n);try{typeof Notification!="undefined"&&Notification.permission!=="granted"&&!D&&Promise.resolve().then(()=>f()).catch(()=>{})}catch(i){}try{const i=await Oe({supabase:Q,quiz:e,user:g});if(i.status==="error")throw i.error;i.status==="already"?(x(a=>({...a,[n]:"joined"})),c({title:"Already Joined",description:"You are in this quiz."})):i.status==="joined"?(x(l=>({...l,[n]:"joined"})),Xe(`join_${(g==null?void 0:g.id)||"anon"}`,{max:4,windowMs:8e3}).allowed?(c({title:"Joined!",description:"Taking you to the quiz."}),o(e.slotId&&!e.isLegacy?`/quiz/slot/${e.slotId}`:`/quiz/${e.id}`)):c({title:"Slow down",description:"Please wait a moment before trying again.",variant:"destructive"})):i.status==="pre_joined"?(x(a=>({...a,[n]:"pre"})),c({title:"Pre-joined!",description:"We will remind you before start."})):i.status==="scheduled_retry"&&(x(a=>({...a,[n]:"pre"})),c({title:"Pre-joined!",description:"Auto joining at start time."}))}catch(i){const a=Pe(i);c({title:"Error",description:a||(i==null?void 0:i.message)||"Could not join quiz.",variant:"destructive"})}finally{w(null)}},oe=p.filter(e=>{if(L==="slots")return!1;const n=Date.now(),i=e.start_time?new Date(e.start_time).getTime():0,a=e.end_time?new Date(e.end_time).getTime():0,l=i&&a&&n>=i&&n<a,r=i&&n<i;return l||r}),A=Ye(s),k=Date.now(),K=L==="slots",C=K?q:p||[],qe=K?C.filter(e=>_e(e)).length:C.reduce((e,n)=>{const i=n.start_time?new Date(n.start_time).getTime():0,a=n.end_time?new Date(n.end_time).getTime():0;return e+(i&&a&&k>=i&&k<a?1:0)},0),Se=C.filter(e=>{const n=e.start_time?new Date(e.start_time).getTime():0;return!n||k>=n?!1:e.isLegacy?!0:n-k<=300*1e3}).length,X=K?C.map(e=>H(e)).filter(e=>e&&e>k).sort((e,n)=>e-n)[0]||null:C.map(e=>e.start_time?new Date(e.start_time).getTime():null).filter(e=>e&&e>k).sort((e,n)=>e-n)[0]||null,{next:F}=Ge(q),Te=e=>{var de,ue,me;if(!e)return null;const n=Date.now(),i=H(e),a=be(e),l=_e(e),r=e.status==="paused",h=e.status==="finished"||a&&n>=a,j=Ze(e),z=j&&i?Math.max(0,Math.floor((i-n)/1e3)):l&&a?Math.max(0,Math.floor((a-n)/1e3)):null,b=Array.isArray(e.prizes)?e.prizes:[],Y=e.prize_type||"coins",Z=(de=b[0])!=null?de:0,ee=(ue=b[1])!=null?ue:0,te=(me=b[2])!=null?me:0,E=Le=>fe(Y,Le,{fallback:0}).formatted,se=e.participants_total||e.participants_joined||0,V=e.questions_count||10,B=!Ne&&!l&&!j,T=l&&!h?"LIVE":r?"PAUSED":B?"STOPPED":j?"UPCOMING":h?"FINISHED":(e.status||"").toUpperCase(),J=e.isLegacy?e.quizId:e.slotId,S=!!d[J],$=y===J,ce=h?"Results":l?S?"Play":"Join Now":j?S?"Joined âœ“":"Pre-Join":"View",De=async()=>{if(h){o(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}if(!g){c({title:"Login Required",description:"Please login to join the quiz.",variant:"destructive"}),o("/login",{state:{from:m.pathname,message:"Login to join the quiz"}});return}if(S&&!l){o(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}if(l){o(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}j&&!S&&await re({id:e.quizId,...e})};return t.jsx("div",{className:"quiz-slot-card",children:t.jsxs("div",{className:`quiz-slot-card-inner ${l?"quiz-slot-card-live":""}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("span",{className:"quiz-slot-lang",children:"ðŸŒ Hindi / English"}),t.jsxs("span",{className:`quiz-slot-badge ${T==="LIVE"?"quiz-slot-badge-live":T==="UPCOMING"?"quiz-slot-badge-upcoming":T==="PAUSED"?"quiz-slot-badge-paused":"quiz-slot-badge-default"}`,children:[T==="LIVE"&&t.jsx("span",{className:"quiz-slot-badge-dot"}),T]})]}),t.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:e.quiz_title||e.title||"Quiz"}),t.jsxs("div",{className:"quiz-slot-time-section",children:[t.jsxs("div",{className:"quiz-slot-time-row",children:[t.jsxs("div",{className:"quiz-slot-time-box",children:[t.jsx("span",{className:"quiz-slot-time-label",children:"START"}),t.jsx("span",{className:"quiz-slot-time-value",children:e.start_time?U(e.start_time):"â€”"})]}),t.jsx("div",{className:"quiz-slot-time-divider",children:"â†’"}),t.jsxs("div",{className:"quiz-slot-time-box",children:[t.jsx("span",{className:"quiz-slot-time-label",children:"END"}),t.jsx("span",{className:"quiz-slot-time-value",children:e.end_time?U(e.end_time):"â€”"})]})]}),z!==null&&t.jsxs("div",{className:`quiz-slot-timer ${l?"quiz-slot-timer-live":""}`,children:[t.jsx(xe,{className:"w-3.5 h-3.5"}),t.jsx("span",{children:j?"Starts in":"Ends in"}),t.jsxs("span",{className:"quiz-slot-timer-value",children:[Math.floor(z/60).toString().padStart(2,"0"),":",(z%60).toString().padStart(2,"0")]})]})]}),t.jsxs("div",{className:"quiz-slot-prize-section",children:[t.jsx("div",{className:"quiz-slot-prize-title",children:"ðŸ† Prizes"}),t.jsxs("div",{className:"quiz-slot-prize-row",children:[t.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-gold",children:[t.jsx("span",{className:"quiz-slot-prize-rank",children:"1st"}),t.jsx("span",{className:"quiz-slot-prize-value",children:E(Z)})]}),t.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-silver",children:[t.jsx("span",{className:"quiz-slot-prize-rank",children:"2nd"}),t.jsx("span",{className:"quiz-slot-prize-value",children:E(ee)})]}),t.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-bronze",children:[t.jsx("span",{className:"quiz-slot-prize-rank",children:"3rd"}),t.jsx("span",{className:"quiz-slot-prize-value",children:E(te)})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsxs("span",{className:"quiz-slot-stat",children:["ðŸ“ ",V," Questions"]}),t.jsxs("span",{className:"quiz-slot-stat",children:[t.jsx(he,{className:"w-3 h-3"})," ",se," Joined"]})]}),t.jsx("button",{type:"button",disabled:$||S&&j,onClick:De,onMouseEnter:()=>ge(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`),className:`quiz-slot-btn ${$?"opacity-50 cursor-wait":S&&j?"quiz-slot-btn-joined":l?"quiz-slot-btn-live":"quiz-slot-btn-default"}`,children:$?"Joining...":ce})]})},e.slotId)};_.useEffect(()=>{if(!F)return;const e=F.start_time?new Date(F.start_time).getTime():null;if(!e)return;const n=Date.now(),i=e-n-6e4;if(i<=0||i>1800*1e3)return;const a=setTimeout(()=>{try{c({title:"Upcoming Slot",description:"1 minute to start â€“ be ready!",duration:4e3})}catch(l){}},i);return()=>clearTimeout(a)},[F,c]);const le=typeof window!="undefined"?`${window.location.origin}/category/${s}/`:`https://quizdangal.com/category/${s}/`;return t.jsxs("div",{className:"px-3 sm:px-4 pt-14 sm:pt-16 pb-6",children:[t.jsx($e,{title:`${A.title} â€“ Quiz Dangal`,description:`Active and upcoming quizzes in ${A.title}. Play daily ${A.title.toLowerCase()} on Quiz Dangal and earn coins.`,canonical:le,robots:"index, follow",alternateLocales:["hi_IN","en_US"],author:"Quiz Dangal",datePublished:"2025-01-01",dateModified:"2025-12-29",jsonLd:[{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://quizdangal.com/"},{"@type":"ListItem",position:2,name:A.title,item:le}]}]}),t.jsx("span",{className:"hidden","aria-hidden":!0,children:O}),t.jsxs("div",{className:"max-w-md sm:max-w-2xl lg:max-w-4xl mx-auto space-y-4",children:[t.jsx("div",{className:"p-[1px] rounded-xl sm:rounded-2xl bg-gradient-to-r from-indigo-500/50 via-violet-500/40 to-fuchsia-500/50",children:t.jsxs("div",{className:"rounded-xl sm:rounded-2xl bg-slate-900/95 p-3 sm:p-4 lg:p-5",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-2",children:[t.jsx("div",{className:"w-9 h-9 sm:w-12 sm:h-12 lg:w-14 lg:h-14 rounded-lg sm:rounded-xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center text-lg sm:text-2xl lg:text-3xl",children:A.emoji}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h1",{className:"text-base sm:text-xl lg:text-2xl font-bold text-white truncate",children:A.title}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-[10px] sm:text-xs mt-1",children:[t.jsxs("span",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded sm:rounded-md bg-emerald-600/20 text-emerald-300 border border-emerald-600/30",children:[qe," live"]}),t.jsxs("span",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded sm:rounded-md bg-sky-600/20 text-sky-300 border border-sky-600/30",children:[Se," upcoming"]})]})]})]}),X&&t.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-slate-400",children:[t.jsx(xe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Next: ",pe(X)," â€¢ ",U(X)]})]})}),L==="slots"?t.jsx(t.Fragment,{children:v?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:Array.from({length:3}).map((e,n)=>t.jsx("div",{className:"h-40 sm:h-48 lg:h-52 rounded-xl sm:rounded-2xl bg-slate-800/60 border border-slate-700/60 animate-pulse"},n))}):t.jsx(t.Fragment,{children:q.filter(e=>{const n=Date.now(),i=e.start_time?new Date(e.start_time).getTime():null,a=e.end_time?new Date(e.end_time).getTime():null,l=i&&a&&n>=i&&n<a,r=i&&n<i,h=r&&i-n<=300*1e3;return l||(e.isLegacy?r:h)}).length>0?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:q.filter(e=>{const n=Date.now(),i=e.start_time?new Date(e.start_time).getTime():null,a=e.end_time?new Date(e.end_time).getTime():null,l=i&&a&&n>=i&&n<a,r=i&&n<i,h=r&&i-n<=300*1e3;return l||(e.isLegacy?r:h)}).map(e=>Te(e))}):t.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-slate-800 bg-slate-900/50 p-4 sm:p-6 text-center text-sm sm:text-base text-slate-400",children:"No quizzes scheduled yet."})})}):v?t.jsx("div",{className:"grid gap-3 sm:gap-4",children:Array.from({length:4}).map((e,n)=>t.jsx("div",{className:"h-24 sm:h-28 rounded-xl sm:rounded-2xl bg-slate-800/60 border border-slate-700/60 animate-pulse"},n))}):oe.length===0?t.jsx("div",{className:"text-center text-muted-foreground py-16",children:"No quizzes in this category yet."}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:oe.map((e,n)=>{var ie,S,$;const i=Date.now(),a=e.start_time?new Date(e.start_time).getTime():null,l=e.end_time?new Date(e.end_time).getTime():null,r=a&&l&&i>=a&&i<l,h=a&&i<a,j=r||h,z=h&&a?Math.max(0,Math.floor((a-i)/1e3)):r&&l?Math.max(0,Math.floor((l-i)/1e3)):null,b=Array.isArray(e.prizes)?e.prizes:[],Y=e.prize_type||"coins",Z=(ie=b[0])!=null?ie:0,ee=(S=b[1])!=null?S:0,te=($=b[2])!=null?$:0,E=P=>fe(Y,P,{fallback:0}).formatted,se=N[e.id]||0,V=d[e.id],B=!!V,T=a&&l?Math.max(1,l-a):null,J=r&&T?Math.min(100,Math.max(0,Math.round((i-a)/T*100))):null;return t.jsx(Qe.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:n*.02},onClick:()=>o(`/quiz/${e.id}`),className:"cursor-pointer",role:"button",tabIndex:0,onKeyDown:P=>{P.key==="Enter"&&o(`/quiz/${e.id}`)},children:t.jsx("div",{className:`p-[1px] rounded-xl sm:rounded-2xl ${r?"bg-gradient-to-r from-emerald-500/60 to-green-500/60":"bg-gradient-to-r from-indigo-500/40 via-violet-500/30 to-fuchsia-500/40"}`,children:t.jsxs("div",{className:"rounded-xl sm:rounded-2xl bg-slate-900/95 p-3 sm:p-4",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[t.jsx("h3",{className:"text-sm sm:text-base font-bold text-white flex-1 min-w-0 line-clamp-2",children:e.title}),t.jsxs("div",{className:"shrink-0 flex items-center gap-1",children:[r&&t.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold bg-rose-600 text-white",children:"LIVE"}),h&&t.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold bg-sky-600 text-white",children:"SOON"}),V&&t.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-semibold bg-indigo-600/20 text-indigo-300 border border-indigo-500/40",children:"Joined"})]})]}),t.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs mb-2",children:[t.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-amber-500/15 text-amber-300 border border-amber-600/30",children:["ðŸ¥‡ ",E(Z)]}),t.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-sky-500/15 text-sky-300 border border-sky-600/30",children:["ðŸ¥ˆ ",E(ee)]}),t.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-violet-500/15 text-violet-300 border border-violet-600/30",children:["ðŸ¥‰ ",E(te)]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-slate-400 mb-2",children:[t.jsx("span",{children:e.start_time?pe(e.start_time):"â€”"}),t.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded bg-slate-800/60 border border-slate-700/50",children:[e.start_time?U(e.start_time):"â€”"," - ",e.end_time?U(e.end_time):"â€”"]})]}),t.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-slate-500",children:[t.jsx(he,{className:"w-3 h-3 sm:w-4 sm:h-4"}),se," joined"]}),z!==null&&t.jsxs("div",{className:"text-xs sm:text-sm font-semibold text-indigo-300",children:[h?"In":"Ends"," ",Math.floor(z/60).toString().padStart(2,"0"),":",(z%60).toString().padStart(2,"0")]})]}),J!==null&&t.jsx("div",{className:"mb-2 w-full bg-slate-800 rounded-full h-1 sm:h-1.5 overflow-hidden",children:t.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${J}%`}})}),t.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),B||!j?o(`/quiz/${e.id}`):re(e)},onMouseEnter:()=>ge("/quiz"),disabled:y===e.id,className:`w-full h-9 sm:h-10 rounded-lg text-xs sm:text-sm font-bold text-white transition ${r?"bg-gradient-to-r from-emerald-600 to-green-500 hover:opacity-90":"bg-gradient-to-r from-indigo-600 to-violet-600 hover:opacity-90"} ${y===e.id?"opacity-80":""}`,children:B?"JOINED":j?y===e.id?"JOININGâ€¦":"JOIN":"VIEW"})]})})},e.id)})})]})]})};export{ot as default};
