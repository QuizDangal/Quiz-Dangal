import{l as le,R as Se,v as Qe,e as $e,u as Je,k as Oe,g as X,o as je,j as t,S as We,t as ve,f as W,p as we,c as _e}from"./index-DqcaIE3D.js";import{g as Ue,u as Ge,f as He,r as y}from"./router-D53U3OCX.js";import{m as Fe}from"./motion-lite-CITOPWQs.js";import{s as Ke}from"./smartJoinQuiz-IIFIptfR.js";import{h as Z,o as Ne,M as qe,B as Be,T as Re,c as Ve}from"./icons-DXR8YHNI.js";import"./supabase-BMIB7Fuo.js";import"./react-DQQtrPfG.js";function Ye(s){var g,p,_,u,j,q,N,I,c,z;if(!s)return null;const r=Number((_=(p=(g=s.participants_joined)!=null?g:s.joined_count)!=null?p:s.joined)!=null?_:0),m=Number((q=(j=(u=s.participants_pre)!=null?u:s.pre_joined_count)!=null?j:s.pre_joined)!=null?q:0),l=Number((N=s.participants_total)!=null?N:r+m),x=s.id||s.slot_id||s.quiz_slot_id||null,E=s.quiz_id||s.quizid||null;return{slotId:x,quizId:E,category:s.category||null,title:s.quiz_title||s.title||s.slot_title||null,start_time:s.start_time||s.slot_start||s.starts_at||null,end_time:s.end_time||s.slot_end||s.ends_at||null,status:s.status||"scheduled",prizes:Array.isArray(s.prizes)?s.prizes:Array.isArray(s.quiz_prizes)?s.quiz_prizes:[],questions:Array.isArray(s.questions)?s.questions:[],prize_type:s.prize_type||s.quiz_prize_type||"coins",participants_joined:r,participants_pre:m,participants_total:l,questions_count:Number((z=(c=(I=s.questions_count)!=null?I:s.question_count)!=null?c:s.q_count)!=null?z:0),auto_enabled:typeof s.auto_enabled=="boolean"?s.auto_enabled:void 0,stop_override:!!s.stop_override}}async function Xe(s,r){if(!s)return{slots:[],mode:"none",auto:!0};let m=[],l=[],x=!0;try{const{data:u,error:j}=await s.from("quiz_slots_view").select("*").eq("category",r).order("start_time",{ascending:!0});!j&&u&&(m=u.map(Ye))}catch(u){le.debug("quiz_slots_view error",u.message||u)}try{const{data:u,error:j}=await s.from("quizzes").select("id,title,start_time,end_time,status,prizes,prize_type,slot_id,questions(count)").eq("category",r).order("start_time",{ascending:!0});if(!j&&u){const q=Date.now(),N=(u||[]).filter(c=>!c.slot_id);let I={};if(N.length>0)try{const{data:c}=await s.rpc("get_engagement_counts_many",{p_quiz_ids:N.map(z=>z.id)});if(c)for(const z of c)I[z.quiz_id]=(z.pre_joined||0)+(z.joined||0)}catch(c){le.debug("get_engagement_counts_many RPC error (non-critical):",(c==null?void 0:c.message)||c)}l=N.map(c=>{var z,U;return{slotId:c.id,quizId:c.id,category:r,title:c.title,quiz_title:c.title,start_time:c.start_time,end_time:c.end_time,status:Ze(c,q),prizes:Array.isArray(c.prizes)?c.prizes:[],prize_type:c.prize_type||"coins",participants_joined:I[c.id]||0,participants_total:I[c.id]||0,questions_count:((U=(z=c.questions)==null?void 0:z[0])==null?void 0:U.count)||0,auto_enabled:!0,isLegacy:!0}})}}catch(u){le.debug("Legacy quizzes fetch error",u.message||u)}try{const{data:u,error:j}=await s.from("category_runtime_overrides").select("category,auto_enabled:is_auto").eq("category",r).maybeSingle();!j&&u&&(x=!!u.auto_enabled)}catch(u){}const E=new Set(m.map(u=>u.quizId).filter(Boolean)),g=l.filter(u=>!E.has(u.quizId)),p=[...m,...g];p.sort((u,j)=>{const q=u.start_time?new Date(u.start_time).getTime():0,N=j.start_time?new Date(j.start_time).getTime():0;return q-N});const _=m.length>0?"slots":g.length>0?"legacy":"none";return{slots:p,mode:_,auto:x}}function Ze(s,r){const m=s.start_time?new Date(s.start_time).getTime():null,l=s.end_time?new Date(s.end_time).getTime():null;return m&&l&&r>=m&&r<l?"active":m&&r<m?"scheduled":l&&r>=l?"finished":"scheduled"}function et(s){const r=Date.now(),m=s.find(g=>{const p=g!=null&&g.start_time?new Date(g.start_time).getTime():null,_=g!=null&&g.end_time?new Date(g.end_time).getTime():null;return p&&_&&r>=p&&r<_}),l=s.filter(g=>{const p=g!=null&&g.start_time?new Date(g.start_time).getTime():null;return p?r<p:!1});l.sort((g,p)=>new Date(g.start_time).getTime()-new Date(p.start_time).getTime());const x=l[0]||null,E=l[1]||null;return{live:m,next:x,queued:E}}const P=new Map,tt=500;let Te=0;function ee(s){if(P.size>=tt||Te%200===0||P.size>=100)for(const[r,m]of P.entries()){const l=(m.windowMs||Se)*2;s-m.firstTs>l&&P.delete(r)}}function st(s,{max:r=Qe,windowMs:m=Se}={}){Te+=1;const l=Date.now(),x=P.get(s);return x?l-x.firstTs>x.windowMs?(P.set(s,{count:1,firstTs:l,windowMs:m}),ee(l),{allowed:!0,remaining:r-1}):x.count>=r?(ee(l),{allowed:!1,remaining:0}):(x.count+=1,ee(l),{allowed:!0,remaining:r-x.count}):(P.set(s,{count:1,firstTs:l,windowMs:m}),ee(l),{allowed:!0,remaining:r-1})}function it(s=""){const r=String(s||"").toLowerCase();return r.includes("opinion")?{title:"Opinion Quizzes",emoji:"ðŸ’¬",Icon:qe,from:"from-indigo-600/30",to:"to-fuchsia-600/30",ring:"ring-fuchsia-500/30",description:"Share your views and see if the majority agrees with you! Opinion quizzes on Quiz Dangal challenge your perspective on trending topics, current affairs, and popular debates.",features:["Vote on trending topics and debates","See how your opinion matches the majority","Win prizes for popular opinions","New opinion polls every 10 minutes"],faqs:[{q:"How do opinion quizzes work?",a:"Answer questions based on your personal opinion. Points are awarded based on how your answers align with the majority response."},{q:"When are new opinion quizzes available?",a:"New opinion quizzes go live every 10 minutes, 24 hours a day. Each quiz lasts 5 minutes."},{q:"Can I win real prizes?",a:"Yes! Top performers in each quiz can win cash prizes and coins that can be redeemed."}]}:r.includes("gk")?{title:"GK Quizzes",emoji:"ðŸ§ ",Icon:Be,from:"from-emerald-600/30",to:"to-teal-600/30",ring:"ring-emerald-500/30",description:"Test your General Knowledge with Quiz Dangal! From history to science, geography to current affairs - challenge yourself with diverse GK questions and compete for prizes.",features:["Questions from history, science, geography & more","Competitive leaderboards with real prizes","Learn while you play and earn","Fresh GK questions every 10 minutes"],faqs:[{q:"What topics are covered in GK quizzes?",a:"Our GK quizzes cover a wide range of topics including history, geography, science, sports, politics, arts, and current affairs."},{q:"How often are new GK quizzes added?",a:"New GK quizzes are scheduled every 10 minutes throughout the day. Each quiz runs for 5 minutes."},{q:"Are GK quiz answers verified?",a:"Yes, all GK questions and answers are carefully verified for accuracy before being added to our platform."}]}:r.includes("sport")?{title:"Sports Quizzes",emoji:"ðŸ†",Icon:Re,from:"from-orange-600/30",to:"to-red-600/30",ring:"ring-orange-500/30",description:"Are you a true sports fan? Test your knowledge of Cricket, Football, Olympics, and more! Quiz Dangal sports quizzes cover everything from legendary matches to current tournaments.",features:["Cricket, Football, Olympics & more","Questions on legends and current stars","Live sports trivia during matches","Win prizes with your sports knowledge"],faqs:[{q:"Which sports are covered?",a:"We cover all major sports including Cricket, Football, Tennis, Badminton, Hockey, Olympics, Wrestling, and more."},{q:"Are there quizzes during live matches?",a:"Yes! We often run special quizzes during major sporting events and tournaments with extra prizes."},{q:"How can I improve my sports knowledge?",a:"Play our quizzes regularly! Each question comes with the correct answer, helping you learn while you compete."}]}:r.includes("movie")?{title:"Movie Quizzes",emoji:"ðŸŽ¬",Icon:Ve,from:"from-violet-600/30",to:"to-indigo-600/30",ring:"ring-violet-500/30",description:"Bollywood, Hollywood, regional cinema - how well do you know your movies? Quiz Dangal movie quizzes test your knowledge of actors, directors, dialogues, and iconic scenes.",features:["Bollywood, Hollywood & regional films","Questions on actors, directors & dialogues","Guess the movie from scenes or songs","Special quizzes on new releases"],faqs:[{q:"What kind of movie questions are asked?",a:"Questions range from identifying actors, famous dialogues, movie plots, songs, directors, awards, and box office facts."},{q:"Are regional movies covered?",a:"Yes! We include questions from South Indian, Bengali, Marathi, and other regional film industries."},{q:"How do I join a movie quiz?",a:"Simply click on any upcoming or live quiz on this page and press the JOIN button. The quiz will start at the scheduled time."}]}:{title:`${s} Quizzes`,emoji:"â­",Icon:qe,from:"from-sky-600/30",to:"to-indigo-600/30",ring:"ring-sky-500/30",description:"Challenge yourself with exciting quizzes on Quiz Dangal! Compete with players across India and win real prizes.",features:["New quizzes every 10 minutes","Win cash prizes and coins","Compete on leaderboards","Play anytime, anywhere"],faqs:[{q:"How do I join a quiz?",a:"Click on any upcoming quiz and press JOIN. The quiz will start at the scheduled time."},{q:"How long is each quiz?",a:"Each quiz lasts 5 minutes with a 5 minute break between quizzes."},{q:"Is it free to play?",a:"Yes! You can join and play quizzes for free. Some premium quizzes may have entry fees with bigger prizes."}]}}const D=s=>s!=null&&s.start_time?new Date(s.start_time).getTime():null,de=s=>s!=null&&s.end_time?new Date(s.end_time).getTime():null,Ie=s=>{const r=D(s),m=de(s);if(!r||!m)return!1;const l=Date.now();return l>=r&&l<m},nt=s=>{const r=D(s);return r?Date.now()<r:!1},at=300*1e3,xt=()=>{const{slug:s}=Ue(),r=Ge(),m=He(),{toast:l}=$e(),{user:x}=Je(),{isSubscribed:E,subscribeToPush:g}=Oe(),[p]=y.useState([]),[_,u]=y.useState(!0),[j,q]=y.useState(null),[N,I]=y.useState({}),[c,z]=y.useState({}),[U,ce]=y.useState(0),[S,ue]=y.useState([]),[C,G]=y.useState("legacy"),[De,me]=y.useState(!0),[rt,te]=y.useState(null),ke=2e4,H=y.useCallback(async()=>{try{const e=await X();if(!e){ue([]),me(!0),G("legacy"),te("Supabase is not configured.");return}const{slots:n,mode:a,auto:i}=await Xe(e,s);ue(n),me(i),te(null),G(a==="slots"||a==="legacy"?"slots":"legacy")}catch(e){te(je(e)||(e==null?void 0:e.message)||"Could not load category quizzes."),G("legacy")}},[s]);y.useEffect(()=>{u(!0),H().finally(()=>{u(!1)})},[H]),y.useEffect(()=>{if(C==="none")return;const e=setInterval(()=>{H()},ke);return()=>clearInterval(e)},[C,H]),y.useEffect(()=>{const e=Date.now();if(!(p||[]).some(i=>{const o=i.start_time?new Date(i.start_time).getTime():0,d=i.end_time?new Date(i.end_time).getTime():0;return o&&e<o||o&&d&&e>=o&&e<d}))return;const a=setInterval(()=>ce(i=>(i+1)%1e6),1e3);return()=>clearInterval(a)},[p]),y.useEffect(()=>{if(C!=="slots")return;const e=Date.now();if(!(S||[]).some(i=>{const o=i.start_time?new Date(i.start_time).getTime():0,d=i.end_time?new Date(i.end_time).getTime():0;return o&&e<o||o&&d&&e>=o&&e<d}))return;const a=setInterval(()=>ce(i=>(i+1)%1e6),1e3);return()=>clearInterval(a)},[S,C]),y.useEffect(()=>{const e=async()=>{try{const n=await X();if(!n)return;const a=(p||[]).map(f=>f.id);if(!a.length){I({});return}const{data:i,error:o}=await n.rpc("get_engagement_counts_many",{p_quiz_ids:a});if(o)throw o;const d={};for(const f of i||[]){const v=f.pre_joined||0,w=f.joined||0;d[f.quiz_id]=v+w}I(d)}catch(n){}};p&&p.length&&e()},[p]),y.useEffect(()=>{(async()=>{const n=d=>!d||typeof d!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d),a=(p||[]).map(d=>d.id).filter(n),i=(S||[]).map(d=>d.quizId||d.quiz_id||d.id).filter(n),o=[...new Set([...a,...i])];if(!x||!o.length){z({});return}try{const d=await X();if(!d){z({});return}const f={},{data:v,error:w}=await d.from("quiz_participants").select("quiz_id,status").eq("user_id",x.id).in("quiz_id",o);if(!w&&v)for(const b of v)b.quiz_id&&(f[b.quiz_id]=b.status==="pre_joined"?"pre":"joined");for(const b of S||[]){const A=b.quizId||b.quiz_id||b.id;A&&f[A]&&b.slotId&&(f[b.slotId]=f[A])}z(f)}catch(d){z({})}})()},[x,p,S]);const pe=async e=>{if(!x){l({title:"Login required",description:"Please sign in to join the quiz.",variant:"destructive"}),r("/login");return}const n=await X();if(!n){l({title:"Setup required",description:"Supabase is not configured for this app.",variant:"destructive"});return}const a=e.slotId||e.id;try{const i=String((e==null?void 0:e.status)||"").trim().toLowerCase();if(i==="paused"||i==="stopped"||i==="skipped"||e!=null&&e.stop_override){l({title:"Paused",description:"This category is paused right now. Please try later.",variant:"destructive"});return}}catch(i){}q(a);try{typeof Notification!="undefined"&&Notification.permission!=="granted"&&!E&&Promise.resolve().then(()=>g()).catch(()=>{})}catch(i){}try{const i=await Ke({supabase:n,quiz:e,user:x});if(i.status==="error")throw i.error;i.status==="already"?(z(o=>({...o,[a]:"joined"})),l({title:"Already Joined",description:"You are in this quiz."})):i.status==="joined"?(z(d=>({...d,[a]:"joined"})),st(`join_${(x==null?void 0:x.id)||"anon"}`,{max:4,windowMs:8e3}).allowed?(l({title:"Joined!",description:"Taking you to the quiz."}),r(e.slotId&&!e.isLegacy?`/quiz/slot/${e.slotId}`:`/quiz/${e.id}`)):l({title:"Slow down",description:"Please wait a moment before trying again.",variant:"destructive"})):i.status==="pre_joined"?(z(o=>({...o,[a]:"pre"})),l({title:"Pre-joined!",description:"We will remind you before start."})):i.status==="scheduled_retry"&&(z(o=>({...o,[a]:"pre"})),l({title:"Pre-joined!",description:"Auto joining at start time."}))}catch(i){const o=je(i);l({title:"Error",description:o||(i==null?void 0:i.message)||"Could not join quiz.",variant:"destructive"})}finally{q(null)}},xe=p.filter(e=>{if(C==="slots")return!1;const n=Date.now(),a=e.start_time?new Date(e.start_time).getTime():0,i=e.end_time?new Date(e.end_time).getTime():0,o=a&&i&&n>=a&&n<i,d=a&&n<a;return o||d}),h=it(s),L=Date.now(),F=C==="slots",K=F?S:p||[],Ee=(S||[]).filter(e=>{const n=D(e),a=de(e),i=L;return n&&a&&i>=n&&i<a||String((e==null?void 0:e.status)||"").toLowerCase()==="active"}),Q=(S||[]).filter(n=>{const a=D(n);return a?a>L:!1}).sort((n,a)=>(D(n)||0)-(D(a)||0))[0]||null,ge=(()=>{const e=Q?D(Q):null;if(!e)return!1;const n=e-L;return n>0&&n<=at})(),B=[...Ee];Q&&ge&&(B.some(n=>(n==null?void 0:n.slotId)&&n.slotId===Q.slotId)||B.push(Q));const Ce=F?K.filter(e=>Ie(e)).length:K.reduce((e,n)=>{const a=n.start_time?new Date(n.start_time).getTime():0,i=n.end_time?new Date(n.end_time).getTime():0;return e+(a&&i&&L>=a&&L<i?1:0)},0),Le=F&&Q&&ge?1:0,se=F?K.map(e=>D(e)).filter(e=>e&&e>L).sort((e,n)=>e-n)[0]||null:K.map(e=>e.start_time?new Date(e.start_time).getTime():null).filter(e=>e&&e>L).sort((e,n)=>e-n)[0]||null,{next:R}=et(S),Ae=e=>{var ze,ye,be;if(!e)return null;const n=Date.now(),a=D(e),i=de(e),o=Ie(e),d=e.status==="paused",f=e.status==="finished"||i&&n>=i,v=nt(e),w=v&&a?Math.max(0,Math.floor((a-n)/1e3)):o&&i?Math.max(0,Math.floor((i-n)/1e3)):null,b=Array.isArray(e.prizes)?e.prizes:[],A=e.prize_type||"coins",ie=(ze=b[0])!=null?ze:0,ne=(ye=b[1])!=null?ye:0,ae=(be=b[2])!=null?be:0,M=Pe=>_e(A,Pe,{fallback:0}).formatted,re=e.participants_total||e.participants_joined||0,V=e.questions_count||10,Y=!De&&!o&&!v,k=o&&!f?"LIVE":d?"PAUSED":Y?"STOPPED":v?"UPCOMING":f?"FINISHED":(e.status||"").toUpperCase(),O=e.isLegacy?e.quizId:e.slotId,T=!!c[O],$=j===O,fe=f?"Results":o?T?"Play":"Join Now":v?T?"Joined âœ“":"Pre-Join":"View",Me=async()=>{if(f){r(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}if(!x){l({title:"Login Required",description:"Please login to join the quiz.",variant:"destructive"}),r("/login",{state:{from:m.pathname,message:"Login to join the quiz"}});return}if(T&&!o){r(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}if(o){r(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}v&&!T&&await pe({id:e.quizId,...e})};return t.jsx("div",{className:"quiz-slot-card",children:t.jsxs("div",{className:`quiz-slot-card-inner ${o?"quiz-slot-card-live":""}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("span",{className:"quiz-slot-lang",children:"ðŸŒ Hindi / English"}),t.jsxs("span",{className:`quiz-slot-badge ${k==="LIVE"?"quiz-slot-badge-live":k==="UPCOMING"?"quiz-slot-badge-upcoming":k==="PAUSED"?"quiz-slot-badge-paused":"quiz-slot-badge-default"}`,children:[k==="LIVE"&&t.jsx("span",{className:"quiz-slot-badge-dot"}),k]})]}),t.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:e.quiz_title||e.title||"Quiz"}),t.jsxs("div",{className:"quiz-slot-time-section",children:[t.jsxs("div",{className:"quiz-slot-time-row",children:[t.jsxs("div",{className:"quiz-slot-time-box",children:[t.jsx("span",{className:"quiz-slot-time-label",children:"START"}),t.jsx("span",{className:"quiz-slot-time-value",children:e.start_time?W(e.start_time):"â€”"})]}),t.jsx("div",{className:"quiz-slot-time-divider",children:"â†’"}),t.jsxs("div",{className:"quiz-slot-time-box",children:[t.jsx("span",{className:"quiz-slot-time-label",children:"END"}),t.jsx("span",{className:"quiz-slot-time-value",children:e.end_time?W(e.end_time):"â€”"})]})]}),w!==null&&t.jsxs("div",{className:`quiz-slot-timer ${o?"quiz-slot-timer-live":""}`,children:[t.jsx(Z,{className:"w-3.5 h-3.5"}),t.jsx("span",{children:v?"Starts in":"Ends in"}),t.jsxs("span",{className:"quiz-slot-timer-value",children:[Math.floor(w/60).toString().padStart(2,"0"),":",(w%60).toString().padStart(2,"0")]})]})]}),t.jsxs("div",{className:"quiz-slot-prize-section",children:[t.jsx("div",{className:"quiz-slot-prize-title",children:"ðŸ† Prizes"}),t.jsxs("div",{className:"quiz-slot-prize-row",children:[t.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-gold",children:[t.jsx("span",{className:"quiz-slot-prize-rank",children:"1st"}),t.jsx("span",{className:"quiz-slot-prize-value",children:M(ie)})]}),t.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-silver",children:[t.jsx("span",{className:"quiz-slot-prize-rank",children:"2nd"}),t.jsx("span",{className:"quiz-slot-prize-value",children:M(ne)})]}),t.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-bronze",children:[t.jsx("span",{className:"quiz-slot-prize-rank",children:"3rd"}),t.jsx("span",{className:"quiz-slot-prize-value",children:M(ae)})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsxs("span",{className:"quiz-slot-stat",children:["ðŸ“ ",V," Questions"]}),t.jsxs("span",{className:"quiz-slot-stat",children:[t.jsx(Ne,{className:"w-3 h-3"})," ",re," Joined"]})]}),t.jsx("button",{type:"button",disabled:$||T&&v,onClick:Me,onMouseEnter:()=>we(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`),className:`quiz-slot-btn ${$?"opacity-50 cursor-wait":T&&v?"quiz-slot-btn-joined":o?"quiz-slot-btn-live":"quiz-slot-btn-default"}`,children:$?"Joining...":fe})]})},e.slotId)};y.useEffect(()=>{if(!R)return;const e=R.start_time?new Date(R.start_time).getTime():null;if(!e)return;const n=Date.now(),a=e-n-6e4;if(a<=0||a>1800*1e3)return;const i=setTimeout(()=>{try{l({title:"Upcoming Slot",description:"1 minute to start â€“ be ready!",duration:4e3})}catch(o){}},a);return()=>clearTimeout(i)},[R,l]);const he=typeof window!="undefined"?`${window.location.origin}/category/${s}/`:`https://quizdangal.com/category/${s}/`;return t.jsxs("div",{className:"px-3 sm:px-4 pt-14 sm:pt-16 pb-6",children:[t.jsx(We,{title:`${h.title} â€“ Quiz Dangal`,description:`Active and upcoming quizzes in ${h.title}. Play daily ${h.title.toLowerCase()} on Quiz Dangal and earn coins.`,canonical:he,robots:"index, follow",alternateLocales:["hi_IN","en_US"],author:"Quiz Dangal",datePublished:"2025-01-01",dateModified:"2026-01-15",jsonLd:[{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://quizdangal.com/"},{"@type":"ListItem",position:2,name:h.title,item:he}]}]}),t.jsx("span",{className:"hidden","aria-hidden":!0,children:U}),t.jsxs("div",{className:"max-w-md sm:max-w-2xl lg:max-w-4xl mx-auto space-y-4",children:[t.jsx("div",{className:"p-[1px] rounded-xl sm:rounded-2xl bg-gradient-to-r from-indigo-500/50 via-violet-500/40 to-fuchsia-500/50",children:t.jsxs("div",{className:"rounded-xl sm:rounded-2xl bg-slate-900/95 p-3 sm:p-4 lg:p-5",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-2",children:[t.jsx("div",{className:"w-9 h-9 sm:w-12 sm:h-12 lg:w-14 lg:h-14 rounded-lg sm:rounded-xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center text-lg sm:text-2xl lg:text-3xl",children:h.emoji}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h1",{className:"text-base sm:text-xl lg:text-2xl font-bold text-white truncate",children:h.title}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-[10px] sm:text-xs mt-1",children:[t.jsxs("span",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded sm:rounded-md bg-emerald-600/20 text-emerald-300 border border-emerald-600/30",children:[Ce," live"]}),t.jsxs("span",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded sm:rounded-md bg-sky-600/20 text-sky-300 border border-sky-600/30",children:[Le," upcoming"]})]})]})]}),se&&t.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-slate-400",children:[t.jsx(Z,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Next: ",ve(se)," â€¢ ",W(se)]})]})}),!1,C==="slots"?t.jsx(t.Fragment,{children:_?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:Array.from({length:3}).map((e,n)=>t.jsx("div",{className:"h-40 sm:h-48 lg:h-52 rounded-xl sm:rounded-2xl bg-slate-800/60 border border-slate-700/60 animate-pulse"},n))}):t.jsx(t.Fragment,{children:B.length>0?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:B.map(e=>Ae(e))}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-indigo-500/30 bg-gradient-to-r from-indigo-900/40 to-violet-900/40 p-4 sm:p-6 text-center",children:[t.jsx(Z,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-3 text-indigo-400"}),t.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white mb-2",children:"Next Quiz Starting Soon!"}),t.jsxs("p",{className:"text-sm sm:text-base text-slate-300 mb-3",children:["Quizzes run every 10 minutes. The next ",h.title.replace(" Quizzes","")," quiz will start shortly."]}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-400",children:"Refresh this page or wait for the countdown to appear."})]}),h.description&&t.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-700/50 bg-slate-900/50 p-4 sm:p-6",children:[t.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-white mb-3",children:["About ",h.title]}),t.jsx("p",{className:"text-sm sm:text-base text-slate-300 leading-relaxed",children:h.description})]}),h.features&&h.features.length>0&&t.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-700/50 bg-slate-900/50 p-4 sm:p-6",children:[t.jsxs("h2",{className:"text-base sm:text-lg font-semibold text-white mb-4",children:["Why Play ",h.title,"?"]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.features.map((e,n)=>t.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-slate-800/50",children:[t.jsx("span",{className:"text-emerald-400 mt-0.5",children:"âœ“"}),t.jsx("span",{className:"text-sm text-slate-300",children:e})]},n))})]}),h.faqs&&h.faqs.length>0&&t.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-700/50 bg-slate-900/50 p-4 sm:p-6",children:[t.jsx("h2",{className:"text-base sm:text-lg font-semibold text-white mb-4",children:"Frequently Asked Questions"}),t.jsx("div",{className:"space-y-4",children:h.faqs.map((e,n)=>t.jsxs("div",{className:"border-b border-slate-700/50 pb-4 last:border-0 last:pb-0",children:[t.jsx("h3",{className:"text-sm sm:text-base font-medium text-white mb-2",children:e.q}),t.jsx("p",{className:"text-sm text-slate-400",children:e.a})]},n))})]}),t.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-slate-700/50 bg-slate-900/50 p-4 sm:p-6",children:[t.jsx("h2",{className:"text-base sm:text-lg font-semibold text-white mb-4",children:"How Quiz Dangal Works"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-4 rounded-lg bg-slate-800/50",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-3 rounded-full bg-indigo-600/30 flex items-center justify-center text-xl",children:"1"}),t.jsx("h3",{className:"font-medium text-white mb-1",children:"Join a Quiz"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Click JOIN when a quiz is live or upcoming"})]}),t.jsxs("div",{className:"text-center p-4 rounded-lg bg-slate-800/50",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-3 rounded-full bg-violet-600/30 flex items-center justify-center text-xl",children:"2"}),t.jsx("h3",{className:"font-medium text-white mb-1",children:"Answer Questions"}),t.jsx("p",{className:"text-xs text-slate-400",children:"You have 5 minutes to answer all questions"})]}),t.jsxs("div",{className:"text-center p-4 rounded-lg bg-slate-800/50",children:[t.jsx("div",{className:"w-10 h-10 mx-auto mb-3 rounded-full bg-emerald-600/30 flex items-center justify-center text-xl",children:"3"}),t.jsx("h3",{className:"font-medium text-white mb-1",children:"Win Prizes"}),t.jsx("p",{className:"text-xs text-slate-400",children:"Top 3 players win cash prizes & coins"})]})]})]}),t.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-amber-500/20 bg-amber-900/10 p-4 sm:p-5",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-amber-200 mb-1",children:"Quiz Schedule"}),t.jsxs("p",{className:"text-sm text-slate-300",children:[h.title," run every 10 minutes, 24 hours a day. Each quiz is 5 minutes long with a 5 minute break between quizzes. Check back regularly for the next live quiz!"]})]})]})})]})})}):_?t.jsx("div",{className:"grid gap-3 sm:gap-4",children:Array.from({length:4}).map((e,n)=>t.jsx("div",{className:"h-24 sm:h-28 rounded-xl sm:rounded-2xl bg-slate-800/60 border border-slate-700/60 animate-pulse"},n))}):xe.length===0?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-indigo-500/30 bg-gradient-to-r from-indigo-900/40 to-violet-900/40 p-4 sm:p-6 text-center",children:[t.jsx(Z,{className:"w-8 h-8 sm:w-10 sm:h-10 mx-auto mb-3 text-indigo-400"}),t.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white mb-2",children:"Quizzes Coming Soon!"}),t.jsx("p",{className:"text-sm sm:text-base text-slate-300",children:h.description||`New ${h.title} are added regularly. Check back soon!`})]}),h.features&&t.jsxs("div",{className:"rounded-xl border border-slate-700/50 bg-slate-900/50 p-4 sm:p-6",children:[t.jsx("h2",{className:"text-base font-semibold text-white mb-3",children:"What to Expect"}),t.jsx("ul",{className:"space-y-2",children:h.features.map((e,n)=>t.jsxs("li",{className:"flex items-center gap-2 text-sm text-slate-300",children:[t.jsx("span",{className:"text-emerald-400",children:"âœ“"})," ",e]},n))})]})]}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:xe.map((e,n)=>{var oe,T,$;const a=Date.now(),i=e.start_time?new Date(e.start_time).getTime():null,o=e.end_time?new Date(e.end_time).getTime():null,d=i&&o&&a>=i&&a<o,f=i&&a<i,v=d||f,w=f&&i?Math.max(0,Math.floor((i-a)/1e3)):d&&o?Math.max(0,Math.floor((o-a)/1e3)):null,b=Array.isArray(e.prizes)?e.prizes:[],A=e.prize_type||"coins",ie=(oe=b[0])!=null?oe:0,ne=(T=b[1])!=null?T:0,ae=($=b[2])!=null?$:0,M=J=>_e(A,J,{fallback:0}).formatted,re=N[e.id]||0,V=c[e.id],Y=!!V,k=i&&o?Math.max(1,o-i):null,O=d&&k?Math.min(100,Math.max(0,Math.round((a-i)/k*100))):null;return t.jsx(Fe.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:n*.02},onClick:()=>r(`/quiz/${e.id}`),className:"cursor-pointer",role:"button",tabIndex:0,onKeyDown:J=>{J.key==="Enter"&&r(`/quiz/${e.id}`)},children:t.jsx("div",{className:`p-[1px] rounded-xl sm:rounded-2xl ${d?"bg-gradient-to-r from-emerald-500/60 to-green-500/60":"bg-gradient-to-r from-indigo-500/40 via-violet-500/30 to-fuchsia-500/40"}`,children:t.jsxs("div",{className:"rounded-xl sm:rounded-2xl bg-slate-900/95 p-3 sm:p-4",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[t.jsx("h3",{className:"text-sm sm:text-base font-bold text-white flex-1 min-w-0 line-clamp-2",children:e.title}),t.jsxs("div",{className:"shrink-0 flex items-center gap-1",children:[d&&t.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold bg-rose-600 text-white",children:"LIVE"}),f&&t.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold bg-sky-600 text-white",children:"SOON"}),V&&t.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-semibold bg-indigo-600/20 text-indigo-300 border border-indigo-500/40",children:"Joined"})]})]}),t.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs mb-2",children:[t.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-amber-500/15 text-amber-300 border border-amber-600/30",children:["ðŸ¥‡ ",M(ie)]}),t.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-sky-500/15 text-sky-300 border border-sky-600/30",children:["ðŸ¥ˆ ",M(ne)]}),t.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-violet-500/15 text-violet-300 border border-violet-600/30",children:["ðŸ¥‰ ",M(ae)]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-slate-400 mb-2",children:[t.jsx("span",{children:e.start_time?ve(e.start_time):"â€”"}),t.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded bg-slate-800/60 border border-slate-700/50",children:[e.start_time?W(e.start_time):"â€”"," - ",e.end_time?W(e.end_time):"â€”"]})]}),t.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-slate-500",children:[t.jsx(Ne,{className:"w-3 h-3 sm:w-4 sm:h-4"}),re," joined"]}),w!==null&&t.jsxs("div",{className:"text-xs sm:text-sm font-semibold text-indigo-300",children:[f?"In":"Ends"," ",Math.floor(w/60).toString().padStart(2,"0"),":",(w%60).toString().padStart(2,"0")]})]}),O!==null&&t.jsx("div",{className:"mb-2 w-full bg-slate-800 rounded-full h-1 sm:h-1.5 overflow-hidden",children:t.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${O}%`}})}),t.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),Y||!v?r(`/quiz/${e.id}`):pe(e)},onMouseEnter:()=>we("/quiz"),disabled:j===e.id,className:`w-full h-9 sm:h-10 rounded-lg text-xs sm:text-sm font-bold text-white transition ${d?"bg-gradient-to-r from-emerald-600 to-green-500 hover:opacity-90":"bg-gradient-to-r from-indigo-600 to-violet-600 hover:opacity-90"} ${j===e.id?"opacity-80":""}`,children:Y?"JOINED":v?j===e.id?"JOININGâ€¦":"JOIN":"VIEW"})]})})},e.id)})})]})]})};export{xt as default};
