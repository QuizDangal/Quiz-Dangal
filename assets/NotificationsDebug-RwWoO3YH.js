import{k as g,j as s,S as b,B as d}from"./index-Beuxb_yr.js";import{R as l}from"./router-CWIfZQRv.js";import"./supabase-cQshKuiM.js";import"./react-MKCYUrdX.js";import"./icons-BNA5wz6Z.js";function k(){const{isSubscribed:p,subscribeToPush:h,unsubscribeFromPush:u,error:t}=g(),[e,x]=l.useState({permission:"unknown",swReady:!1,swScope:"",endpoint:"",hasVapid:!1});return l.useEffect(()=>{(async()=>{try{const n=typeof Notification!="undefined"?Notification.permission:"unsupported";let o=!1,r="",c="";if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.ready;o=!!i,r=(i==null?void 0:i.scope)||"";const a=await i.pushManager.getSubscription();c=a!=null&&a.endpoint?String(a.endpoint):""}catch(i){console.debug("SW readiness/subscription check failed:",i)}const f=typeof window!="undefined"&&window.__QUIZ_DANGAL_ENV__?window.__QUIZ_DANGAL_ENV__:{},m="BIgxtFLL3qtXiGpk76YMsPDgcwrxUQV3L5LaIhV2c4IqdEToSlwEHN2eFMTKXsC8CVexXiyjsjh4a5vwarOdO9E".trim();x({permission:n,swReady:o,swScope:r,endpoint:c,hasVapid:m.length>0})}catch(n){console.debug("Notification diagnostics failed:",n)}})()},[]),s.jsxs("div",{className:"container mx-auto p-6 max-w-xl bg-white text-gray-900 rounded-2xl shadow-sm",children:[s.jsx(b,{title:"Notifications Debug – Quiz Dangal",description:"Push notification diagnostics and troubleshooting for Quiz Dangal.",canonical:"https://quizdangal.com/debug/notifications/",robots:"noindex, nofollow",author:"Quiz Dangal"}),s.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Notifications Diagnostics"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Yahan aap push setup ka quick status dekh sakte hain."}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Permission:"})," ",e.permission]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Service Worker Ready:"})," ",e.swReady?"Yes":"No"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"SW Scope:"})," ",s.jsx("span",{className:"break-all",children:e.swScope||"—"})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Subscribed:"})," ",p?"Yes":"No"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Endpoint:"})," ",s.jsx("span",{className:"break-all",children:e.endpoint||"—"})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"VAPID Public Key present:"})," ",e.hasVapid?"Yes":"No"]}),t&&s.jsxs("div",{className:"text-red-600",children:["Error: ",t]})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx(d,{onClick:h,"aria-label":"Subscribe to push notifications",children:"Subscribe"}),s.jsx(d,{variant:"outline",onClick:u,"aria-label":"Unsubscribe from push notifications",children:"Unsubscribe"})]}),s.jsx("div",{className:"text-xs text-gray-500 mt-4",children:"Dev tip: Agar local pe SW register nahi ho raha, URL me ?sw=1 add karke page ek baar open karein."})]})}export{k as default};
