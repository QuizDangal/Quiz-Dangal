import{l as nt,R as yt,v as Lt,e as Mt,u as At,k as kt,j as e,S as $t,t as pt,f as U,p as gt,s as Q,c as ft,o as Pt}from"./index-CqPwvxGw.js";import{g as Ct,u as Jt,f as Ut,r as z}from"./router-CWIfZQRv.js";import{m as Qt}from"./motion-lite-CguNR5TK.js";import{s as Ot}from"./smartJoinQuiz-D858ITGg.js";import{j as xt,p as ht,M as zt,B as Rt,T as Ft,d as Vt}from"./icons-BNA5wz6Z.js";import"./supabase-cQshKuiM.js";import"./react-MKCYUrdX.js";function Bt(s){var f,p,v,u,_,w,N,I,d,x;if(!s)return null;const r=Number((v=(p=(f=s.participants_joined)!=null?f:s.joined_count)!=null?p:s.joined)!=null?v:0),m=Number((w=(_=(u=s.participants_pre)!=null?u:s.pre_joined_count)!=null?_:s.pre_joined)!=null?w:0),c=Number((N=s.participants_total)!=null?N:r+m),g=s.id||s.slot_id||s.quiz_slot_id||null,D=s.quiz_id||s.quizid||null;return{slotId:g,quizId:D,category:s.category||null,title:s.quiz_title||s.title||s.slot_title||null,start_time:s.start_time||s.slot_start||s.starts_at||null,end_time:s.end_time||s.slot_end||s.ends_at||null,status:s.status||"scheduled",prizes:Array.isArray(s.prizes)?s.prizes:Array.isArray(s.quiz_prizes)?s.quiz_prizes:[],questions:Array.isArray(s.questions)?s.questions:[],prize_type:s.prize_type||s.quiz_prize_type||"coins",participants_joined:r,participants_pre:m,participants_total:c,questions_count:Number((x=(d=(I=s.questions_count)!=null?I:s.question_count)!=null?d:s.q_count)!=null?x:0),auto_enabled:typeof s.auto_enabled=="boolean"?s.auto_enabled:void 0,stop_override:!!s.stop_override}}async function Wt(s,r){if(!s)return{slots:[],mode:"none",auto:!0};let m=[],c=[],g=!0;try{const{data:u,error:_}=await s.from("quiz_slots_view").select("*").eq("category",r).order("start_time",{ascending:!0});!_&&u&&(m=u.map(Bt))}catch(u){nt.debug("quiz_slots_view error",u.message||u)}try{const{data:u,error:_}=await s.from("quizzes").select("id,title,start_time,end_time,status,prizes,prize_type,slot_id,questions(count)").eq("category",r).order("start_time",{ascending:!0});if(!_&&u){const w=Date.now(),N=(u||[]).filter(d=>!d.slot_id);let I={};if(N.length>0)try{const{data:d}=await s.rpc("get_engagement_counts_many",{p_quiz_ids:N.map(x=>x.id)});if(d)for(const x of d)I[x.quiz_id]=(x.pre_joined||0)+(x.joined||0)}catch(d){nt.debug("get_engagement_counts_many RPC error (non-critical):",(d==null?void 0:d.message)||d)}c=N.map(d=>{var x,O;return{slotId:d.id,quizId:d.id,category:r,title:d.title,quiz_title:d.title,start_time:d.start_time,end_time:d.end_time,status:Ht(d,w),prizes:Array.isArray(d.prizes)?d.prizes:[],prize_type:d.prize_type||"coins",participants_joined:I[d.id]||0,participants_total:I[d.id]||0,questions_count:((O=(x=d.questions)==null?void 0:x[0])==null?void 0:O.count)||0,auto_enabled:!0,isLegacy:!0}})}}catch(u){nt.debug("Legacy quizzes fetch error",u.message||u)}try{const{data:u,error:_}=await s.from("category_runtime_overrides").select("category,auto_enabled:is_auto").eq("category",r).maybeSingle();!_&&u&&(g=!!u.auto_enabled)}catch(u){}const D=new Set(m.map(u=>u.quizId).filter(Boolean)),f=c.filter(u=>!D.has(u.quizId)),p=[...m,...f];p.sort((u,_)=>{const w=u.start_time?new Date(u.start_time).getTime():0,N=_.start_time?new Date(_.start_time).getTime():0;return w-N});const v=m.length>0?"slots":f.length>0?"legacy":"none";return{slots:p,mode:v,auto:g}}function Ht(s,r){const m=s.start_time?new Date(s.start_time).getTime():null,c=s.end_time?new Date(s.end_time).getTime():null;return m&&c&&r>=m&&r<c?"active":m&&r<m?"scheduled":c&&r>=c?"finished":"scheduled"}function Gt(s){const r=Date.now(),m=s.find(f=>{const p=f!=null&&f.start_time?new Date(f.start_time).getTime():null,v=f!=null&&f.end_time?new Date(f.end_time).getTime():null;return p&&v&&r>=p&&r<v}),c=s.filter(f=>{const p=f!=null&&f.start_time?new Date(f.start_time).getTime():null;return p?r<p:!1});c.sort((f,p)=>new Date(f.start_time).getTime()-new Date(p.start_time).getTime());const g=c[0]||null,D=c[1]||null;return{live:m,next:g,queued:D}}const M=new Map,Kt=500;let jt=0;function W(s){if(M.size>=Kt||jt%200===0||M.size>=100)for(const[r,m]of M.entries()){const c=(m.windowMs||yt)*2;s-m.firstTs>c&&M.delete(r)}}function Xt(s,{max:r=Lt,windowMs:m=yt}={}){jt+=1;const c=Date.now(),g=M.get(s);return g?c-g.firstTs>g.windowMs?(M.set(s,{count:1,firstTs:c,windowMs:m}),W(c),{allowed:!0,remaining:r-1}):g.count>=r?(W(c),{allowed:!1,remaining:0}):(g.count+=1,W(c),{allowed:!0,remaining:r-g.count}):(M.set(s,{count:1,firstTs:c,windowMs:m}),W(c),{allowed:!0,remaining:r-1})}function Yt(s=""){const r=String(s||"").toLowerCase();return r.includes("opinion")?{title:"Opinion Quizzes",emoji:"ðŸ’¬",Icon:zt,from:"from-indigo-600/30",to:"to-fuchsia-600/30",ring:"ring-fuchsia-500/30"}:r.includes("gk")?{title:"GK Quizzes",emoji:"ðŸ§ ",Icon:Rt,from:"from-emerald-600/30",to:"to-teal-600/30",ring:"ring-emerald-500/30"}:r.includes("sport")?{title:"Sports Quizzes",emoji:"ðŸ†",Icon:Ft,from:"from-orange-600/30",to:"to-red-600/30",ring:"ring-orange-500/30"}:r.includes("movie")?{title:"Movie Quizzes",emoji:"ðŸŽ¬",Icon:Vt,from:"from-violet-600/30",to:"to-indigo-600/30",ring:"ring-violet-500/30"}:{title:`${s} Quizzes`,emoji:"â­",Icon:zt,from:"from-sky-600/30",to:"to-indigo-600/30",ring:"ring-sky-500/30"}}const H=s=>s!=null&&s.start_time?new Date(s.start_time).getTime():null,bt=s=>s!=null&&s.end_time?new Date(s.end_time).getTime():null,_t=s=>{const r=H(s),m=bt(s);if(!r||!m)return!1;const c=Date.now();return c>=r&&c<m},Zt=s=>{const r=H(s);return r?Date.now()<r:!1},oe=()=>{const{slug:s}=Ct(),r=Jt(),m=Ut(),{toast:c}=Mt(),{user:g}=At(),{isSubscribed:D,subscribeToPush:f}=kt(),[p]=z.useState([]),[v,u]=z.useState(!0),[_,w]=z.useState(null),[N,I]=z.useState({}),[d,x]=z.useState({}),[O,at]=z.useState(0),[q,vt]=z.useState([]),[E,G]=z.useState("detect"),[Nt,wt]=z.useState(!0),It=2e4,R=z.useCallback(async()=>{if(Q)try{const{slots:t,mode:a,auto:i}=await Wt(Q,s);vt(t),wt(i),G(a==="slots"||a==="legacy"?"slots":"legacy")}catch(t){G("legacy")}},[s]);z.useEffect(()=>{u(!0),R().finally(()=>{u(!1)})},[R]),z.useEffect(()=>{if(E==="none")return;const t=setInterval(()=>{R()},It);return()=>clearInterval(t)},[E,R]),z.useEffect(()=>{const t=Date.now();if(!(p||[]).some(n=>{const l=n.start_time?new Date(n.start_time).getTime():0,o=n.end_time?new Date(n.end_time).getTime():0;return l&&t<l||l&&o&&t>=l&&t<o}))return;const i=setInterval(()=>at(n=>(n+1)%1e6),1e3);return()=>clearInterval(i)},[p]),z.useEffect(()=>{if(E!=="slots")return;const t=Date.now();if(!(q||[]).some(n=>{const l=n.start_time?new Date(n.start_time).getTime():0,o=n.end_time?new Date(n.end_time).getTime():0;return l&&t<l||l&&o&&t>=l&&t<o}))return;const i=setInterval(()=>at(n=>(n+1)%1e6),1e3);return()=>clearInterval(i)},[q,E]),z.useEffect(()=>{const t=async()=>{try{const a=(p||[]).map(o=>o.id);if(!a.length){I({});return}const{data:i,error:n}=await Q.rpc("get_engagement_counts_many",{p_quiz_ids:a});if(n)throw n;const l={};for(const o of i||[]){const j=o.pre_joined||0,y=o.joined||0;l[o.quiz_id]=j+y}I(l)}catch(a){}};p&&p.length&&t()},[p]),z.useEffect(()=>{(async()=>{const a=o=>!o||typeof o!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o),i=(p||[]).map(o=>o.id).filter(a),n=(q||[]).map(o=>o.quizId||o.quiz_id||o.id).filter(a),l=[...new Set([...i,...n])];if(!g||!l.length){x({});return}try{const o={},{data:j,error:y}=await Q.from("quiz_participants").select("quiz_id,status").eq("user_id",g.id).in("quiz_id",l);if(!y&&j)for(const h of j)h.quiz_id&&(o[h.quiz_id]=h.status==="pre_joined"?"pre":"joined");for(const h of q||[]){const b=h.quizId||h.quiz_id||h.id;b&&o[b]&&h.slotId&&(o[h.slotId]=o[b])}x(o)}catch(o){x({})}})()},[g,p,q]);const rt=async t=>{if(!g){c({title:"Login required",description:"Please sign in to join the quiz.",variant:"destructive"}),r("/login");return}const a=t.slotId||t.id;try{const i=String((t==null?void 0:t.status)||"").trim().toLowerCase();if(i==="paused"||i==="stopped"||i==="skipped"||t!=null&&t.stop_override){c({title:"Paused",description:"This category is paused right now. Please try later.",variant:"destructive"});return}}catch(i){}w(a);try{typeof Notification!="undefined"&&Notification.permission!=="granted"&&!D&&Promise.resolve().then(()=>f()).catch(()=>{})}catch(i){}try{const i=await Ot({supabase:Q,quiz:t,user:g});if(i.status==="error")throw i.error;i.status==="already"?(x(n=>({...n,[a]:"joined"})),c({title:"Already Joined",description:"You are in this quiz."})):i.status==="joined"?(x(l=>({...l,[a]:"joined"})),Xt(`join_${(g==null?void 0:g.id)||"anon"}`,{max:4,windowMs:8e3}).allowed?(c({title:"Joined!",description:"Taking you to the quiz."}),r(t.slotId&&!t.isLegacy?`/quiz/slot/${t.slotId}`:`/quiz/${t.id}`)):c({title:"Slow down",description:"Please wait a moment before trying again.",variant:"destructive"})):i.status==="pre_joined"?(x(n=>({...n,[a]:"pre"})),c({title:"Pre-joined!",description:"We will remind you before start."})):i.status==="scheduled_retry"&&(x(n=>({...n,[a]:"pre"})),c({title:"Pre-joined!",description:"Auto joining at start time."}))}catch(i){const n=Pt(i);c({title:"Error",description:n||(i==null?void 0:i.message)||"Could not join quiz.",variant:"destructive"})}finally{w(null)}},ot=p.filter(t=>{if(E==="slots")return!1;const a=Date.now(),i=t.start_time?new Date(t.start_time).getTime():0,n=t.end_time?new Date(t.end_time).getTime():0,l=i&&n&&a>=i&&a<n,o=i&&a<i;return l||o}),A=Yt(s),P=Date.now(),K=E==="slots",C=K?q:p||[],qt=K?C.filter(t=>_t(t)).length:C.reduce((t,a)=>{const i=a.start_time?new Date(a.start_time).getTime():0,n=a.end_time?new Date(a.end_time).getTime():0;return t+(i&&n&&P>=i&&P<n?1:0)},0),St=C.filter(t=>{const a=t.start_time?new Date(t.start_time).getTime():0;return!(!a||P>=a)}).length,X=K?C.map(t=>H(t)).filter(t=>t&&t>P).sort((t,a)=>t-a)[0]||null:C.map(t=>t.start_time?new Date(t.start_time).getTime():null).filter(t=>t&&t>P).sort((t,a)=>t-a)[0]||null,{next:F}=Gt(q),Tt=t=>{var dt,ut,mt;if(!t)return null;const a=Date.now(),i=H(t),n=bt(t),l=_t(t),o=t.status==="paused",j=t.status==="finished"||n&&a>=n,y=Zt(t),h=y&&i?Math.max(0,Math.floor((i-a)/1e3)):l&&n?Math.max(0,Math.floor((n-a)/1e3)):null,b=Array.isArray(t.prizes)?t.prizes:[],Y=t.prize_type||"coins",Z=(dt=b[0])!=null?dt:0,tt=(ut=b[1])!=null?ut:0,et=(mt=b[2])!=null?mt:0,L=Et=>ft(Y,Et,{fallback:0}).formatted,st=t.participants_total||t.participants_joined||0,V=t.questions_count||10,B=!Nt&&!l&&!y,T=l&&!j?"LIVE":o?"PAUSED":B?"STOPPED":y?"UPCOMING":j?"FINISHED":(t.status||"").toUpperCase(),J=t.isLegacy?t.quizId:t.slotId,S=!!d[J],k=_===J,ct=j?"Results":l?S?"Play":"Join Now":y?S?"Joined âœ“":"Pre-Join":"View",Dt=async()=>{if(j){r(t.isLegacy?`/quiz/${t.quizId}`:`/quiz/slot/${t.slotId}`);return}if(!g){c({title:"Login Required",description:"Please login to join the quiz.",variant:"destructive"}),r("/login",{state:{from:m.pathname,message:"Login to join the quiz"}});return}if(S&&!l){r(t.isLegacy?`/quiz/${t.quizId}`:`/quiz/slot/${t.slotId}`);return}if(l){r(t.isLegacy?`/quiz/${t.quizId}`:`/quiz/slot/${t.slotId}`);return}y&&!S&&await rt({id:t.quizId,...t})};return e.jsx("div",{className:"quiz-slot-card",children:e.jsxs("div",{className:`quiz-slot-card-inner ${l?"quiz-slot-card-live":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"quiz-slot-lang",children:"ðŸŒ Hindi / English"}),e.jsxs("span",{className:`quiz-slot-badge ${T==="LIVE"?"quiz-slot-badge-live":T==="UPCOMING"?"quiz-slot-badge-upcoming":T==="PAUSED"?"quiz-slot-badge-paused":"quiz-slot-badge-default"}`,children:[T==="LIVE"&&e.jsx("span",{className:"quiz-slot-badge-dot"}),T]})]}),e.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:t.quiz_title||t.title||"Quiz"}),e.jsxs("div",{className:"quiz-slot-time-section",children:[e.jsxs("div",{className:"quiz-slot-time-row",children:[e.jsxs("div",{className:"quiz-slot-time-box",children:[e.jsx("span",{className:"quiz-slot-time-label",children:"START"}),e.jsx("span",{className:"quiz-slot-time-value",children:t.start_time?U(t.start_time):"â€”"})]}),e.jsx("div",{className:"quiz-slot-time-divider",children:"â†’"}),e.jsxs("div",{className:"quiz-slot-time-box",children:[e.jsx("span",{className:"quiz-slot-time-label",children:"END"}),e.jsx("span",{className:"quiz-slot-time-value",children:t.end_time?U(t.end_time):"â€”"})]})]}),h!==null&&e.jsxs("div",{className:`quiz-slot-timer ${l?"quiz-slot-timer-live":""}`,children:[e.jsx(xt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:y?"Starts in":"Ends in"}),e.jsxs("span",{className:"quiz-slot-timer-value",children:[Math.floor(h/60).toString().padStart(2,"0"),":",(h%60).toString().padStart(2,"0")]})]})]}),e.jsxs("div",{className:"quiz-slot-prize-section",children:[e.jsx("div",{className:"quiz-slot-prize-title",children:"ðŸ† Prizes"}),e.jsxs("div",{className:"quiz-slot-prize-row",children:[e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-gold",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"1st"}),e.jsx("span",{className:"quiz-slot-prize-value",children:L(Z)})]}),e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-silver",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"2nd"}),e.jsx("span",{className:"quiz-slot-prize-value",children:L(tt)})]}),e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-bronze",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"3rd"}),e.jsx("span",{className:"quiz-slot-prize-value",children:L(et)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:"quiz-slot-stat",children:["ðŸ“ ",V," Questions"]}),e.jsxs("span",{className:"quiz-slot-stat",children:[e.jsx(ht,{className:"w-3 h-3"})," ",st," Joined"]})]}),e.jsx("button",{type:"button",disabled:k||S&&y,onClick:Dt,onMouseEnter:()=>gt(t.isLegacy?`/quiz/${t.quizId}`:`/quiz/slot/${t.slotId}`),className:`quiz-slot-btn ${k?"opacity-50 cursor-wait":S&&y?"quiz-slot-btn-joined":l?"quiz-slot-btn-live":"quiz-slot-btn-default"}`,children:k?"Joining...":ct})]})},t.slotId)};z.useEffect(()=>{if(!F)return;const t=F.start_time?new Date(F.start_time).getTime():null;if(!t)return;const a=Date.now(),i=t-a-6e4;if(i<=0||i>1800*1e3)return;const n=setTimeout(()=>{try{c({title:"Upcoming Slot",description:"1 minute to start â€“ be ready!",duration:4e3})}catch(l){}},i);return()=>clearTimeout(n)},[F,c]);const lt=typeof window!="undefined"?`${window.location.origin}/category/${s}`:`https://quizdangal.com/category/${s}`;return e.jsxs("div",{className:"px-3 sm:px-4 pt-14 sm:pt-16 pb-6",children:[e.jsx($t,{title:`${A.title} â€“ Quiz Dangal`,description:`Active and upcoming quizzes in ${A.title}. Play daily ${A.title.toLowerCase()} on Quiz Dangal and earn coins.`,canonical:lt,robots:"index, follow",alternateLocales:["hi_IN","en_US"],author:"Quiz Dangal",datePublished:"2025-01-01",dateModified:"2025-12-29",jsonLd:[{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://quizdangal.com/"},{"@type":"ListItem",position:2,name:A.title,item:lt}]}]}),e.jsx("span",{className:"hidden","aria-hidden":!0,children:O}),e.jsxs("div",{className:"max-w-md sm:max-w-2xl lg:max-w-4xl mx-auto space-y-4",children:[e.jsx("div",{className:"p-[1px] rounded-xl sm:rounded-2xl bg-gradient-to-r from-indigo-500/50 via-violet-500/40 to-fuchsia-500/50",children:e.jsxs("div",{className:"rounded-xl sm:rounded-2xl bg-slate-900/95 p-3 sm:p-4 lg:p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-2",children:[e.jsx("div",{className:"w-9 h-9 sm:w-12 sm:h-12 lg:w-14 lg:h-14 rounded-lg sm:rounded-xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center text-lg sm:text-2xl lg:text-3xl",children:A.emoji}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-base sm:text-xl lg:text-2xl font-bold text-white truncate",children:A.title}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-[10px] sm:text-xs mt-1",children:[e.jsxs("span",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded sm:rounded-md bg-emerald-600/20 text-emerald-300 border border-emerald-600/30",children:[qt," live"]}),e.jsxs("span",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded sm:rounded-md bg-sky-600/20 text-sky-300 border border-sky-600/30",children:[St," upcoming"]})]})]})]}),X&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-slate-400",children:[e.jsx(xt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Next: ",pt(X)," â€¢ ",U(X)]})]})}),E==="slots"?e.jsx(e.Fragment,{children:v?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:Array.from({length:3}).map((t,a)=>e.jsx("div",{className:"h-40 sm:h-48 lg:h-52 rounded-xl sm:rounded-2xl bg-slate-800/60 border border-slate-700/60 animate-pulse"},a))}):e.jsx(e.Fragment,{children:q.filter(t=>{const a=Date.now(),i=t.start_time?new Date(t.start_time).getTime():null,n=t.end_time?new Date(t.end_time).getTime():null,l=i&&n&&a>=i&&a<n,o=i&&a<i;return l||o}).length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:q.filter(t=>{const a=Date.now(),i=t.start_time?new Date(t.start_time).getTime():null,n=t.end_time?new Date(t.end_time).getTime():null,l=i&&n&&a>=i&&a<n,o=i&&a<i;return l||o}).map(t=>Tt(t))}):e.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-slate-800 bg-slate-900/50 p-4 sm:p-6 text-center text-sm sm:text-base text-slate-400",children:"No quizzes scheduled yet."})})}):v?e.jsx("div",{className:"grid gap-3 sm:gap-4",children:Array.from({length:4}).map((t,a)=>e.jsx("div",{className:"h-24 sm:h-28 rounded-xl sm:rounded-2xl bg-slate-800/60 border border-slate-700/60 animate-pulse"},a))}):ot.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-16",children:"No quizzes in this category yet."}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:ot.map((t,a)=>{var it,S,k;const i=Date.now(),n=t.start_time?new Date(t.start_time).getTime():null,l=t.end_time?new Date(t.end_time).getTime():null,o=n&&l&&i>=n&&i<l,j=n&&i<n,y=o||j,h=j&&n?Math.max(0,Math.floor((n-i)/1e3)):o&&l?Math.max(0,Math.floor((l-i)/1e3)):null,b=Array.isArray(t.prizes)?t.prizes:[],Y=t.prize_type||"coins",Z=(it=b[0])!=null?it:0,tt=(S=b[1])!=null?S:0,et=(k=b[2])!=null?k:0,L=$=>ft(Y,$,{fallback:0}).formatted,st=N[t.id]||0,V=d[t.id],B=!!V,T=n&&l?Math.max(1,l-n):null,J=o&&T?Math.min(100,Math.max(0,Math.round((i-n)/T*100))):null;return e.jsx(Qt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:a*.02},onClick:()=>r(`/quiz/${t.id}`),className:"cursor-pointer",role:"button",tabIndex:0,onKeyDown:$=>{$.key==="Enter"&&r(`/quiz/${t.id}`)},children:e.jsx("div",{className:`p-[1px] rounded-xl sm:rounded-2xl ${o?"bg-gradient-to-r from-emerald-500/60 to-green-500/60":"bg-gradient-to-r from-indigo-500/40 via-violet-500/30 to-fuchsia-500/40"}`,children:e.jsxs("div",{className:"rounded-xl sm:rounded-2xl bg-slate-900/95 p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"text-sm sm:text-base font-bold text-white flex-1 min-w-0 line-clamp-2",children:t.title}),e.jsxs("div",{className:"shrink-0 flex items-center gap-1",children:[o&&e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold bg-rose-600 text-white",children:"LIVE"}),j&&e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold bg-sky-600 text-white",children:"SOON"}),V&&e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-semibold bg-indigo-600/20 text-indigo-300 border border-indigo-500/40",children:"Joined"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs mb-2",children:[e.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-amber-500/15 text-amber-300 border border-amber-600/30",children:["ðŸ¥‡ ",L(Z)]}),e.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-sky-500/15 text-sky-300 border border-sky-600/30",children:["ðŸ¥ˆ ",L(tt)]}),e.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-violet-500/15 text-violet-300 border border-violet-600/30",children:["ðŸ¥‰ ",L(et)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-slate-400 mb-2",children:[e.jsx("span",{children:t.start_time?pt(t.start_time):"â€”"}),e.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded bg-slate-800/60 border border-slate-700/50",children:[t.start_time?U(t.start_time):"â€”"," - ",t.end_time?U(t.end_time):"â€”"]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-slate-500",children:[e.jsx(ht,{className:"w-3 h-3 sm:w-4 sm:h-4"}),st," joined"]}),h!==null&&e.jsxs("div",{className:"text-xs sm:text-sm font-semibold text-indigo-300",children:[j?"In":"Ends"," ",Math.floor(h/60).toString().padStart(2,"0"),":",(h%60).toString().padStart(2,"0")]})]}),J!==null&&e.jsx("div",{className:"mb-2 w-full bg-slate-800 rounded-full h-1 sm:h-1.5 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${J}%`}})}),e.jsx("button",{type:"button",onClick:$=>{$.stopPropagation(),B||!y?r(`/quiz/${t.id}`):rt(t)},onMouseEnter:()=>gt("/quiz"),disabled:_===t.id,className:`w-full h-9 sm:h-10 rounded-lg text-xs sm:text-sm font-bold text-white transition ${o?"bg-gradient-to-r from-emerald-600 to-green-500 hover:opacity-90":"bg-gradient-to-r from-indigo-600 to-violet-600 hover:opacity-90"} ${_===t.id?"opacity-80":""}`,children:B?"JOINED":y?_===t.id?"JOININGâ€¦":"JOIN":"VIEW"})]})})},t.id)})})]})]})};export{oe as default};
