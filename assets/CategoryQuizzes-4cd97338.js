import{l as ue,e as Ee,u as Le,k as ke,j as s,S as Me,o as me,f as Q,p as pe,d as $,m as Ae,b as ge}from"./index-4dae992b.js";import{r as _}from"./react-63c462fe.js";import{m as $e}from"./motion-lite-a13d6934.js";import{s as Ce}from"./smartJoinQuiz-cbfd35a9.js";import{c as Pe,u as Je,b as Qe}from"./router-5fd03704.js";import{f as fe,g as xe,M as he,B as Ue,c as Oe,d as Be}from"./icons-a32f58a9.js";import"./supabase-24c2e735.js";function Ve(t){var m,S,g,p,b,d,z,N,v,w;if(!t)return null;const r=Number((g=(S=(m=t.participants_joined)!=null?m:t.joined_count)!=null?S:t.joined)!=null?g:0),u=Number((d=(b=(p=t.participants_pre)!=null?p:t.pre_joined_count)!=null?b:t.pre_joined)!=null?d:0),c=Number((z=t.participants_total)!=null?z:r+u);return{slotId:t.id||t.slot_id||t.slotid||t.slotID||t.slot_uuid||t.slot_uuid_id||t.slot_uuid_ref||t.quiz_slot_id||t.quiz_slot_uuid||t.slot_uuid_value||t.slot_ref||t.slot_reference||t.slot||null,quizId:t.quiz_id||t.quizid||t.quiz_uuid||t.quiz_uuid_id||t.quiz||null,category:t.category||null,title:t.quiz_title||t.title||t.slot_title||null,start_time:t.start_time||t.slot_start||t.starts_at||null,end_time:t.end_time||t.slot_end||t.ends_at||null,status:t.status||"scheduled",prizes:Array.isArray(t.prizes)?t.prizes:Array.isArray(t.quiz_prizes)?t.quiz_prizes:[],questions:Array.isArray(t.questions)?t.questions:[],prize_type:t.prize_type||t.quiz_prize_type||"coins",participants_joined:r,participants_pre:u,participants_total:c,questions_count:Number((w=(v=(N=t.questions_count)!=null?N:t.question_count)!=null?v:t.q_count)!=null?w:0),auto_enabled:typeof t.auto_enabled=="boolean"?t.auto_enabled:void 0,stop_override:!!t.stop_override}}async function Fe(t,r){if(!t)return{slots:[],mode:"none",auto:!0};let u=[],c=[],m=!0;try{const{data:d,error:z}=await t.from("quiz_slots_view").select("*").eq("category",r).order("start_time",{ascending:!0});!z&&d&&(u=d.map(Ve))}catch(d){ue.debug("quiz_slots_view error",d.message||d)}try{const{data:d,error:z}=await t.from("quizzes").select("id,title,start_time,end_time,status,prizes,prize_type,slot_id,questions(count)").eq("category",r).order("start_time",{ascending:!0});if(!z&&d){const N=Date.now(),v=(d||[]).filter(f=>!f.slot_id);let w={};if(v.length>0)try{const{data:f}=await t.rpc("get_engagement_counts_many",{p_quiz_ids:v.map(y=>y.id)});if(f)for(const y of f)w[y.quiz_id]=(y.pre_joined||0)+(y.joined||0)}catch(f){}c=v.map(f=>{var y,U;return{slotId:f.id,quizId:f.id,category:r,title:f.title,quiz_title:f.title,start_time:f.start_time,end_time:f.end_time,status:Re(f,N),prizes:Array.isArray(f.prizes)?f.prizes:[],prize_type:f.prize_type||"coins",participants_joined:w[f.id]||0,participants_total:w[f.id]||0,questions_count:((U=(y=f.questions)==null?void 0:y[0])==null?void 0:U.count)||0,auto_enabled:!0,isLegacy:!0}})}}catch(d){ue.debug("Legacy quizzes fetch error",d.message||d)}try{const{data:d,error:z}=await t.from("category_runtime_overrides").select("category,auto_enabled:is_auto").eq("category",r).maybeSingle();!z&&d&&(m=!!d.auto_enabled)}catch(d){}const S=new Set(u.map(d=>d.quizId).filter(Boolean)),g=c.filter(d=>!S.has(d.quizId)),p=[...u,...g];p.sort((d,z)=>{const N=d.start_time?new Date(d.start_time).getTime():0,v=z.start_time?new Date(z.start_time).getTime():0;return N-v});const b=u.length>0?"slots":g.length>0?"legacy":"none";return{slots:p,mode:b,auto:m}}function Re(t,r){const u=t.start_time?new Date(t.start_time).getTime():null,c=t.end_time?new Date(t.end_time).getTime():null;return u&&c&&r>=u&&r<c?"active":u&&r<u?"scheduled":c&&r>=c?"finished":"scheduled"}function We(t){const r=Date.now(),u=t.find(g=>{const p=g!=null&&g.start_time?new Date(g.start_time).getTime():null,b=g!=null&&g.end_time?new Date(g.end_time).getTime():null;return p&&b&&r>=p&&r<b}),c=t.filter(g=>{const p=g!=null&&g.start_time?new Date(g.start_time).getTime():null;return p?r<p:!1});c.sort((g,p)=>new Date(g.start_time).getTime()-new Date(p.start_time).getTime());const m=c[0]||null,S=c[1]||null;return{live:u,next:m,queued:S}}const C=new Map;let ze=0;function W(t){if(!(ze%200!==0&&C.size<100))for(const[r,u]of C.entries()){const c=(u.windowMs||8e3)*2;t-u.firstTs>c&&C.delete(r)}}function Ge(t,{max:r=5,windowMs:u=8e3}={}){ze+=1;const c=Date.now(),m=C.get(t);return m?c-m.firstTs>m.windowMs?(C.set(t,{count:1,firstTs:c,windowMs:u}),W(c),{allowed:!0,remaining:r-1}):m.count>=r?(W(c),{allowed:!1,remaining:0}):(m.count+=1,W(c),{allowed:!0,remaining:r-m.count}):(C.set(t,{count:1,firstTs:c,windowMs:u}),W(c),{allowed:!0,remaining:r-1})}function He(t=""){const r=String(t||"").toLowerCase();return r.includes("opinion")?{title:"Opinion Quizzes",emoji:"ðŸ’¬",Icon:he,from:"from-indigo-600/30",to:"to-fuchsia-600/30",ring:"ring-fuchsia-500/30"}:r.includes("gk")?{title:"GK Quizzes",emoji:"ðŸ§ ",Icon:Ue,from:"from-emerald-600/30",to:"to-teal-600/30",ring:"ring-emerald-500/30"}:r.includes("sport")?{title:"Sports Quizzes",emoji:"ðŸ†",Icon:Oe,from:"from-orange-600/30",to:"to-red-600/30",ring:"ring-orange-500/30"}:r.includes("movie")?{title:"Movie Quizzes",emoji:"ðŸŽ¬",Icon:Be,from:"from-violet-600/30",to:"to-indigo-600/30",ring:"ring-violet-500/30"}:{title:`${t} Quizzes`,emoji:"â­",Icon:he,from:"from-sky-600/30",to:"to-indigo-600/30",ring:"ring-sky-500/30"}}const G=t=>t!=null&&t.start_time?new Date(t.start_time).getTime():null,ye=t=>t!=null&&t.end_time?new Date(t.end_time).getTime():null,_e=t=>{const r=G(t),u=ye(t);if(!r||!u)return!1;const c=Date.now();return c>=r&&c<u},Ke=t=>{const r=G(t);return r?Date.now()<r:!1},nt=()=>{const{slug:t}=Pe(),r=Je(),u=Qe(),{toast:c}=Ee(),{user:m}=Le(),{isSubscribed:S,subscribeToPush:g}=ke(),[p]=_.useState([]),[b,d]=_.useState(!0),[z,N]=_.useState(null),[v,w]=_.useState({}),[f,y]=_.useState({}),[U,ne]=_.useState(0),[q,je]=_.useState([]),[T,H]=_.useState("detect"),[be,ve]=_.useState(!0),Ne=2e4,O=_.useCallback(async()=>{if($)try{const{slots:e,mode:a,auto:i}=await Fe($,t);je(e),ve(i),H(a==="slots"||a==="legacy"?"slots":"legacy")}catch(e){H("legacy")}},[t]);_.useEffect(()=>{d(!0),O().finally(()=>{d(!1)})},[O,t]),_.useEffect(()=>{if(T==="none")return;const e=setInterval(()=>{O()},Ne);return()=>clearInterval(e)},[T,O]),_.useEffect(()=>{const e=Date.now();if(!(p||[]).some(n=>{const l=n.start_time?new Date(n.start_time).getTime():0,o=n.end_time?new Date(n.end_time).getTime():0;return l&&e<l||l&&o&&e>=l&&e<o}))return;const i=setInterval(()=>ne(n=>(n+1)%1e6),1e3);return()=>clearInterval(i)},[p]),_.useEffect(()=>{if(T!=="slots")return;const e=Date.now();if(!(q||[]).some(n=>{const l=n.start_time?new Date(n.start_time).getTime():0,o=n.end_time?new Date(n.end_time).getTime():0;return l&&e<l||l&&o&&e>=l&&e<o}))return;const i=setInterval(()=>ne(n=>(n+1)%1e6),1e3);return()=>clearInterval(i)},[q,T]),_.useEffect(()=>{const e=async()=>{try{const a=(p||[]).map(o=>o.id);if(!a.length){w({});return}const{data:i,error:n}=await $.rpc("get_engagement_counts_many",{p_quiz_ids:a});if(n)throw n;const l={};for(const o of i||[]){const x=o.pre_joined||0,h=o.joined||0;l[o.quiz_id]=x+h}w(l)}catch(a){}};p&&p.length&&e()},[p]),_.useEffect(()=>{(async()=>{const a=(p||[]).map(o=>o.id).filter(Boolean),i=(q||[]).filter(o=>!o.isLegacy).map(o=>o.slotId).filter(Boolean),n=(q||[]).filter(o=>o.isLegacy).map(o=>o.quizId).filter(Boolean),l=[...new Set([...a,...n])];if(!m||!l.length&&!i.length){y({});return}try{const o={};if(l.length){const{data:x,error:h}=await $.from("quiz_participants").select("quiz_id,status").eq("user_id",m.id).in("quiz_id",l);if(!h&&x)for(const j of x)o[j.quiz_id]=j.status==="pre_joined"?"pre":"joined"}if(i.length){const{data:x,error:h}=await $.from("quiz_participants").select("slot_id,status").eq("user_id",m.id).in("slot_id",i);if(!h&&x)for(const j of x)o[j.slot_id]=j.status==="pre_joined"?"pre":"joined"}y(o)}catch(o){y({})}})()},[m,p,q]);const ae=async e=>{if(!m){c({title:"Login required",description:"Please sign in to join the quiz.",variant:"destructive"}),r("/login");return}const a=e.slotId||e.id;try{const i=String((e==null?void 0:e.status)||"").trim().toLowerCase();if(i==="paused"||i==="stopped"||i==="skipped"||e!=null&&e.stop_override){c({title:"Paused",description:"This category is paused right now. Please try later.",variant:"destructive"});return}}catch(i){}N(a);try{typeof Notification!="undefined"&&Notification.permission!=="granted"&&!S&&Promise.resolve().then(()=>g()).catch(()=>{})}catch(i){}try{const i=await Ce({supabase:$,quiz:e,user:m});if(i.status==="error")throw i.error;i.status==="already"?(y(n=>({...n,[a]:"joined"})),c({title:"Already Joined",description:"You are in this quiz."})):i.status==="joined"?(y(l=>({...l,[a]:"joined"})),Ge(`join_${(m==null?void 0:m.id)||"anon"}`,{max:4,windowMs:8e3}).allowed?(c({title:"Joined!",description:"Taking you to the quiz."}),r(e.slotId&&!e.isLegacy?`/quiz/slot/${e.slotId}`:`/quiz/${e.id}`)):c({title:"Slow down",description:"Please wait a moment before trying again.",variant:"destructive"})):i.status==="pre_joined"?(y(n=>({...n,[a]:"pre"})),c({title:"Pre-joined!",description:"We will remind you before start."})):i.status==="scheduled_retry"&&(y(n=>({...n,[a]:"pre"})),c({title:"Pre-joined!",description:"Auto joining at start time."}))}catch(i){const n=Ae(i);c({title:"Error",description:n||(i==null?void 0:i.message)||"Could not join quiz.",variant:"destructive"})}finally{N(null)}},re=p.filter(e=>{if(T==="slots")return!1;const a=Date.now(),i=e.start_time?new Date(e.start_time).getTime():0,n=e.end_time?new Date(e.end_time).getTime():0,l=i&&n&&a>=i&&a<n,o=i&&a<i;return l||o}),B=He(t),k=Date.now(),K=T==="slots",P=K?q:p||[],we=K?P.filter(e=>_e(e)).length:P.reduce((e,a)=>{const i=a.start_time?new Date(a.start_time).getTime():0,n=a.end_time?new Date(a.end_time).getTime():0;return e+(i&&n&&k>=i&&k<n?1:0)},0),qe=P.filter(e=>{const a=e.start_time?new Date(e.start_time).getTime():0;return!a||k>=a?!1:e.isLegacy?!0:a-k<=300*1e3}).length,Y=K?P.map(e=>G(e)).filter(e=>e&&e>k).sort((e,a)=>e-a)[0]||null:P.map(e=>e.start_time?new Date(e.start_time).getTime():null).filter(e=>e&&e>k).sort((e,a)=>e-a)[0]||null,{next:V}=We(q),Ie=e=>{var le,ce,de;if(!e)return null;const a=Date.now(),i=G(e),n=ye(e),l=_e(e),o=e.status==="paused",x=e.status==="finished"||n&&a>=n,h=Ke(e),j=h&&i?Math.max(0,Math.floor((i-a)/1e3)):l&&n?Math.max(0,Math.floor((n-a)/1e3)):null,E=Array.isArray(e.prizes)?e.prizes:[],X=e.prize_type||"coins",Z=(le=E[0])!=null?le:0,ee=(ce=E[1])!=null?ce:0,te=(de=E[2])!=null?de:0,L=Te=>ge(X,Te,{fallback:0}).formatted,se=e.participants_total||e.participants_joined||0,F=e.questions_count||10,R=!be&&!l&&!h,D=l&&!x?"LIVE":o?"PAUSED":R?"STOPPED":h?"UPCOMING":x?"FINISHED":(e.status||"").toUpperCase(),J=e.isLegacy?e.quizId:e.slotId,I=!!f[J],M=z===J,oe=x?"Results":l?I?"Play":"Join Now":h?I?"Joined âœ“":"Pre-Join":"View",De=async()=>{if(x){r(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}if(!m){c({title:"Login Required",description:"Please login to join the quiz.",variant:"destructive"}),r("/login",{state:{from:u.pathname,message:"Login to join the quiz"}});return}if(I&&!l){r(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}if(l){r(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`);return}h&&!I&&await ae({id:e.quizId,...e})};return s.jsx("div",{className:"quiz-slot-card",children:s.jsxs("div",{className:`quiz-slot-card-inner ${l?"quiz-slot-card-live":""}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("span",{className:"quiz-slot-lang",children:"ðŸŒ Hindi / English"}),s.jsxs("span",{className:`quiz-slot-badge ${D==="LIVE"?"quiz-slot-badge-live":D==="UPCOMING"?"quiz-slot-badge-upcoming":D==="PAUSED"?"quiz-slot-badge-paused":"quiz-slot-badge-default"}`,children:[D==="LIVE"&&s.jsx("span",{className:"quiz-slot-badge-dot"}),D]})]}),s.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:e.quiz_title||e.title||"Quiz"}),s.jsxs("div",{className:"quiz-slot-time-section",children:[s.jsxs("div",{className:"quiz-slot-time-row",children:[s.jsxs("div",{className:"quiz-slot-time-box",children:[s.jsx("span",{className:"quiz-slot-time-label",children:"START"}),s.jsx("span",{className:"quiz-slot-time-value",children:e.start_time?Q(e.start_time):"â€”"})]}),s.jsx("div",{className:"quiz-slot-time-divider",children:"â†’"}),s.jsxs("div",{className:"quiz-slot-time-box",children:[s.jsx("span",{className:"quiz-slot-time-label",children:"END"}),s.jsx("span",{className:"quiz-slot-time-value",children:e.end_time?Q(e.end_time):"â€”"})]})]}),j!==null&&s.jsxs("div",{className:`quiz-slot-timer ${l?"quiz-slot-timer-live":""}`,children:[s.jsx(fe,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:h?"Starts in":"Ends in"}),s.jsxs("span",{className:"quiz-slot-timer-value",children:[Math.floor(j/60).toString().padStart(2,"0"),":",(j%60).toString().padStart(2,"0")]})]})]}),s.jsxs("div",{className:"quiz-slot-prize-section",children:[s.jsx("div",{className:"quiz-slot-prize-title",children:"ðŸ† Prizes"}),s.jsxs("div",{className:"quiz-slot-prize-row",children:[s.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-gold",children:[s.jsx("span",{className:"quiz-slot-prize-rank",children:"1st"}),s.jsx("span",{className:"quiz-slot-prize-value",children:L(Z)})]}),s.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-silver",children:[s.jsx("span",{className:"quiz-slot-prize-rank",children:"2nd"}),s.jsx("span",{className:"quiz-slot-prize-value",children:L(ee)})]}),s.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-bronze",children:[s.jsx("span",{className:"quiz-slot-prize-rank",children:"3rd"}),s.jsx("span",{className:"quiz-slot-prize-value",children:L(te)})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("span",{className:"quiz-slot-stat",children:["ðŸ“ ",F," Questions"]}),s.jsxs("span",{className:"quiz-slot-stat",children:[s.jsx(xe,{className:"w-3 h-3"})," ",se," Joined"]})]}),s.jsx("button",{type:"button",disabled:M||I&&h,onClick:De,onMouseEnter:()=>pe(e.isLegacy?`/quiz/${e.quizId}`:`/quiz/slot/${e.slotId}`),className:`quiz-slot-btn ${M?"opacity-50 cursor-wait":I&&h?"quiz-slot-btn-joined":l?"quiz-slot-btn-live":"quiz-slot-btn-default"}`,children:M?"Joining...":oe})]})},e.slotId)};_.useEffect(()=>{if(!V)return;const e=V.start_time?new Date(V.start_time).getTime():null;if(!e)return;const a=Date.now(),i=e-a-6e4;if(i<=0||i>1800*1e3)return;const n=setTimeout(()=>{try{c({title:"Upcoming Slot",description:"1 minute to start â€“ be ready!",duration:4e3})}catch(l){}},i);return()=>clearTimeout(n)},[V,c]);const Se=typeof window!="undefined"?`${window.location.origin}/category/${t}/`:`https://quizdangal.com/category/${t}/`;return s.jsxs("div",{className:"px-3 sm:px-4 pt-14 sm:pt-16 pb-6",children:[s.jsx(Me,{title:`${B.title} â€“ Quiz Dangal`,description:`Active and upcoming quizzes in ${B.title}.`,canonical:Se,robots:"index, follow"}),s.jsx("span",{className:"hidden","aria-hidden":!0,children:U}),s.jsxs("div",{className:"max-w-md sm:max-w-2xl lg:max-w-4xl mx-auto space-y-4",children:[s.jsx("div",{className:"p-[1px] rounded-xl sm:rounded-2xl bg-gradient-to-r from-indigo-500/50 via-violet-500/40 to-fuchsia-500/50",children:s.jsxs("div",{className:"rounded-xl sm:rounded-2xl bg-slate-900/95 p-3 sm:p-4 lg:p-5",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-2",children:[s.jsx("div",{className:"w-9 h-9 sm:w-12 sm:h-12 lg:w-14 lg:h-14 rounded-lg sm:rounded-xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center text-lg sm:text-2xl lg:text-3xl",children:B.emoji}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h1",{className:"text-base sm:text-xl lg:text-2xl font-bold text-white truncate",children:B.title}),s.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-[10px] sm:text-xs mt-1",children:[s.jsxs("span",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded sm:rounded-md bg-emerald-600/20 text-emerald-300 border border-emerald-600/30",children:[we," live"]}),s.jsxs("span",{className:"px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded sm:rounded-md bg-sky-600/20 text-sky-300 border border-sky-600/30",children:[qe," upcoming"]})]})]})]}),Y&&s.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-slate-400",children:[s.jsx(fe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Next: ",me(Y)," â€¢ ",Q(Y)]})]})}),T==="slots"?s.jsx(s.Fragment,{children:b?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:Array.from({length:3}).map((e,a)=>s.jsx("div",{className:"h-40 sm:h-48 lg:h-52 rounded-xl sm:rounded-2xl bg-slate-800/60 border border-slate-700/60 animate-pulse"},a))}):s.jsx(s.Fragment,{children:q.filter(e=>{const a=Date.now(),i=e.start_time?new Date(e.start_time).getTime():null,n=e.end_time?new Date(e.end_time).getTime():null,l=i&&n&&a>=i&&a<n,o=i&&a<i,x=o&&i-a<=300*1e3;return l||(e.isLegacy?o:x)}).length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:q.filter(e=>{const a=Date.now(),i=e.start_time?new Date(e.start_time).getTime():null,n=e.end_time?new Date(e.end_time).getTime():null,l=i&&n&&a>=i&&a<n,o=i&&a<i,x=o&&i-a<=300*1e3;return l||(e.isLegacy?o:x)}).map(e=>Ie(e))}):s.jsx("div",{className:"rounded-xl sm:rounded-2xl border border-slate-800 bg-slate-900/50 p-4 sm:p-6 text-center text-sm sm:text-base text-slate-400",children:"No quizzes scheduled yet."})})}):b?s.jsx("div",{className:"grid gap-3 sm:gap-4",children:Array.from({length:4}).map((e,a)=>s.jsx("div",{className:"h-24 sm:h-28 rounded-xl sm:rounded-2xl bg-slate-800/60 border border-slate-700/60 animate-pulse"},a))}):re.length===0?s.jsx("div",{className:"text-center text-muted-foreground py-16",children:"No quizzes in this category yet."}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:re.map((e,a)=>{var ie,I,M;const i=Date.now(),n=e.start_time?new Date(e.start_time).getTime():null,l=e.end_time?new Date(e.end_time).getTime():null,o=n&&l&&i>=n&&i<l,x=n&&i<n,h=o||x,j=x&&n?Math.max(0,Math.floor((n-i)/1e3)):o&&l?Math.max(0,Math.floor((l-i)/1e3)):null,E=Array.isArray(e.prizes)?e.prizes:[],X=e.prize_type||"coins",Z=(ie=E[0])!=null?ie:0,ee=(I=E[1])!=null?I:0,te=(M=E[2])!=null?M:0,L=A=>ge(X,A,{fallback:0}).formatted,se=v[e.id]||0,F=f[e.id],R=!!F,D=n&&l?Math.max(1,l-n):null,J=o&&D?Math.min(100,Math.max(0,Math.round((i-n)/D*100))):null;return s.jsx($e.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:a*.02},onClick:()=>r(`/quiz/${e.id}`),className:"cursor-pointer",role:"button",tabIndex:0,onKeyDown:A=>{A.key==="Enter"&&r(`/quiz/${e.id}`)},children:s.jsx("div",{className:`p-[1px] rounded-xl sm:rounded-2xl ${o?"bg-gradient-to-r from-emerald-500/60 to-green-500/60":"bg-gradient-to-r from-indigo-500/40 via-violet-500/30 to-fuchsia-500/40"}`,children:s.jsxs("div",{className:"rounded-xl sm:rounded-2xl bg-slate-900/95 p-3 sm:p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h3",{className:"text-sm sm:text-base font-bold text-white flex-1 min-w-0 line-clamp-2",children:e.title}),s.jsxs("div",{className:"shrink-0 flex items-center gap-1",children:[o&&s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold bg-rose-600 text-white",children:"LIVE"}),x&&s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-bold bg-sky-600 text-white",children:"SOON"}),F&&s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded text-[9px] sm:text-[10px] font-semibold bg-indigo-600/20 text-indigo-300 border border-indigo-500/40",children:"Joined"})]})]}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs mb-2",children:[s.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-amber-500/15 text-amber-300 border border-amber-600/30",children:["ðŸ¥‡ ",L(Z)]}),s.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-sky-500/15 text-sky-300 border border-sky-600/30",children:["ðŸ¥ˆ ",L(ee)]}),s.jsxs("span",{className:"px-1.5 sm:px-2 py-1 rounded bg-violet-500/15 text-violet-300 border border-violet-600/30",children:["ðŸ¥‰ ",L(te)]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] sm:text-xs text-slate-400 mb-2",children:[s.jsx("span",{children:e.start_time?me(e.start_time):"â€”"}),s.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded bg-slate-800/60 border border-slate-700/50",children:[e.start_time?Q(e.start_time):"â€”"," - ",e.end_time?Q(e.end_time):"â€”"]})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-slate-500",children:[s.jsx(xe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),se," joined"]}),j!==null&&s.jsxs("div",{className:"text-xs sm:text-sm font-semibold text-indigo-300",children:[x?"In":"Ends"," ",Math.floor(j/60).toString().padStart(2,"0"),":",(j%60).toString().padStart(2,"0")]})]}),J!==null&&s.jsx("div",{className:"mb-2 w-full bg-slate-800 rounded-full h-1 sm:h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${J}%`}})}),s.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),R||!h?r(`/quiz/${e.id}`):ae(e)},onMouseEnter:()=>pe("/quiz"),disabled:z===e.id,className:`w-full h-9 sm:h-10 rounded-lg text-xs sm:text-sm font-bold text-white transition ${o?"bg-gradient-to-r from-emerald-600 to-green-500 hover:opacity-90":"bg-gradient-to-r from-indigo-600 to-violet-600 hover:opacity-90"} ${z===e.id?"opacity-80":""}`,children:R?"JOINED":h?z===e.id?"JOININGâ€¦":"JOIN":"VIEW"})]})})},e.id)})})]})]})};export{nt as default};
