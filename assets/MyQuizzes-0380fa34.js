import{u as F,h as A,g as O,s as Z,a as Q,j as e,S as J,f as R,p as K,b as H,c as X}from"./index-ee517e2a.js";import{r as b}from"./react-63c462fe.js";import{m as i}from"./motion-lite-a13d6934.js";import{u as ee}from"./router-5fd03704.js";import{c as M,P as U,f as V,g as te}from"./icons-a32f58a9.js";import"./supabase-24c2e735.js";const ae=({size:y=72,centered:g=!1,fitParent:j=!1})=>{const m=typeof y=="number"?`${y}px`:y,[v,q]=b.useState(0),z=["/Trophy.png","/trophy.png","/trophy-question.png","/trophy-question.webp"],L=z[v]||z[0];return e.jsx("div",{className:`relative trophy-float pointer-events-none${g?"":" mx-auto mb-4"}`,style:{width:j?"100%":m,height:j?"100%":m},children:e.jsx("div",{className:"trophy-sway w-full h-full",children:e.jsx("div",{className:"trophy-pulse w-full h-full",children:v>=0?e.jsx("img",{src:L,alt:"Trophy",className:"w-full h-full object-contain select-none",style:{backgroundColor:"transparent",display:"block",maxWidth:"96px",maxHeight:"96px"},loading:"eager",decoding:"async",sizes:"(max-width: 640px) 64px, 96px",onError:()=>{const N=v+1;N<z.length?q(N):q(-1)}}):e.jsxs("svg",{viewBox:"0 0 128 128",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet","aria-hidden":!0,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"qdTg",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffe795"}),e.jsx("stop",{offset:"45%",stopColor:"#ffd34d"}),e.jsx("stop",{offset:"75%",stopColor:"#f0a700"}),e.jsx("stop",{offset:"100%",stopColor:"#b86a00"})]}),e.jsxs("linearGradient",{id:"qdQM",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#6d28d9"}),e.jsx("stop",{offset:"100%",stopColor:"#7c3aed"})]})]}),e.jsx("path",{d:"M28 30c-10 0-18 10-16 20 2 10 14 14 24 11",fill:"none",stroke:"#f0b000",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M100 30c10 0 18 10 16 20-2 10-14 14-24 11",fill:"none",stroke:"#f0b000",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M28 22h72c0 24-10 36-26 41v9c0 7-6 13-14 13s-14-6-14-13v-9C38 58 28 46 28 22Z",fill:"url(#qdTg)"}),e.jsx("rect",{x:"56",y:"72",width:"16",height:"10",rx:"3",fill:"url(#qdTg)"}),e.jsx("rect",{x:"44",y:"82",width:"40",height:"12",rx:"4",fill:"url(#qdTg)"}),e.jsx("rect",{x:"36",y:"94",width:"56",height:"10",rx:"5",fill:"url(#qdTg)"}),e.jsx("text",{x:"64",y:"46",textAnchor:"middle",dominantBaseline:"middle",fontSize:"32",fontWeight:"900",fill:"url(#qdQM)",stroke:"#2b1a59",strokeWidth:"3",paintOrder:"stroke fill",children:"?"})]})})})})},me=()=>{const y=ee(),{user:g,userProfile:j}=F(),[m,v]=b.useState([]),[q,z]=b.useState(!0),[L,N]=b.useState({}),[se,G]=b.useState(0),P=b.useRef(new Set),w=b.useCallback(async()=>{if(!g)return;if(!A){v([]);return}const t=await O();if(!t){v([]);return}try{const n=new Date().toISOString(),d="id, slot_id, title, start_time, end_time, prize_type, prizes",{data:l,error:o}=await t.from("my_quizzes_view").select(d).gt("end_time",n).order("start_time",{ascending:!0}).limit(20);if(o)throw o;const r="id, slot_id, title, end_time, prize_type, prizes, leaderboard",{data:c,error:a}=await t.from("my_quizzes_view").select(r).lte("end_time",n).order("end_time",{ascending:!1}).limit(5);if(a)throw a;v([...l||[],...c||[]])}catch(n){console.error("fetchMyQuizzes failed",n),v([])}},[g]);b.useEffect(()=>{if(!g||!A||!Array.isArray(m)||m.length===0)return;const t=Date.now(),n=m.filter(r=>{try{return!(!(r!=null&&r.id)||!(r!=null&&r.end_time)||!(new Date(r.end_time).getTime()<=t)||!(!Array.isArray(r.leaderboard)||r.leaderboard.length===0)||P.current.has(r.id))}catch(c){return!1}});if(!(Z({defaultValue:!0})||(j==null?void 0:j.role)==="admin")||n.length===0)return;let l=!1;const o=(r,c=2500)=>{try{if(typeof window!="undefined"&&"requestIdleCallback"in window){window.requestIdleCallback(()=>{try{r()}catch(a){}},{timeout:c});return}}catch(a){}setTimeout(()=>{try{r()}catch(a){}},Math.max(0,c))};for(const r of n)P.current.add(r.id);return o(async()=>{try{const r=await O();if(!r||l||!(await Promise.allSettled(n.map(s=>X(r,s.id)))).some(s=>s.status==="fulfilled"&&s.value===!0)||l)return;const{data:p}=await r.from("my_quizzes_view").select("*");if(l)return;v((p||[]).map(s=>({...s})))}catch(r){}}),()=>{l=!0}},[g,j==null?void 0:j.role,m]),b.useEffect(()=>{if(typeof window!="undefined"&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().catch(()=>{}),!g){z(!1),v([]),N({});return}(async()=>{z(!0);try{await w()}finally{z(!1)}})();const n=setInterval(w,3e4),d=()=>{document.visibilityState==="visible"&&w()};document.addEventListener("visibilitychange",d);const l=()=>{w()};return window.addEventListener("online",l),()=>{clearInterval(n),document.removeEventListener("visibilitychange",d),window.removeEventListener("online",l)}},[g,w]);const Y=(()=>{var t,n;try{const d=typeof window!="undefined"&&window.__QUIZ_DANGAL_ENV__?window.__QUIZ_DANGAL_ENV__:{},l=(n=(t={}.VITE_ENABLE_REALTIME)!=null?t:d.VITE_ENABLE_REALTIME)!=null?n:"1",o=String(l).toLowerCase();return o==="1"||o==="true"||o==="yes"}catch(d){return!0}})(),B=(()=>{try{if(typeof window=="undefined"||!window.isSecureContext||!("WebSocket"in window)||navigator&&navigator.onLine===!1)return!1;const t=navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection)||null;return!(t&&(t.saveData||typeof t.effectiveType=="string"&&/(^|\b)2g(\b|$)/i.test(t.effectiveType)))}catch(t){return!1}})(),$=Y&&B&&!!g&&!!A;if(Q({enabled:$,channelName:"myquizzes-results-channel",event:"INSERT",table:"quiz_results",onChange:()=>{w();try{typeof window!="undefined"&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Quiz Result Ready",{body:"Your quiz results are available. Tap to view."})}catch(t){}},joinTimeoutMs:5e3}),Q({enabled:$,channelName:"myquizzes-results-update-channel",event:"UPDATE",table:"quiz_results",onChange:()=>{w()},joinTimeoutMs:5e3}),Q({enabled:$,channelName:"myquizzes-slots-channel",event:"*",table:"quiz_slots",onChange:()=>{w()},joinTimeoutMs:5e3}),b.useEffect(()=>{let t=null;try{const n=Date.now();(m||[]).some(l=>{const o=l.start_time?new Date(l.start_time).getTime():0,r=l.end_time?new Date(l.end_time).getTime():0;return o&&n<o||o&&r&&n>=o&&n<r})&&(t=setInterval(()=>{G(l=>(l+1)%1e6)},1e3))}catch(n){}return()=>{t&&clearInterval(t)}},[m]),b.useEffect(()=>{const t=async()=>{try{if(!A){N({});return}const n=await O();if(!n){N({});return}const d=Date.now(),l=(m||[]).filter(a=>a.end_time&&d<new Date(a.end_time).getTime()),o=l.filter(a=>!a.slot_id).map(a=>a.id),r=l.filter(a=>!!a.slot_id).map(a=>a.slot_id),c={};if(o.length){const{data:a,error:p}=await n.rpc("get_engagement_counts_many",{p_quiz_ids:o});if(p)throw p;for(const s of a||[]){const u=s.pre_joined||0,x=s.joined||0;c[s.quiz_id]=u+x}}if(r.length){const a=s=>{var h,S,k,T,C,E,I;const u=Number((k=(S=(h=s==null?void 0:s.participants_joined)!=null?h:s==null?void 0:s.joined_count)!=null?S:s==null?void 0:s.joined)!=null?k:0),x=Number((E=(C=(T=s==null?void 0:s.participants_pre)!=null?T:s==null?void 0:s.pre_joined_count)!=null?C:s==null?void 0:s.pre_joined)!=null?E:0),f=Number((I=s==null?void 0:s.participants_total)!=null?I:u+x);return Number.isFinite(f)?f:0},p=s=>(s==null?void 0:s.id)||(s==null?void 0:s.slot_id)||null;try{const{data:s,error:u}=await n.from("quiz_slots_view").select("*").in("id",r);if(u)throw u;for(const x of s||[]){const f=p(x);f&&(c[f]=a(x))}}catch(s){try{const{data:u,error:x}=await n.from("quiz_slots_view").select("*").in("slot_id",r);if(x)throw x;for(const f of u||[]){const h=p(f);h&&(c[h]=a(f))}}catch(u){}}}N(c)}catch(n){N({})}};m&&m.length&&t()},[m]),q)return e.jsx("div",{className:"relative pt-14 mx-auto max-w-5xl px-4 py-4",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[e.jsxs("div",{className:"qd-card rounded-2xl border border-slate-800/70 bg-slate-950/70 p-4 sm:p-6 mb-6 animate-pulse",children:[e.jsx("div",{className:"h-7 w-32 bg-slate-700 rounded mb-4"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"h-7 w-28 bg-slate-800 rounded-full"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-4 w-28 bg-slate-700 rounded mb-3"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-5 flex-1 bg-slate-700 rounded"}),e.jsx("div",{className:"h-5 w-16 bg-slate-800 rounded-full"})]}),e.jsx("div",{className:"flex gap-2 mb-3",children:[1,2,3].map(n=>e.jsx("div",{className:"h-8 w-16 bg-slate-800 rounded-lg"},n))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsx("div",{className:"h-12 bg-slate-800 rounded-md"}),e.jsx("div",{className:"h-12 bg-slate-800 rounded-md"})]}),e.jsx("div",{className:"h-10 bg-gradient-to-r from-slate-700 to-slate-600 rounded-lg"})]},t))})]}),e.jsx("div",{className:"h-4 w-20 bg-slate-700 rounded mb-3"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-2xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-32 bg-slate-700 rounded mb-2"}),e.jsx("div",{className:"h-3 w-20 bg-slate-800 rounded"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3].map(n=>e.jsx("div",{className:"h-14 bg-slate-800 rounded-xl"},n))})]},t))})]})});if(m.length===0)return e.jsxs("div",{className:"relative pt-14 mx-auto max-w-5xl px-4 py-2",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden","aria-hidden":"true",children:[e.jsx(i.div,{className:"absolute top-10 -left-10 w-64 h-64 rounded-full bg-gradient-to-br from-orange-500/25 via-pink-500/20 to-purple-600/25 blur-[80px]",animate:{x:[0,40,0],y:[0,30,0],scale:[1,1.2,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(i.div,{className:"absolute top-1/3 -right-10 w-72 h-72 rounded-full bg-gradient-to-br from-violet-600/25 via-blue-500/20 to-cyan-500/25 blur-[90px]",animate:{x:[0,-35,0],y:[0,40,0],scale:[1.1,1,1.1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(i.div,{className:"absolute bottom-20 left-1/3 w-56 h-56 rounded-full bg-gradient-to-br from-emerald-500/20 via-teal-500/15 to-cyan-500/20 blur-[70px]",animate:{x:[0,25,0],y:[0,-25,0],scale:[1,1.15,1]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}})]}),e.jsx("div",{className:"container mx-auto px-4 py-2 max-w-lg relative z-10",children:e.jsx("div",{className:"flex items-start justify-center pt-2",children:e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative text-center text-slate-100 p-2",children:[e.jsx(i.div,{className:"mb-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx(i.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(M,{className:"w-9 h-9 text-amber-400 drop-shadow-[0_0_15px_rgba(251,191,36,0.7)]"})}),e.jsx("h1",{className:"text-3xl font-black bg-gradient-to-r from-orange-300 via-pink-300 to-violet-400 bg-clip-text text-transparent drop-shadow-sm",children:"My Quizzes"})]})}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"relative max-w-sm mx-auto",children:[e.jsx(i.div,{className:"absolute -top-6 -left-6 w-20 h-20 rounded-full bg-gradient-to-br from-orange-500 to-pink-600 opacity-25 blur-2xl",animate:{scale:[1,1.3,1],x:[0,10,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),e.jsx(i.div,{className:"absolute -bottom-6 -right-6 w-24 h-24 rounded-full bg-gradient-to-br from-violet-500 to-purple-600 opacity-25 blur-2xl",animate:{scale:[1.2,1,1.2],x:[0,-10,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut"}}),e.jsx("div",{className:"relative rounded-3xl overflow-hidden",style:{background:"linear-gradient(135deg, rgba(251,146,60,0.15), rgba(236,72,153,0.15), rgba(168,85,247,0.15))",padding:"2px"},children:e.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-slate-800/95 to-slate-900/98 backdrop-blur-xl px-6 py-10 overflow-hidden relative",children:[e.jsx(i.div,{className:"absolute inset-0 rounded-3xl",style:{background:"linear-gradient(90deg, transparent, rgba(236,72,153,0.4), rgba(168,85,247,0.3), transparent)"},animate:{x:["-100%","100%"]},transition:{duration:2.5,repeat:1/0,ease:"linear",repeatDelay:1}}),e.jsx(i.div,{className:"absolute top-4 right-8 w-2 h-2 rounded-full bg-orange-400",animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:0}}),e.jsx(i.div,{className:"absolute top-12 left-6 w-1.5 h-1.5 rounded-full bg-pink-400",animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:.5}}),e.jsx(i.div,{className:"absolute bottom-16 right-6 w-1 h-1 rounded-full bg-violet-400",animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:1}}),e.jsx(i.div,{className:"absolute top-1/2 left-4 w-1.5 h-1.5 rounded-full bg-cyan-400",animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:1.5}}),e.jsxs("div",{className:"relative mx-auto mb-6 w-24 h-24",children:[e.jsx(i.div,{className:"absolute inset-0 rounded-full",style:{border:"2px dashed",borderImage:"linear-gradient(135deg, #f97316, #ec4899, #8b5cf6) 1"},animate:{rotate:360},transition:{duration:15,repeat:1/0,ease:"linear"}}),e.jsx(i.div,{className:"absolute inset-2 rounded-full bg-gradient-to-br from-orange-400 via-pink-500 to-violet-500 p-[3px]",animate:{scale:[1,1.08,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsx("div",{className:"w-full h-full rounded-full grid place-items-center bg-slate-900",children:e.jsx(i.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e.jsx(ae,{centered:!0,fitParent:!0})})})})]}),e.jsx("h3",{className:"text-2xl font-black bg-gradient-to-r from-orange-300 via-pink-300 to-violet-400 bg-clip-text text-transparent",children:"No Quizzes Yet"}),e.jsx("p",{className:"mt-3 text-sm text-slate-400 leading-relaxed",children:"Start your journey! Join your first quiz and climb the leaderboard."}),e.jsx("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2",children:[{icon:"üéØ",text:"Daily Quizzes",gradient:"from-orange-500/20 to-pink-500/10",border:"border-orange-500/40",textColor:"text-orange-300"},{icon:"ü™ô",text:"Win Coins",gradient:"from-amber-500/20 to-yellow-500/10",border:"border-amber-500/40",textColor:"text-amber-300"},{icon:"üèÜ",text:"Leaderboards",gradient:"from-emerald-500/20 to-teal-500/10",border:"border-emerald-500/40",textColor:"text-emerald-300"}].map((t,n)=>e.jsxs(i.span,{className:`px-3 py-1.5 rounded-full border ${t.border} bg-gradient-to-r ${t.gradient} ${t.textColor} text-xs font-semibold`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3+n*.1},whileHover:{scale:1.08,y:-2},children:[t.icon," ",t.text]},t.text))}),e.jsxs(i.button,{onClick:()=>y("/"),className:"relative mt-6 w-full py-3.5 rounded-xl text-white font-bold text-sm overflow-hidden group",style:{background:"linear-gradient(135deg, #f97316 0%, #ec4899 35%, #8b5cf6 65%, #6366f1 100%)",backgroundSize:"200% 100%",boxShadow:"0 4px 20px rgba(236, 72, 153, 0.35), 0 0 30px -5px rgba(139, 92, 246, 0.3)"},whileHover:{scale:1.02,backgroundPosition:"100% 50%"},whileTap:{scale:.98},children:[e.jsx("span",{className:"relative z-10",children:"üöÄ Explore Quizzes"}),e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,repeatDelay:1}})]})]})})]})]})})})]});const _=Date.now(),D=m.filter(t=>t.end_time&&_<new Date(t.end_time).getTime()),W=m.filter(t=>t.end_time&&_>=new Date(t.end_time).getTime()).sort((t,n)=>{const d=t.end_time?new Date(t.end_time).getTime():0;return(n.end_time?new Date(n.end_time).getTime():0)-d}).slice(0,5);return D.sort((t,n)=>{const d=t.start_time?new Date(t.start_time).getTime():0,l=t.end_time?new Date(t.end_time).getTime():0,o=n.start_time?new Date(n.start_time).getTime():0,r=n.end_time?new Date(n.end_time).getTime():0,c=d&&l&&_>=d&&_<l,a=o&&r&&_>=o&&_<r;return c!==a?c?-1:1:d-o}),e.jsxs("div",{className:"relative pt-16 pb-8 px-3 mx-auto max-w-md min-h-screen",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden","aria-hidden":"true",children:[e.jsx(i.div,{className:"absolute top-20 -left-20 w-64 h-64 rounded-full bg-gradient-to-br from-orange-500/20 via-pink-500/15 to-purple-600/20 blur-[80px]",animate:{x:[0,30,0],y:[0,20,0],scale:[1,1.1,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(i.div,{className:"absolute top-1/3 -right-20 w-72 h-72 rounded-full bg-gradient-to-br from-violet-600/20 via-blue-500/15 to-cyan-500/20 blur-[90px]",animate:{x:[0,-25,0],y:[0,30,0],scale:[1.1,1,1.1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(i.div,{className:"absolute bottom-40 left-1/4 w-56 h-56 rounded-full bg-gradient-to-br from-emerald-500/15 via-teal-500/10 to-cyan-500/15 blur-[70px]",animate:{x:[0,20,0],y:[0,-20,0],scale:[1,1.15,1]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}})]}),e.jsx(J,{title:"My Quizzes ‚Äì Quiz Dangal",description:"Track the quizzes you have joined, monitor live rounds, and revisit completed contests on Quiz Dangal.",canonical:"https://quizdangal.com/my-quizzes/",robots:"noindex, nofollow"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(i.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"overflow-hidden",children:[e.jsx(i.div,{className:"text-center mb-8",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx(i.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(M,{className:"w-9 h-9 text-amber-400 drop-shadow-[0_0_15px_rgba(251,191,36,0.7)]"})}),e.jsx("h1",{className:"text-3xl font-black bg-gradient-to-r from-orange-300 via-pink-300 to-violet-400 bg-clip-text text-transparent drop-shadow-sm",children:"My Quizzes"})]})}),D.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs(i.div,{className:"flex items-center justify-between gap-3 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i.div,{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 grid place-items-center",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx(U,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-base font-bold bg-gradient-to-r from-emerald-300 to-teal-300 bg-clip-text text-transparent",children:"Live & Upcoming"})]}),e.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-emerald-500/20 border border-emerald-500/30 text-emerald-300",children:[D.length," quizzes"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:D.map((t,n)=>{var T,C,E;const d=t.start_time?new Date(t.start_time):null,l=t.end_time?new Date(t.end_time):null,o=d&&l&&_>=d.getTime()&&_<l.getTime(),r=o?Math.max(0,Math.floor((l.getTime()-Date.now())/1e3)):d?Math.max(0,Math.floor((d.getTime()-Date.now())/1e3)):0,c=d&&l?Math.max(1,l.getTime()-d.getTime()):null,a=o&&c?Math.min(100,Math.max(0,Math.round((Date.now()-d.getTime())/c*100))):null,p=Array.isArray(t.prizes)?t.prizes:[],s=t.prize_type||"coins",u=(T=p[0])!=null?T:0,x=(C=p[1])!=null?C:0,f=(E=p[2])!=null?E:0,h=I=>H(s,I,{fallback:0}).formatted,S=L[t.slot_id||t.id]||0,k=t.slot_id?`/quiz/slot/${t.slot_id}`:`/quiz/${t.id}`;return e.jsx(i.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:n*.06,duration:.3,ease:[.25,.46,.45,.94]},className:"quiz-slot-card cursor-pointer",onClick:()=>y(k),children:e.jsxs("div",{className:`quiz-slot-card-inner ${o?"quiz-slot-card-live":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"quiz-slot-lang",children:"üåê Hindi / English"}),e.jsxs("span",{className:`quiz-slot-badge ${o?"quiz-slot-badge-live":"quiz-slot-badge-upcoming"}`,children:[o&&e.jsx("span",{className:"quiz-slot-badge-dot"}),o?"LIVE":"UPCOMING"]})]}),e.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:t.title}),e.jsxs("div",{className:"quiz-slot-time-section",children:[e.jsxs("div",{className:"quiz-slot-time-row",children:[e.jsxs("div",{className:"quiz-slot-time-box",children:[e.jsx("span",{className:"quiz-slot-time-label",children:"START"}),e.jsx("span",{className:"quiz-slot-time-value",children:t.start_time?R(t.start_time):"‚Äî"})]}),e.jsx("div",{className:"quiz-slot-time-divider",children:"‚Üí"}),e.jsxs("div",{className:"quiz-slot-time-box",children:[e.jsx("span",{className:"quiz-slot-time-label",children:"END"}),e.jsx("span",{className:"quiz-slot-time-value",children:t.end_time?R(t.end_time):"‚Äî"})]})]}),r!==null&&e.jsxs("div",{className:`quiz-slot-timer ${o?"quiz-slot-timer-live":""}`,children:[e.jsx(V,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:o?"Ends in":"Starts in"}),e.jsxs("span",{className:"quiz-slot-timer-value",children:[String(Math.floor(r/60)).padStart(2,"0"),":",String(r%60).padStart(2,"0")]})]})]}),e.jsxs("div",{className:"quiz-slot-prize-section",children:[e.jsx("div",{className:"quiz-slot-prize-title",children:"üèÜ Prizes"}),e.jsxs("div",{className:"quiz-slot-prize-row",children:[e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-gold",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"1st"}),e.jsx("span",{className:"quiz-slot-prize-value",children:h(u)})]}),e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-silver",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"2nd"}),e.jsx("span",{className:"quiz-slot-prize-value",children:h(x)})]}),e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-bronze",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"3rd"}),e.jsx("span",{className:"quiz-slot-prize-value",children:h(f)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:"quiz-slot-stat",children:[e.jsx(te,{className:"w-3 h-3"})," ",S," Joined"]}),e.jsx("span",{className:"quiz-slot-stat quiz-slot-stat-joined",children:"‚úì You're In"})]}),a!==null&&e.jsx("div",{className:"w-full bg-slate-800/50 rounded-full h-1.5 mb-3 overflow-hidden",children:e.jsx("div",{className:"h-1.5 bg-emerald-500/80 rounded-full",style:{width:`${a}%`}})}),e.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),y(k)},onMouseEnter:()=>K("/quiz"),className:`quiz-slot-btn ${o?"quiz-slot-btn-live":"quiz-slot-btn-default"}`,children:[e.jsx(U,{className:"w-4 h-4 mr-1"})," PLAY"]})]})},`lu-${t.slot_id||t.id}`)})})]}),e.jsxs(i.div,{className:"mt-8 flex items-center justify-between gap-3 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i.div,{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-purple-600 grid place-items-center",animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0},children:e.jsx(M,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-base font-bold bg-gradient-to-r from-violet-300 to-purple-300 bg-clip-text text-transparent",children:"Finished"})]}),e.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-violet-500/20 border border-violet-500/30 text-violet-300",children:["Recent ",W.length]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:W.map((t,n)=>{var x,f;const d=new Date,l=new Date(t.end_time),o=l.toLocaleString([],{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}),r=Array.isArray(t.leaderboard)?t.leaderboard:[],c=d>=l&&r.length>0,a=c?r.find(h=>h.user_id===(g==null?void 0:g.id)):null,p=t.prize_type&&String(t.prize_type).trim()?t.prize_type:"coins",s=a!=null&&a.rank&&Array.isArray(t.prizes)?t.prizes[a.rank-1]:null,u=a!=null&&a.rank?H(p,s!=null?s:0,{fallback:0}).formatted:"‚Äî";return e.jsx(i.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:n*.06,duration:.3,ease:[.25,.46,.45,.94]},onClick:()=>y(t.slot_id?`/results/slot/${t.slot_id}`:`/results/${t.id}`),className:"quiz-slot-card cursor-pointer",children:e.jsxs("div",{className:"quiz-slot-card-inner",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"quiz-slot-lang",children:"üåê Hindi / English"}),e.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),o]})]}),e.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:t.title}),c?e.jsxs(i.div,{className:"mb-3 p-2.5 rounded-xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-white/10 overflow-hidden relative",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 via-violet-500/5 to-emerald-500/5",animate:{opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0}}),e.jsxs("div",{className:"relative flex items-stretch gap-1.5",children:[e.jsxs(i.div,{className:"flex-1 text-center py-2 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-600/10 border border-amber-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-t from-amber-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-amber-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Rank"}),e.jsxs(i.div,{className:"text-base font-black text-amber-400 drop-shadow-[0_0_8px_rgba(251,191,36,0.4)]",animate:{scale:(a==null?void 0:a.rank)<=3?[1,1.05,1]:1},transition:{duration:2,repeat:1/0},children:["#",(x=a==null?void 0:a.rank)!=null?x:"-"]})]}),(a==null?void 0:a.rank)<=3&&e.jsx(i.div,{className:"absolute -top-0.5 -right-0.5 text-[10px]",animate:{rotate:[0,15,-15,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:"üèÜ"})]}),e.jsxs(i.div,{className:"flex-1 text-center py-2 rounded-lg bg-gradient-to-br from-violet-500/20 to-purple-600/10 border border-violet-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-t from-violet-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-violet-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Score"}),e.jsx("div",{className:"text-base font-black text-violet-400 drop-shadow-[0_0_8px_rgba(139,92,246,0.4)]",children:(f=a==null?void 0:a.score)!=null?f:"-"})]})]}),e.jsxs(i.div,{className:"flex-1 text-center py-2 rounded-lg bg-gradient-to-br from-emerald-500/20 to-teal-600/10 border border-emerald-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(i.div,{className:"absolute inset-0 bg-gradient-to-t from-emerald-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-emerald-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Won"}),e.jsx(i.div,{className:"text-base font-black text-emerald-400 drop-shadow-[0_0_8px_rgba(52,211,153,0.4)]",animate:u!=="-"?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0,delay:.5},children:u})]}),u!=="-"&&u!=="0"&&e.jsx(i.div,{className:"absolute -top-0.5 -right-0.5 text-[10px]",animate:{y:[0,-2,0]},transition:{duration:1.5,repeat:1/0},children:"ü™ô"})]})]})]}):e.jsx(i.div,{className:"mb-3 py-3 rounded-xl bg-gradient-to-r from-slate-800/60 via-slate-700/40 to-slate-800/60 border border-white/5 text-center",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0},style:{backgroundSize:"200% 100%"},children:e.jsxs(i.span,{className:"text-xs text-slate-400 inline-flex items-center gap-2",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[e.jsx(i.span,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:"‚è≥"}),"Calculating Results..."]})}),e.jsxs("button",{type:"button",onClick:h=>{h.stopPropagation(),y(t.slot_id?`/results/slot/${t.slot_id}`:`/results/${t.id}`)},className:"quiz-slot-btn quiz-slot-btn-default",children:[e.jsx(M,{className:"w-4 h-4"})," VIEW RESULT"]})]})},t.slot_id||t.id)})})]})})]})};export{me as default};
