import{u as z,s as p,l as E,j as e,S as q}from"./index-IZyh5gpM.js";import{u as D,r as d,f as R}from"./router-CWIfZQRv.js";import{m as t,AnimatePresence as T}from"./motion-lite-CguNR5TK.js";import{T as F,b as H,L as M,g as Q}from"./icons-BNA5wz6Z.js";import"./supabase-cQshKuiM.js";import"./react-MKCYUrdX.js";const P=[{key:"all_time",label:"All-time"},{key:"monthly",label:"Monthly"},{key:"weekly",label:"Weekly"}],B=300*1e3;function J(l){try{const i=sessionStorage.getItem(`qd_lb_${l}`);if(!i)return null;const{data:y,ts:c}=JSON.parse(i);return Date.now()-c>B?null:y}catch(i){return null}}function U(l,i){try{sessionStorage.setItem(`qd_lb_${l}`,JSON.stringify({data:i,ts:Date.now()}))}catch(y){}}function Y(){const{search:l}=R();return d.useMemo(()=>new URLSearchParams(l),[l])}function ee(){var I,L,S,O;const l=D(),{userProfile:i}=z(),c=Y().get("period")||"all_time",[a,N]=d.useState([]),[v,w]=d.useState(!0),[h,_]=d.useState(""),[j,A]=d.useState(!1),g=d.useCallback(async s=>{const o=J(s);if(o){N(o),w(!1);return}w(!0),_("");try{if(!p)throw new Error("Supabase not configured");let r=[];if(s==="all_time"){const{data:n,error:b}=await p.rpc("get_all_time_leaderboard_v2",{limit_rows:100,offset_rows:0,max_streak_limit:30});if(!b)r=n||[];else{const{data:u,error:m}=await p.rpc("get_all_time_leaderboard",{limit_rows:100,offset_rows:0,max_streak_limit:30});if(m)throw m;r=u||[]}}else{const n=s==="weekly"?7:30,{data:b,error:u}=await p.rpc("get_leaderboard_v2",{p_period:s,limit_rows:100,offset_rows:0,max_streak_limit:n});if(!u)r=b||[];else{const{data:m,error:$}=await p.rpc("get_leaderboard",{p_period:s,limit_rows:100,offset_rows:0,max_streak_limit:n});if($)throw $;r=m||[]}}U(s,r),N(r)}catch(r){const n=r.message||"Failed to load leaderboard.";E.error("Leaderboard fetch error:",r),_(n)}finally{w(!1)}},[]);d.useEffect(()=>{g(c)},[c,g]);const C=s=>{l(`?period=${s}`)},f=d.useMemo(()=>i!=null&&i.id?a.findIndex(s=>s.user_id===i.id):-1,[a,i]),x=f>=0?a[f]:null,k=f>=0?f+1:null;return e.jsxs("div",{className:"relative pt-12 sm:pt-16 min-h-screen",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden","aria-hidden":"true",children:[e.jsx(t.div,{className:"absolute top-20 left-[10%] w-2 h-2 rounded-full bg-purple-400/30",animate:{y:[0,-30,0],opacity:[.3,.7,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),e.jsx(t.div,{className:"absolute top-40 right-[15%] w-1.5 h-1.5 rounded-full bg-pink-400/30",animate:{y:[0,-25,0],opacity:[.2,.6,.2]},transition:{duration:3.5,repeat:1/0,ease:"easeInOut",delay:.5}}),e.jsx(t.div,{className:"absolute top-60 left-[20%] w-1 h-1 rounded-full bg-amber-400/40",animate:{y:[0,-20,0],opacity:[.4,.8,.4]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:1}}),e.jsx(t.div,{className:"absolute top-32 right-[25%] w-1.5 h-1.5 rounded-full bg-cyan-400/30",animate:{y:[0,-35,0],opacity:[.3,.6,.3]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:.8}})]}),e.jsx(q,{title:"Leaderboards â€“ Quiz Dangal | Top Quiz Players",description:"See the top players on Quiz Dangal leaderboards. Compete in daily opinion and knowledge quizzes, win coins, and climb ranks.",canonical:"https://quizdangal.com/leaderboards/",alternateLocales:["hi_IN","en_US"],keywords:["quiz leaderboard","top quiz players","quizdangal leaderboard","daily quiz rankings"],author:"Quiz Dangal",datePublished:"2025-01-01",dateModified:"2025-12-29",jsonLd:[{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://quizdangal.com/"},{"@type":"ListItem",position:2,name:"Leaderboards",item:"https://quizdangal.com/leaderboards/"}]}]}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-4 space-y-2",children:[e.jsx(t.div,{className:"text-center mb-2",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(t.div,{className:"inline-flex items-center gap-3 mb-3",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1},children:[e.jsx(t.div,{animate:{rotate:[0,10,-10,0],y:[0,-4,0],scale:[1,1.1,1]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(F,{className:"w-9 h-9 text-amber-400 drop-shadow-[0_0_15px_rgba(251,191,36,0.6)]"})}),e.jsxs(t.h1,{className:"text-4xl sm:text-5xl font-black tracking-tight relative",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsx("span",{className:"bg-gradient-to-r from-amber-200 via-yellow-400 to-orange-400 bg-clip-text text-transparent drop-shadow-lg",children:"Leaderboard"}),e.jsx(t.span,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent bg-clip-text",animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"linear",repeatDelay:2}})]})]})}),e.jsx("div",{className:"flex justify-center gap-6 sm:gap-8",children:P.map((s,o)=>e.jsx(t.button,{onClick:()=>C(s.key),initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{y:-2},whileTap:{scale:.95},transition:{delay:o*.05},className:"relative py-2",children:e.jsx("span",{className:`text-sm font-semibold transition-all duration-300 ${c===s.key?"text-white":"text-slate-500 hover:text-slate-300"}`,children:s.label})},s.key))}),e.jsx(T,{children:!v&&!h&&a.length>=1&&e.jsxs(t.div,{layout:!0,className:"relative py-2",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsx("div",{className:"absolute inset-0 flex justify-center",children:e.jsx(t.div,{className:"w-40 h-40 bg-amber-500/20 rounded-full blur-[80px]",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:3,repeat:1/0}})}),e.jsxs("div",{className:"relative flex items-end justify-center gap-1",children:[a[1]&&e.jsxs(t.div,{initial:{opacity:0,x:-40,scale:.7},animate:{opacity:1,x:0,scale:1},transition:{delay:.25,type:"spring",stiffness:100},className:"flex flex-col items-center w-24 sm:w-28",children:[e.jsxs(t.div,{className:"relative",whileHover:{scale:1.05},children:[e.jsx(t.div,{className:"relative w-14 h-14 sm:w-16 sm:h-16 rounded-full bg-gradient-to-br from-slate-200 via-slate-400 to-slate-500 p-[2px]",animate:{boxShadow:["0 0 16px rgba(148,163,184,0.25)","0 0 26px rgba(148,163,184,0.45)","0 0 16px rgba(148,163,184,0.25)"]},transition:{duration:2.2,repeat:1/0,ease:"easeInOut"},children:e.jsxs("div",{className:"relative w-full h-full rounded-full bg-slate-900 flex items-center justify-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-40 bg-[radial-gradient(circle_at_top,rgba(255,255,255,0.25),transparent_60%)]"}),e.jsx("div",{className:"absolute inset-0 opacity-25 bg-[radial-gradient(circle_at_center,rgba(148,163,184,0.3),transparent_70%)]"}),e.jsx(t.div,{className:"absolute inset-0 opacity-40 bg-[conic-gradient(from_0deg,transparent,rgba(148,163,184,0.5),transparent)]",animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"}}),e.jsx(t.span,{className:"relative text-2xl sm:text-3xl font-black bg-gradient-to-b from-white via-slate-200 to-slate-400 bg-clip-text text-transparent drop-shadow-lg",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"2"})]})}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-6 h-6 rounded-full bg-gradient-to-br from-slate-200 to-slate-500 flex items-center justify-center text-xs font-black text-slate-900 shadow-lg border-2 border-slate-900",children:"2"})]}),e.jsx("span",{className:"mt-2 text-[10px] sm:text-xs font-semibold text-white/80 max-w-full truncate text-center px-1",children:a[1].username?`@${a[1].username}`:a[1].full_name||"Anonymous"}),e.jsx("span",{className:"text-sm font-bold text-slate-300",children:((I=a[1].leaderboard_score)!=null?I:0).toFixed(0)}),e.jsx("div",{className:"mt-2 w-full h-14 sm:h-16 rounded-t-lg bg-gradient-to-b from-slate-500 via-slate-600 to-slate-700 flex items-center justify-center border-t border-slate-400/40",children:e.jsx("span",{className:"text-xl font-black text-white/20",children:"2"})})]}),a[0]&&e.jsxs(t.div,{initial:{opacity:0,y:-40,scale:.7},animate:{opacity:1,y:0,scale:1},transition:{delay:.15,type:"spring",stiffness:100},className:"flex flex-col items-center w-28 sm:w-32 -mt-6",children:[e.jsx(t.div,{animate:{y:[0,-6,0],rotate:[-5,5,-5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"mb-1",children:e.jsx(H,{className:"w-7 h-7 sm:w-8 sm:h-8 text-amber-400 drop-shadow-[0_0_16px_rgba(251,191,36,0.8)]"})}),e.jsxs(t.div,{className:"relative",whileHover:{scale:1.05},children:[e.jsx(t.div,{className:"relative w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-amber-300 via-yellow-400 to-orange-500 p-[3px]",animate:{boxShadow:["0 0 18px rgba(251,191,36,0.35)","0 0 30px rgba(251,191,36,0.65)","0 0 18px rgba(251,191,36,0.35)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:e.jsxs("div",{className:"relative w-full h-full rounded-full bg-slate-900 flex items-center justify-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-45 bg-[radial-gradient(circle_at_top,rgba(255,255,255,0.3),transparent_60%)]"}),e.jsx("div",{className:"absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_center,rgba(251,191,36,0.35),transparent_70%)]"}),e.jsx(t.div,{className:"absolute inset-0 opacity-50 bg-[conic-gradient(from_0deg,transparent,rgba(251,191,36,0.6),transparent)]",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"}}),e.jsx(t.span,{className:"relative text-3xl sm:text-4xl font-black bg-gradient-to-b from-amber-200 via-yellow-400 to-orange-500 bg-clip-text text-transparent drop-shadow-lg",animate:{scale:[1,1.08,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"1"})]})}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-7 h-7 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-sm font-black text-amber-950 shadow-lg border-2 border-slate-900",children:"1"})]}),e.jsx("span",{className:"mt-2 text-xs sm:text-sm font-bold text-white max-w-full truncate text-center px-1",children:a[0].username?`@${a[0].username}`:a[0].full_name||"Anonymous"}),e.jsx("span",{className:"text-base sm:text-lg font-bold bg-gradient-to-r from-amber-300 to-yellow-200 bg-clip-text text-transparent",children:((L=a[0].leaderboard_score)!=null?L:0).toFixed(0)}),e.jsx("div",{className:"mt-2 w-full h-20 sm:h-24 rounded-t-lg bg-gradient-to-b from-amber-500 via-amber-600 to-amber-700 flex items-center justify-center border-t-2 border-amber-400/60 shadow-lg shadow-amber-600/40",children:e.jsx(t.span,{className:"text-2xl sm:text-3xl font-black text-amber-300/30",animate:{opacity:[.3,.5,.3]},transition:{duration:2,repeat:1/0},children:"1"})})]}),a[2]&&e.jsxs(t.div,{initial:{opacity:0,x:40,scale:.7},animate:{opacity:1,x:0,scale:1},transition:{delay:.35,type:"spring",stiffness:100},className:"flex flex-col items-center w-24 sm:w-28",children:[e.jsxs(t.div,{className:"relative",whileHover:{scale:1.05},children:[e.jsx(t.div,{className:"relative w-14 h-14 sm:w-16 sm:h-16 rounded-full bg-gradient-to-br from-orange-400 via-amber-500 to-orange-600 p-[2px]",animate:{boxShadow:["0 0 16px rgba(251,146,60,0.25)","0 0 26px rgba(251,146,60,0.45)","0 0 16px rgba(251,146,60,0.25)"]},transition:{duration:2.2,repeat:1/0,ease:"easeInOut"},children:e.jsxs("div",{className:"relative w-full h-full rounded-full bg-slate-900 flex items-center justify-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-40 bg-[radial-gradient(circle_at_top,rgba(255,255,255,0.25),transparent_60%)]"}),e.jsx("div",{className:"absolute inset-0 opacity-25 bg-[radial-gradient(circle_at_center,rgba(251,146,60,0.3),transparent_70%)]"}),e.jsx(t.div,{className:"absolute inset-0 opacity-40 bg-[conic-gradient(from_0deg,transparent,rgba(251,146,60,0.5),transparent)]",animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"}}),e.jsx(t.span,{className:"relative text-2xl sm:text-3xl font-black bg-gradient-to-b from-orange-200 via-orange-400 to-amber-600 bg-clip-text text-transparent drop-shadow-lg",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"3"})]})}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-6 h-6 rounded-full bg-gradient-to-br from-orange-400 to-amber-500 flex items-center justify-center text-xs font-black text-orange-950 shadow-lg border-2 border-slate-900",children:"3"})]}),e.jsx("span",{className:"mt-2 text-[10px] sm:text-xs font-semibold text-white/80 max-w-full truncate text-center px-1",children:a[2].username?`@${a[2].username}`:a[2].full_name||"Anonymous"}),e.jsx("span",{className:"text-sm font-bold text-orange-300",children:((S=a[2].leaderboard_score)!=null?S:0).toFixed(0)}),e.jsx("div",{className:"mt-2 w-full h-10 sm:h-12 rounded-t-lg bg-gradient-to-b from-orange-500 via-orange-600 to-orange-700 flex items-center justify-center border-t border-orange-400/40",children:e.jsx("span",{className:"text-xl font-black text-white/20",children:"3"})})]})]})]})}),!v&&!h&&x&&e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-0.5 p-3 rounded-xl bg-gradient-to-r from-violet-600/20 to-pink-600/20 border border-violet-500/40 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-violet-500 to-pink-500 text-white font-bold text-sm flex items-center justify-center shadow-md",children:["#",k]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white text-sm",children:x.username?`@${x.username}`:x.full_name||"You"}),e.jsx("div",{className:"text-xs text-violet-400",children:"Your Rank"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:Number((O=x.leaderboard_score)!=null?O:0).toFixed(0)}),e.jsx("div",{className:"text-xs text-violet-400/70",children:"points"})]})]})}),e.jsx("div",{className:"rounded-xl bg-slate-800/30 backdrop-blur-sm border border-slate-700/40 overflow-hidden",children:v?e.jsxs("div",{className:"py-16 flex flex-col items-center text-slate-400",children:[e.jsx(M,{className:"h-6 w-6 animate-spin text-indigo-400 mb-2"}),e.jsx("span",{className:"text-sm",children:"Loading leaderboard..."})]}):h?e.jsxs("div",{className:"py-12 text-center px-4",children:[e.jsx("div",{className:"text-red-400 text-sm font-medium mb-3",children:h}),e.jsx("button",{type:"button",onClick:()=>g(c),className:"px-4 py-2 rounded-full text-xs font-medium bg-gradient-to-r from-indigo-500 to-violet-500 text-white hover:shadow-lg hover:shadow-indigo-500/25 transition-all",children:"Retry"})]}):a.length===0?e.jsx("div",{className:"py-12 text-center text-slate-400 px-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm",children:"No leaderboard data yet."}),e.jsx("div",{className:"text-xs text-slate-500",children:"Try selecting All-time or refresh the page."}),e.jsx("button",{type:"button",onClick:()=>g(c),className:"mt-3 px-4 py-2 rounded-full text-xs font-medium bg-gradient-to-r from-indigo-500 to-violet-500 text-white hover:shadow-lg hover:shadow-indigo-500/25 transition-all",children:"Refresh"})]})}):e.jsxs(t.div,{layout:!0,className:"divide-y divide-slate-700/50",children:[(j?a:a.slice(0,5)).map((s,o)=>{var m;const r=s.rank||o+1,n=k===r,b=r<=3,u=s.username?`@${s.username}`:s.full_name||"Anonymous";return e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:o*.03},className:`group relative flex items-center gap-3 px-4 py-3 transition-colors hover:bg-slate-700/30 ${n?"bg-indigo-500/10":""}`,children:[e.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold shrink-0 ${b?r===1?"bg-gradient-to-br from-amber-400 to-yellow-500 text-amber-900 shadow-lg shadow-amber-500/30":r===2?"bg-gradient-to-br from-slate-300 to-slate-400 text-slate-700 shadow-lg shadow-slate-400/20":"bg-gradient-to-br from-orange-400 to-amber-500 text-orange-900 shadow-lg shadow-orange-500/20":"bg-slate-700/80 text-slate-300"} ${n?"ring-2 ring-indigo-400/50":""}`,children:r}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:`text-sm font-semibold truncate ${n?"text-white":"text-slate-200"}`,children:u})}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("div",{className:"text-base font-bold bg-gradient-to-r from-white to-violet-200 bg-clip-text text-transparent",children:Number((m=s.leaderboard_score)!=null?m:0).toFixed(1)}),e.jsx("div",{className:"text-[9px] text-slate-500 font-medium uppercase",children:"pts"})]})]},s.user_id||`row-${r}-${o}`)}),a.length>5&&e.jsx("div",{className:"py-2 flex justify-center bg-slate-800/20",children:e.jsx("button",{type:"button",onClick:()=>A(!j),className:"inline-flex items-center gap-1 px-4 py-1.5 rounded-full text-xs font-medium text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors",children:j?e.jsx(e.Fragment,{children:"Show less"}):e.jsxs(e.Fragment,{children:["Show All Players ",e.jsx(Q,{className:"w-3 h-3"})]})})})]})})]})]})}export{ee as default};
