import{j as n}from"./index-12f46b02.js";import{r as c}from"./react-63c462fe.js";import{a9 as h}from"./icons-2bdec3f2.js";import"./supabase-24c2e735.js";import"./router-d6d570a4.js";const g=()=>{const[w,p]=c.useState(!1),[d,a]=c.useState(null);c.useEffect(()=>{if(typeof window=="undefined")return;const e=typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)"):null;p((()=>{var t;try{return!!(e!=null&&e.matches||((t=window.navigator)==null?void 0:t.standalone)===!0)}catch(i){return!1}})());const r=t=>{var i;p(!!(t!=null&&t.matches)||((i=window.navigator)==null?void 0:i.standalone)===!0)};if(e)try{e.addEventListener("change",r)}catch(t){e.addListener&&e.addListener(r)}const s=t=>{t.preventDefault(),a(t)},o=()=>{a(null)};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",o),()=>{if(window.removeEventListener("beforeinstallprompt",s),window.removeEventListener("appinstalled",o),e)try{e.removeEventListener("change",r)}catch(t){e.removeListener&&e.removeListener(r)}}},[]);const f=(e=2500)=>new Promise(l=>{if(typeof window=="undefined")return l(null);let r=!1;const s=t=>{if(!r){r=!0;try{window.removeEventListener("beforeinstallprompt",o,{capture:!1})}catch(i){}l(t)}},o=t=>{try{t.preventDefault()}catch(i){}a(t),s(t)};try{window.addEventListener("beforeinstallprompt",o,{once:!0})}catch(t){window.addEventListener("beforeinstallprompt",o)}window.setTimeout(()=>s(null),Math.max(0,e))}),u=async()=>{try{if(d){d.prompt(),await d.userChoice,a(null);return}try{typeof window!="undefined"&&"serviceWorker"in navigator&&window.isSecureContext&&await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"})}catch(l){}const e=await f(2500);e&&(e.prompt(),await e.userChoice,a(null))}catch(e){}};return w?null:n.jsxs("button",{onClick:u,className:"w-14 h-14 rounded-full btn-fire transition-all duration-300 transform hover:scale-105 flex items-center justify-center group relative overflow-hidden shadow-lg",style:{position:"fixed",bottom:"100px",right:"20px",zIndex:9999},"aria-label":"Install App",title:"Install App",children:[n.jsxs("svg",{className:"pointer-events-none absolute -top-2 left-1/2 -translate-x-1/2 w-6 h-6 opacity-70",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:[n.jsx("path",{d:"M12 2c1.5 2 2 3.5 2 5 0 1.5-.5 3-2 4-1.5-1-2-2.5-2-4 0-1.5.5-3 2-5Z",fill:"url(#flameGrad)"}),n.jsx("defs",{children:n.jsxs("linearGradient",{id:"flameGrad",x1:"12",y1:"2",x2:"12",y2:"11",gradientUnits:"userSpaceOnUse",children:[n.jsx("stop",{stopColor:"#fde047"}),n.jsx("stop",{offset:"1",stopColor:"#f97316"})]})})]}),n.jsx("div",{className:"absolute inset-0"}),n.jsx(h,{className:"w-5 h-5 relative z-10 drop-shadow text-white"}),n.jsx("span",{className:"hidden group-hover:block absolute right-16 bg-gray-900/90 backdrop-blur text-white px-2 py-1 rounded text-xs whitespace-nowrap border border-white/10 shadow",children:"Install App"})]})};export{g as default};
