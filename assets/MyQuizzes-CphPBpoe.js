import{u as K,h as k,g as A,l as X,b as ee,a as te,j as e,S as ie,f as R,p as se,c as P,d as ae}from"./index-DqcaIE3D.js";import{u as ne,r as x}from"./router-D53U3OCX.js";import{m as l}from"./motion-lite-CITOPWQs.js";import{T as M,P as U,h as Z,o as re}from"./icons-DXR8YHNI.js";import"./supabase-BMIB7Fuo.js";import"./react-DQQtrPfG.js";const pe=()=>{const z=ne(),{user:f,userProfile:y}=K(),[m,N]=x.useState([]),[H,q]=x.useState(!0),[V,C]=x.useState({}),[le,W]=x.useState(0),O=x.useRef(new Set),Q=x.useRef(new Set),w=x.useRef(null),v=x.useCallback(async()=>{if(!f)return;if(!k){N([]);return}const t=await A();if(!t){N([]);return}try{const n=new Date().toISOString(),o="id, slot_id, title, start_time, end_time, prize_type, prizes",{data:i,error:d}=await t.from("my_quizzes_view").select(o).gt("end_time",n).order("start_time",{ascending:!0}).limit(20);if(d)throw d;const r="id, slot_id, title, end_time, prize_type, prizes, leaderboard",{data:c,error:s}=await t.from("my_quizzes_view").select(r).lte("end_time",n).order("end_time",{ascending:!1}).limit(5);if(s)throw s;N([...i||[],...c||[]])}catch(n){X.error("fetchMyQuizzes failed",n),N([])}},[f]);x.useEffect(()=>{if(!f||!k||!Array.isArray(m)||m.length===0)return;const t=Date.now(),n=m.filter(r=>{try{return!(!(r!=null&&r.id)||!(r!=null&&r.end_time)||!(new Date(r.end_time).getTime()<=t)||!(!Array.isArray(r.leaderboard)||r.leaderboard.length===0)||O.current.has(r.id))}catch(c){return!1}});if(!(ee({defaultValue:!0})||(y==null?void 0:y.role)==="admin")||n.length===0)return;let i=!1;const d=(r,c=2500)=>{try{if(typeof window!="undefined"&&"requestIdleCallback"in window){window.requestIdleCallback(()=>{try{r()}catch(s){}},{timeout:c});return}}catch(s){}setTimeout(()=>{try{r()}catch(s){}},Math.max(0,c))};for(const r of n)O.current.add(r.id);return d(async()=>{try{const r=await A();if(!r||i||!(await Promise.allSettled(n.map(a=>ae(r,a.id)))).some(a=>a.status==="fulfilled"&&a.value===!0)||i)return;const{data:h}=await r.from("my_quizzes_view").select("*");if(i)return;N((h||[]).map(a=>({...a})))}catch(r){}}),()=>{i=!0}},[f,y==null?void 0:y.role,m]),x.useEffect(()=>{if(typeof window!="undefined"&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().catch(()=>{}),!f){q(!1),N([]),C({});return}(async()=>{q(!0);try{await v()}finally{q(!1)}})();const n=setInterval(v,3e4),o=()=>{document.visibilityState==="visible"&&v()};document.addEventListener("visibilitychange",o);const i=()=>{v()};return window.addEventListener("online",i),()=>{clearInterval(n),document.removeEventListener("visibilitychange",o),window.removeEventListener("online",i)}},[f,v]);const B=(()=>{var t;try{const o=(t=(typeof window!="undefined"&&window.__QUIZ_DANGAL_ENV__?window.__QUIZ_DANGAL_ENV__:{}).VITE_ENABLE_REALTIME)!=null?t:"1",i=String(o).toLowerCase();return i==="1"||i==="true"||i==="yes"}catch(n){return!0}})(),F=(()=>{try{if(typeof window=="undefined"||!window.isSecureContext||!("WebSocket"in window)||navigator&&navigator.onLine===!1)return!1;const t=navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection)||null;return!(t&&(t.saveData||typeof t.effectiveType=="string"&&/(^|\b)2g(\b|$)/i.test(t.effectiveType)))}catch(t){return!1}})(),Y=B&&F&&!!f&&!!k,J=x.useCallback(()=>{try{if(w.current)return;w.current=setTimeout(()=>{w.current=null,v()},650)}catch(t){v()}},[v]);x.useEffect(()=>()=>{w.current&&clearTimeout(w.current),w.current=null},[]);const $=x.useMemo(()=>{try{const t=Array.from(new Set((m||[]).map(i=>i==null?void 0:i.id).filter(Boolean))).slice(0,40),n=Array.from(new Set((m||[]).map(i=>i==null?void 0:i.slot_id).filter(Boolean))).slice(0,40),o=[];for(const i of t)o.push({event:"*",table:"quiz_results",filter:`quiz_id=eq.${i}`});for(const i of n)o.push({event:"UPDATE",table:"quiz_slots",filter:`id=eq.${i}`});return o}catch(t){return[]}},[m]);if(te({enabled:Y&&$.length>0,channelName:f!=null&&f.id?`myquizzes-${f.id}`:"myquizzes",changes:$,onChange:t=>{var n,o;J();try{if((t==null?void 0:t.table)!=="quiz_results")return;const i=((n=t==null?void 0:t.new)==null?void 0:n.quiz_id)||((o=t==null?void 0:t.old)==null?void 0:o.quiz_id);if(!i||Q.current.has(i))return;Q.current.add(i),typeof window!="undefined"&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Quiz Result Ready",{body:"Your quiz results are available. Tap to view."})}catch(i){}},joinTimeoutMs:5e3}),x.useEffect(()=>{let t=null;try{const n=Date.now();(m||[]).some(i=>{const d=i.start_time?new Date(i.start_time).getTime():0,r=i.end_time?new Date(i.end_time).getTime():0;return d&&n<d||d&&r&&n>=d&&n<r})&&(t=setInterval(()=>{W(i=>(i+1)%1e6)},1e3))}catch(n){}return()=>{t&&clearInterval(t)}},[m]),x.useEffect(()=>{const t=async()=>{try{if(!k){C({});return}const n=await A();if(!n){C({});return}const o=Date.now(),i=(m||[]).filter(s=>s.end_time&&o<new Date(s.end_time).getTime()),d=i.filter(s=>!s.slot_id).map(s=>s.id),r=i.filter(s=>!!s.slot_id).map(s=>s.slot_id),c={};if(d.length){const{data:s,error:h}=await n.rpc("get_engagement_counts_many",{p_quiz_ids:d});if(h)throw h;for(const a of s||[]){const u=a.pre_joined||0,p=a.joined||0;c[a.quiz_id]=u+p}}if(r.length){const s=a=>{var g,S,I,L,T,D,_;const u=Number((I=(S=(g=a==null?void 0:a.participants_joined)!=null?g:a==null?void 0:a.joined_count)!=null?S:a==null?void 0:a.joined)!=null?I:0),p=Number((D=(T=(L=a==null?void 0:a.participants_pre)!=null?L:a==null?void 0:a.pre_joined_count)!=null?T:a==null?void 0:a.pre_joined)!=null?D:0),b=Number((_=a==null?void 0:a.participants_total)!=null?_:u+p);return Number.isFinite(b)?b:0},h=a=>(a==null?void 0:a.id)||(a==null?void 0:a.slot_id)||null;try{const{data:a,error:u}=await n.from("quiz_slots_view").select("*").in("id",r);if(u)throw u;for(const p of a||[]){const b=h(p);b&&(c[b]=s(p))}}catch(a){try{const{data:u,error:p}=await n.from("quiz_slots_view").select("*").in("slot_id",r);if(p)throw p;for(const b of u||[]){const g=h(b);g&&(c[g]=s(b))}}catch(u){}}}C(c)}catch(n){C({})}};m&&m.length&&t()},[m]),H)return e.jsx("div",{className:"relative pt-14 mx-auto max-w-5xl px-4 py-4",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[e.jsxs("div",{className:"qd-card rounded-2xl border border-slate-800/70 bg-slate-950/70 p-4 sm:p-6 mb-6 animate-pulse",children:[e.jsx("div",{className:"h-7 w-32 bg-slate-700 rounded mb-4"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"h-7 w-28 bg-slate-800 rounded-full"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-4 w-28 bg-slate-700 rounded mb-3"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-5 flex-1 bg-slate-700 rounded"}),e.jsx("div",{className:"h-5 w-16 bg-slate-800 rounded-full"})]}),e.jsx("div",{className:"flex gap-2 mb-3",children:[1,2,3].map(n=>e.jsx("div",{className:"h-8 w-16 bg-slate-800 rounded-lg"},n))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsx("div",{className:"h-12 bg-slate-800 rounded-md"}),e.jsx("div",{className:"h-12 bg-slate-800 rounded-md"})]}),e.jsx("div",{className:"h-10 bg-gradient-to-r from-slate-700 to-slate-600 rounded-lg"})]},t))})]}),e.jsx("div",{className:"h-4 w-20 bg-slate-700 rounded mb-3"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-2xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-32 bg-slate-700 rounded mb-2"}),e.jsx("div",{className:"h-3 w-20 bg-slate-800 rounded"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3].map(n=>e.jsx("div",{className:"h-14 bg-slate-800 rounded-xl"},n))})]},t))})]})});if(m.length===0)return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden","aria-hidden":"true",children:[e.jsx(l.div,{className:"absolute top-20 -left-20 w-64 h-64 rounded-full bg-gradient-to-br from-orange-500/20 via-pink-500/15 to-purple-600/20 blur-[80px]",animate:{x:[0,30,0],y:[0,20,0],scale:[1,1.1,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute top-1/3 -right-20 w-72 h-72 rounded-full bg-gradient-to-br from-violet-600/20 via-blue-500/15 to-cyan-500/20 blur-[90px]",animate:{x:[0,-25,0],y:[0,30,0],scale:[1.1,1,1.1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute bottom-40 left-1/4 w-56 h-56 rounded-full bg-gradient-to-br from-emerald-500/15 via-teal-500/10 to-cyan-500/15 blur-[70px]",animate:{x:[0,20,0],y:[0,-20,0],scale:[1,1.15,1]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}})]}),e.jsxs(l.div,{className:"relative z-10 text-center px-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,ease:[.22,1,.36,1]},children:[e.jsxs(l.div,{className:"relative w-44 h-44 mx-auto mb-5",animate:{y:[0,-10,0],rotateY:[0,5,0,-5,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},children:[e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-b from-violet-500/40 via-pink-500/30 to-cyan-500/20 blur-3xl scale-150",animate:{opacity:[.5,.8,.5],scale:[1.4,1.6,1.4]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),e.jsxs("svg",{viewBox:"0 0 160 160",className:"w-full h-full relative z-10",fill:"none",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"isoTop",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#c4b5fd"}),e.jsx("stop",{offset:"100%",stopColor:"#a78bfa"})]}),e.jsxs("linearGradient",{id:"isoLeft",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#7c3aed"}),e.jsx("stop",{offset:"100%",stopColor:"#5b21b6"})]}),e.jsxs("linearGradient",{id:"isoRight",x1:"100%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#6d28d9"})]}),e.jsxs("linearGradient",{id:"goldGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#fcd34d"}),e.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),e.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]}),e.jsxs("linearGradient",{id:"lineGrad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f472b6"}),e.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]}),e.jsxs("linearGradient",{id:"lineGrad2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#22d3ee"}),e.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]}),e.jsx("filter",{id:"softShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:e.jsx("feDropShadow",{dx:"0",dy:"8",stdDeviation:"6",floodColor:"#7c3aed",floodOpacity:"0.35"})})]}),e.jsxs("g",{filter:"url(#softShadow)",transform:"translate(80, 85)",children:[e.jsx("path",{d:"M-35 -50 L-35 45 L0 65 L0 -30 Z",fill:"url(#isoLeft)"}),e.jsx("path",{d:"M0 -30 L0 65 L35 45 L35 -50 Z",fill:"url(#isoRight)"}),e.jsx("path",{d:"M-35 -50 L0 -70 L35 -50 L0 -30 Z",fill:"url(#isoTop)"}),e.jsxs("g",{transform:"translate(0, -60)",children:[e.jsx("path",{d:"M-12 -8 L0 -14 L12 -8 L12 4 L0 10 L-12 4 Z",fill:"url(#goldGrad)"}),e.jsx("ellipse",{cx:"0",cy:"-2",rx:"4",ry:"3",fill:"#92400e"})]}),e.jsxs("g",{transform:"translate(-25, -25)",children:[e.jsx("rect",{x:"0",y:"0",width:"28",height:"4",rx:"2",fill:"url(#lineGrad1)",opacity:"0.9",children:e.jsx("animate",{attributeName:"opacity",values:"0.6;1;0.6",dur:"2s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"0",y:"12",width:"22",height:"4",rx:"2",fill:"#a78bfa",opacity:"0.8",children:e.jsx("animate",{attributeName:"opacity",values:"1;0.6;1",dur:"2.2s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"0",y:"24",width:"25",height:"4",rx:"2",fill:"url(#lineGrad2)",opacity:"0.85",children:e.jsx("animate",{attributeName:"opacity",values:"0.7;1;0.7",dur:"1.8s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"0",y:"36",width:"18",height:"4",rx:"2",fill:"#fbbf24",opacity:"0.75",children:e.jsx("animate",{attributeName:"opacity",values:"0.5;0.9;0.5",dur:"2.5s",repeatCount:"indefinite"})})]}),e.jsx("text",{x:"5",y:"35",fontSize:"24",fontWeight:"bold",fill:"#ddd6fe",opacity:"0.4",children:"?"})]}),e.jsxs("g",{children:[e.jsxs("path",{d:"M130 30 L132 36 L138 38 L132 40 L130 46 L128 40 L122 38 L128 36 Z",fill:"#fbbf24",children:[e.jsx("animate",{attributeName:"opacity",values:"0.5;1;0.5",dur:"2s",repeatCount:"indefinite"}),e.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 130 38",to:"360 130 38",dur:"6s",repeatCount:"indefinite"})]}),e.jsxs("path",{d:"M25 50 L26.5 54 L31 55.5 L26.5 57 L25 61 L23.5 57 L19 55.5 L23.5 54 Z",fill:"#ec4899",children:[e.jsx("animate",{attributeName:"opacity",values:"1;0.4;1",dur:"1.8s",repeatCount:"indefinite"}),e.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"360 25 55.5",to:"0 25 55.5",dur:"5s",repeatCount:"indefinite"})]}),e.jsxs("circle",{cx:"140",cy:"100",r:"4",fill:"#22d3ee",children:[e.jsx("animate",{attributeName:"r",values:"3;5;3",dur:"2s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.6;1;0.6",dur:"2s",repeatCount:"indefinite"})]}),e.jsxs("circle",{cx:"20",cy:"110",r:"3",fill:"#f472b6",children:[e.jsx("animate",{attributeName:"r",values:"2;4;2",dur:"2.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"2.5s",repeatCount:"indefinite"})]}),e.jsx("circle",{cx:"135",cy:"130",r:"2.5",fill:"#a78bfa",children:e.jsx("animate",{attributeName:"opacity",values:"0.4;1;0.4",dur:"1.5s",repeatCount:"indefinite"})})]})]})]}),e.jsx(l.p,{className:"text-base text-slate-400 mb-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:"No Quizzes Joined"}),e.jsxs(l.button,{onClick:()=>z("/"),className:"relative px-8 py-3.5 rounded-xl font-semibold text-white overflow-hidden",style:{background:"linear-gradient(135deg, #7c3aed, #db2777, #ea580c)",boxShadow:"0 8px 32px -8px rgba(124, 58, 237, 0.5)"},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},whileHover:{scale:1.02,boxShadow:"0 12px 40px -8px rgba(124, 58, 237, 0.6)"},whileTap:{scale:.98},children:[e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/25 to-transparent -skew-x-12",animate:{x:["-200%","200%"]},transition:{duration:2.5,repeat:1/0,repeatDelay:2}}),e.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üéØ"}),e.jsx("span",{children:"Explore Quizzes"})]})]})]})]});const j=Date.now(),E=m.filter(t=>t.end_time&&j<new Date(t.end_time).getTime()),G=m.filter(t=>t.end_time&&j>=new Date(t.end_time).getTime()).sort((t,n)=>{const o=t.end_time?new Date(t.end_time).getTime():0;return(n.end_time?new Date(n.end_time).getTime():0)-o}).slice(0,5);return E.sort((t,n)=>{const o=t.start_time?new Date(t.start_time).getTime():0,i=t.end_time?new Date(t.end_time).getTime():0,d=n.start_time?new Date(n.start_time).getTime():0,r=n.end_time?new Date(n.end_time).getTime():0,c=o&&i&&j>=o&&j<i,s=d&&r&&j>=d&&j<r;return c!==s?c?-1:1:o-d}),e.jsxs("div",{className:"relative pt-16 pb-8 px-3 sm:px-4 mx-auto w-full max-w-md sm:max-w-4xl lg:max-w-5xl xl:max-w-6xl min-h-screen",children:[e.jsxs("div",{className:"pointer-events-none fixed inset-0 overflow-hidden","aria-hidden":"true",children:[e.jsx(l.div,{className:"absolute top-20 -left-20 w-64 h-64 rounded-full bg-gradient-to-br from-orange-500/20 via-pink-500/15 to-purple-600/20 blur-[80px]",animate:{x:[0,30,0],y:[0,20,0],scale:[1,1.1,1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute top-1/3 -right-20 w-72 h-72 rounded-full bg-gradient-to-br from-violet-600/20 via-blue-500/15 to-cyan-500/20 blur-[90px]",animate:{x:[0,-25,0],y:[0,30,0],scale:[1.1,1,1.1]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),e.jsx(l.div,{className:"absolute bottom-40 left-1/4 w-56 h-56 rounded-full bg-gradient-to-br from-emerald-500/15 via-teal-500/10 to-cyan-500/15 blur-[70px]",animate:{x:[0,20,0],y:[0,-20,0],scale:[1,1.15,1]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}})]}),e.jsx(ie,{title:"My Quizzes ‚Äì Quiz Dangal",description:"Track the quizzes you have joined, monitor live rounds, and revisit completed contests on Quiz Dangal.",canonical:"https://quizdangal.com/my-quizzes/",robots:"noindex, nofollow",author:"Quiz Dangal",datePublished:"2025-01-01"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(l.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"overflow-hidden",children:[e.jsx(l.div,{className:"text-center mb-8",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx(l.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(M,{className:"w-9 h-9 text-amber-400 drop-shadow-[0_0_15px_rgba(251,191,36,0.7)]"})}),e.jsx("h1",{className:"text-3xl font-black bg-gradient-to-r from-orange-300 via-pink-300 to-violet-400 bg-clip-text text-transparent drop-shadow-sm",children:"My Quizzes"})]})}),E.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs(l.div,{className:"flex items-center justify-between gap-3 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l.div,{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 grid place-items-center",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx(U,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-base font-bold bg-gradient-to-r from-emerald-300 to-teal-300 bg-clip-text text-transparent",children:"Live & Upcoming"})]}),e.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-emerald-500/20 border border-emerald-500/30 text-emerald-300",children:[E.length," quizzes"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map((t,n)=>{var L,T,D;const o=t.start_time?new Date(t.start_time):null,i=t.end_time?new Date(t.end_time):null,d=o&&i&&j>=o.getTime()&&j<i.getTime(),r=d?Math.max(0,Math.floor((i.getTime()-Date.now())/1e3)):o?Math.max(0,Math.floor((o.getTime()-Date.now())/1e3)):0,c=o&&i?Math.max(1,i.getTime()-o.getTime()):null,s=d&&c?Math.min(100,Math.max(0,Math.round((Date.now()-o.getTime())/c*100))):null,h=Array.isArray(t.prizes)?t.prizes:[],a=t.prize_type||"coins",u=(L=h[0])!=null?L:0,p=(T=h[1])!=null?T:0,b=(D=h[2])!=null?D:0,g=_=>P(a,_,{fallback:0}).formatted,S=V[t.slot_id||t.id]||0,I=t.slot_id?`/quiz/slot/${t.slot_id}`:`/quiz/${t.id}`;return e.jsx(l.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:n*.06,duration:.3,ease:[.25,.46,.45,.94]},className:"quiz-slot-card cursor-pointer",onClick:()=>z(I),children:e.jsxs("div",{className:`quiz-slot-card-inner ${d?"quiz-slot-card-live":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"quiz-slot-lang",children:"üåê Hindi / English"}),e.jsxs("span",{className:`quiz-slot-badge ${d?"quiz-slot-badge-live":"quiz-slot-badge-upcoming"}`,children:[d&&e.jsx("span",{className:"quiz-slot-badge-dot"}),d?"LIVE":"UPCOMING"]})]}),e.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:t.title}),e.jsxs("div",{className:"quiz-slot-time-section",children:[e.jsxs("div",{className:"quiz-slot-time-row",children:[e.jsxs("div",{className:"quiz-slot-time-box",children:[e.jsx("span",{className:"quiz-slot-time-label",children:"START"}),e.jsx("span",{className:"quiz-slot-time-value",children:t.start_time?R(t.start_time):"‚Äî"})]}),e.jsx("div",{className:"quiz-slot-time-divider",children:"‚Üí"}),e.jsxs("div",{className:"quiz-slot-time-box",children:[e.jsx("span",{className:"quiz-slot-time-label",children:"END"}),e.jsx("span",{className:"quiz-slot-time-value",children:t.end_time?R(t.end_time):"‚Äî"})]})]}),r!==null&&e.jsxs("div",{className:`quiz-slot-timer ${d?"quiz-slot-timer-live":""}`,children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:d?"Ends in":"Starts in"}),e.jsxs("span",{className:"quiz-slot-timer-value",children:[String(Math.floor(r/60)).padStart(2,"0"),":",String(r%60).padStart(2,"0")]})]})]}),e.jsxs("div",{className:"quiz-slot-prize-section",children:[e.jsx("div",{className:"quiz-slot-prize-title",children:"üèÜ Prizes"}),e.jsxs("div",{className:"quiz-slot-prize-row",children:[e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-gold",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"1st"}),e.jsx("span",{className:"quiz-slot-prize-value",children:g(u)})]}),e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-silver",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"2nd"}),e.jsx("span",{className:"quiz-slot-prize-value",children:g(p)})]}),e.jsxs("div",{className:"quiz-slot-prize-item quiz-slot-prize-bronze",children:[e.jsx("span",{className:"quiz-slot-prize-rank",children:"3rd"}),e.jsx("span",{className:"quiz-slot-prize-value",children:g(b)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs("span",{className:"quiz-slot-stat",children:[e.jsx(re,{className:"w-3 h-3"})," ",S," Joined"]}),e.jsx("span",{className:"quiz-slot-stat quiz-slot-stat-joined",children:"‚úì You're In"})]}),s!==null&&e.jsx("div",{className:"w-full bg-slate-800/50 rounded-full h-1.5 mb-3 overflow-hidden",children:e.jsx("div",{className:"h-1.5 bg-emerald-500/80 rounded-full",style:{width:`${s}%`}})}),e.jsxs("button",{type:"button",onClick:_=>{_.stopPropagation(),z(I)},onMouseEnter:()=>se("/quiz"),className:`quiz-slot-btn ${d?"quiz-slot-btn-live":"quiz-slot-btn-default"}`,children:[e.jsx(U,{className:"w-4 h-4 mr-1"})," PLAY"]})]})},`lu-${t.slot_id||t.id}`)})})]}),e.jsxs(l.div,{className:"mt-8 flex items-center justify-between gap-3 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l.div,{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-purple-600 grid place-items-center",animate:{rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0},children:e.jsx(M,{className:"w-4 h-4 text-white"})}),e.jsx("h2",{className:"text-base font-bold bg-gradient-to-r from-violet-300 to-purple-300 bg-clip-text text-transparent",children:"Finished"})]}),e.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-violet-500/20 border border-violet-500/30 text-violet-300",children:["Recent ",G.length]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G.map((t,n)=>{var p,b;const o=new Date,i=new Date(t.end_time),d=i.toLocaleString([],{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}),r=Array.isArray(t.leaderboard)?t.leaderboard:[],c=o>=i&&r.length>0,s=c?r.find(g=>g.user_id===(f==null?void 0:f.id)):null,h=t.prize_type&&String(t.prize_type).trim()?t.prize_type:"coins",a=s!=null&&s.rank&&Array.isArray(t.prizes)?t.prizes[s.rank-1]:null,u=s!=null&&s.rank?P(h,a!=null?a:0,{fallback:0}).formatted:"‚Äî";return e.jsx(l.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:n*.06,duration:.3,ease:[.25,.46,.45,.94]},onClick:()=>z(t.slot_id?`/results/slot/${t.slot_id}`:`/results/${t.id}`),className:"quiz-slot-card cursor-pointer",children:e.jsxs("div",{className:"quiz-slot-card-inner",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"quiz-slot-lang",children:"üåê Hindi / English"}),e.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"}),d]})]}),e.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-3 line-clamp-2",children:t.title}),c?e.jsxs(l.div,{className:"mb-3 p-2.5 rounded-xl bg-gradient-to-br from-slate-800/80 to-slate-900/80 border border-white/10 overflow-hidden relative",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 via-violet-500/5 to-emerald-500/5",animate:{opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0}}),e.jsxs("div",{className:"relative flex items-stretch gap-1.5 min-w-0",children:[e.jsxs(l.div,{className:"flex-1 min-w-0 text-center py-2 rounded-lg bg-gradient-to-br from-amber-500/20 to-orange-600/10 border border-amber-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-t from-amber-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-amber-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Rank"}),e.jsxs(l.div,{className:"text-base font-black text-amber-400 drop-shadow-[0_0_8px_rgba(251,191,36,0.4)] w-full truncate",animate:{scale:(s==null?void 0:s.rank)<=3?[1,1.05,1]:1},transition:{duration:2,repeat:1/0},children:["#",(p=s==null?void 0:s.rank)!=null?p:"-"]})]}),(s==null?void 0:s.rank)<=3&&e.jsx(l.div,{className:"absolute -top-0.5 -right-0.5 text-[10px]",animate:{rotate:[0,15,-15,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:"üèÜ"})]}),e.jsxs(l.div,{className:"flex-1 min-w-0 text-center py-2 rounded-lg bg-gradient-to-br from-violet-500/20 to-purple-600/10 border border-violet-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-t from-violet-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-violet-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Score"}),e.jsx("div",{className:"text-base font-black text-violet-400 drop-shadow-[0_0_8px_rgba(139,92,246,0.4)] w-full truncate",children:(b=s==null?void 0:s.score)!=null?b:"-"})]})]}),e.jsxs(l.div,{className:"flex-1 min-w-0 text-center py-2 rounded-lg bg-gradient-to-br from-emerald-500/20 to-teal-600/10 border border-emerald-400/30 relative overflow-hidden",whileHover:{scale:1.03,y:-1},children:[e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-t from-emerald-500/10 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-[8px] text-emerald-300/70 font-semibold uppercase tracking-wide mb-0.5",children:"Won"}),e.jsx(l.div,{className:"text-base font-black text-emerald-400 drop-shadow-[0_0_8px_rgba(52,211,153,0.4)] w-full truncate",animate:u!=="-"?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0,delay:.5},children:u})]}),u!=="-"&&u!=="0"&&e.jsx(l.div,{className:"absolute -top-0.5 -right-0.5 text-[10px]",animate:{y:[0,-2,0]},transition:{duration:1.5,repeat:1/0},children:"ü™ô"})]})]})]}):e.jsx(l.div,{className:"mb-3 py-3 rounded-xl bg-gradient-to-r from-slate-800/60 via-slate-700/40 to-slate-800/60 border border-white/5 text-center",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0},style:{backgroundSize:"200% 100%"},children:e.jsxs(l.span,{className:"text-xs text-slate-400 inline-flex items-center gap-2",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[e.jsx(l.span,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:"‚è≥"}),"Calculating Results..."]})}),e.jsxs("button",{type:"button",onClick:g=>{g.stopPropagation(),z(t.slot_id?`/results/slot/${t.slot_id}`:`/results/${t.id}`)},className:"quiz-slot-btn quiz-slot-btn-default",children:[e.jsx(M,{className:"w-4 h-4"})," VIEW RESULT"]})]})},t.slot_id||t.id)})})]})})]})};export{pe as default};
