import{u as H,h as L,g as Q,s as Z,a as R,j as e,f as J,b as W,p as U,c as V,d as K}from"./index-12f46b02.js";import{r as b}from"./react-63c462fe.js";import{m as S}from"./motion-lite-a13d6934.js";import{S as q}from"./SEO-42a2e529.js";import{b as X}from"./router-d6d570a4.js";import{b as B,c as ee,P as te,T as se}from"./icons-2bdec3f2.js";import"./supabase-24c2e735.js";function ie(p){const c="px-2 py-0.5 rounded-full text-xs font-semibold";return p==="active"?c+" bg-green-600/15 text-green-400 border border-green-700/40":p==="upcoming"?c+" bg-blue-600/15 text-blue-300 border border-blue-700/40":c+" bg-slate-600/20 text-slate-300 border border-slate-700/40"}const ae=({size:p=72,centered:c=!1,fitParent:j=!1})=>{const m=typeof p=="number"?`${p}px`:p,[v,A]=b.useState(0),_=["/Trophy.png","/trophy.png","/trophy-question.png","/trophy-question.webp"],I=_[v]||_[0];return e.jsx("div",{className:`relative trophy-float pointer-events-none${c?"":" mx-auto mb-4"}`,style:{width:j?"100%":m,height:j?"100%":m},children:e.jsx("div",{className:"trophy-sway w-full h-full",children:e.jsx("div",{className:"trophy-pulse w-full h-full",children:v>=0?e.jsx("img",{src:I,alt:"Trophy",className:"w-full h-full object-contain select-none",style:{backgroundColor:"transparent",display:"block",maxWidth:"96px",maxHeight:"96px"},loading:"eager",decoding:"async",sizes:"(max-width: 640px) 64px, 96px",onError:()=>{const y=v+1;y<_.length?A(y):A(-1)}}):e.jsxs("svg",{viewBox:"0 0 128 128",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet","aria-hidden":!0,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"qdTg",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffe795"}),e.jsx("stop",{offset:"45%",stopColor:"#ffd34d"}),e.jsx("stop",{offset:"75%",stopColor:"#f0a700"}),e.jsx("stop",{offset:"100%",stopColor:"#b86a00"})]}),e.jsxs("linearGradient",{id:"qdQM",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#6d28d9"}),e.jsx("stop",{offset:"100%",stopColor:"#7c3aed"})]})]}),e.jsx("path",{d:"M28 30c-10 0-18 10-16 20 2 10 14 14 24 11",fill:"none",stroke:"#f0b000",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M100 30c10 0 18 10 16 20-2 10-14 14-24 11",fill:"none",stroke:"#f0b000",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M28 22h72c0 24-10 36-26 41v9c0 7-6 13-14 13s-14-6-14-13v-9C38 58 28 46 28 22Z",fill:"url(#qdTg)"}),e.jsx("rect",{x:"56",y:"72",width:"16",height:"10",rx:"3",fill:"url(#qdTg)"}),e.jsx("rect",{x:"44",y:"82",width:"40",height:"12",rx:"4",fill:"url(#qdTg)"}),e.jsx("rect",{x:"36",y:"94",width:"56",height:"10",rx:"5",fill:"url(#qdTg)"}),e.jsx("text",{x:"64",y:"46",textAnchor:"middle",dominantBaseline:"middle",fontSize:"32",fontWeight:"900",fill:"url(#qdQM)",stroke:"#2b1a59",strokeWidth:"3",paintOrder:"stroke fill",children:"?"})]})})})})},he=()=>{const p=X(),{user:c,userProfile:j}=H(),[m,v]=b.useState([]),[A,_]=b.useState(!0),[I,y]=b.useState({}),[ne,F]=b.useState(0),O=b.useRef(new Set),N=b.useCallback(async()=>{if(!c)return;if(!L){v([]);return}const t=await Q();if(!t){v([]);return}try{const a=new Date().toISOString(),d="id, slot_id, title, start_time, end_time, prize_type, prizes",{data:r,error:l}=await t.from("my_quizzes_view").select(d).gt("end_time",a).order("start_time",{ascending:!0}).limit(20);if(l)throw l;const n="id, slot_id, title, end_time, prize_type, prizes, leaderboard",{data:o,error:i}=await t.from("my_quizzes_view").select(n).lte("end_time",a).order("end_time",{ascending:!1}).limit(5);if(i)throw i;v([...r||[],...o||[]])}catch(a){console.error("fetchMyQuizzes failed",a),v([])}},[c]);b.useEffect(()=>{if(!c||!L||!Array.isArray(m)||m.length===0)return;const t=Date.now(),a=m.filter(n=>{try{return!(!(n!=null&&n.id)||!(n!=null&&n.end_time)||!(new Date(n.end_time).getTime()<=t)||!(!Array.isArray(n.leaderboard)||n.leaderboard.length===0)||O.current.has(n.id))}catch(o){return!1}});if(!(Z({defaultValue:!0})||(j==null?void 0:j.role)==="admin")||a.length===0)return;let r=!1;const l=(n,o=2500)=>{try{if(typeof window!="undefined"&&"requestIdleCallback"in window){window.requestIdleCallback(()=>{try{n()}catch(i){}},{timeout:o});return}}catch(i){}setTimeout(()=>{try{n()}catch(i){}},Math.max(0,o))};for(const n of a)O.current.add(n.id);return l(async()=>{try{const n=await Q();if(!n||r||!(await Promise.allSettled(a.map(s=>K(n,s.id)))).some(s=>s.status==="fulfilled"&&s.value===!0)||r)return;const{data:h}=await n.from("my_quizzes_view").select("*");if(r)return;v((h||[]).map(s=>({...s})))}catch(n){}}),()=>{r=!0}},[c,j==null?void 0:j.role,m]),b.useEffect(()=>{if(typeof window!="undefined"&&"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().catch(()=>{}),!c){_(!1),v([]),y({});return}(async()=>{_(!0);try{await N()}finally{_(!1)}})();const a=setInterval(N,3e4),d=()=>{document.visibilityState==="visible"&&N()};document.addEventListener("visibilitychange",d);const r=()=>{N()};return window.addEventListener("online",r),()=>{clearInterval(a),document.removeEventListener("visibilitychange",d),window.removeEventListener("online",r)}},[c,N]);const G=(()=>{var t,a;try{const d=typeof window!="undefined"&&window.__QUIZ_DANGAL_ENV__?window.__QUIZ_DANGAL_ENV__:{},r=(a=(t={}.VITE_ENABLE_REALTIME)!=null?t:d.VITE_ENABLE_REALTIME)!=null?a:"1",l=String(r).toLowerCase();return l==="1"||l==="true"||l==="yes"}catch(d){return!0}})(),Y=(()=>{try{if(typeof window=="undefined"||!window.isSecureContext||!("WebSocket"in window)||navigator&&navigator.onLine===!1)return!1;const t=navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection)||null;return!(t&&(t.saveData||typeof t.effectiveType=="string"&&/(^|\b)2g(\b|$)/i.test(t.effectiveType)))}catch(t){return!1}})(),$=G&&Y&&!!c&&!!L;if(R({enabled:$,channelName:"myquizzes-results-channel",event:"INSERT",table:"quiz_results",onChange:()=>{N();try{typeof window!="undefined"&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Quiz Result Ready",{body:"Your quiz results are available. Tap to view."})}catch(t){}},joinTimeoutMs:5e3}),R({enabled:$,channelName:"myquizzes-results-update-channel",event:"UPDATE",table:"quiz_results",onChange:()=>{N()},joinTimeoutMs:5e3}),R({enabled:$,channelName:"myquizzes-slots-channel",event:"*",table:"quiz_slots",onChange:()=>{N()},joinTimeoutMs:5e3}),b.useEffect(()=>{let t=null;try{const a=Date.now();(m||[]).some(r=>{const l=r.start_time?new Date(r.start_time).getTime():0,n=r.end_time?new Date(r.end_time).getTime():0;return l&&a<l||l&&n&&a>=l&&a<n})&&(t=setInterval(()=>{F(r=>(r+1)%1e6)},1e3))}catch(a){}return()=>{t&&clearInterval(t)}},[m]),b.useEffect(()=>{const t=async()=>{try{if(!L){y({});return}const a=await Q();if(!a){y({});return}const d=Date.now(),r=(m||[]).filter(i=>i.end_time&&d<new Date(i.end_time).getTime()),l=r.filter(i=>!i.slot_id).map(i=>i.id),n=r.filter(i=>!!i.slot_id).map(i=>i.slot_id),o={};if(l.length){const{data:i,error:h}=await a.rpc("get_engagement_counts_many",{p_quiz_ids:l});if(h)throw h;for(const s of i||[]){const u=s.pre_joined||0,x=s.joined||0;o[s.quiz_id]=u+x}}if(n.length){const i=s=>{var g,M,z,E,C,D,k;const u=Number((z=(M=(g=s==null?void 0:s.participants_joined)!=null?g:s==null?void 0:s.joined_count)!=null?M:s==null?void 0:s.joined)!=null?z:0),x=Number((D=(C=(E=s==null?void 0:s.participants_pre)!=null?E:s==null?void 0:s.pre_joined_count)!=null?C:s==null?void 0:s.pre_joined)!=null?D:0),f=Number((k=s==null?void 0:s.participants_total)!=null?k:u+x);return Number.isFinite(f)?f:0},h=s=>(s==null?void 0:s.id)||(s==null?void 0:s.slot_id)||null;try{const{data:s,error:u}=await a.from("quiz_slots_view").select("*").in("id",n);if(u)throw u;for(const x of s||[]){const f=h(x);f&&(o[f]=i(x))}}catch(s){try{const{data:u,error:x}=await a.from("quiz_slots_view").select("*").in("slot_id",n);if(x)throw x;for(const f of u||[]){const g=h(f);g&&(o[g]=i(f))}}catch(u){}}}y(o)}catch(a){y({})}};m&&m.length&&t()},[m]),A)return e.jsx("div",{className:"min-h-screen overflow-x-hidden",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 pt-16 sm:pt-20",children:[e.jsxs("div",{className:"qd-card rounded-2xl border border-slate-800/70 bg-slate-950/70 p-4 sm:p-6 mb-6 animate-pulse",children:[e.jsx("div",{className:"h-7 w-32 bg-slate-700 rounded mb-4"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("div",{className:"h-7 w-28 bg-slate-800 rounded-full"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-4 w-28 bg-slate-700 rounded mb-3"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-5 flex-1 bg-slate-700 rounded"}),e.jsx("div",{className:"h-5 w-16 bg-slate-800 rounded-full"})]}),e.jsx("div",{className:"flex gap-2 mb-3",children:[1,2,3].map(a=>e.jsx("div",{className:"h-8 w-16 bg-slate-800 rounded-lg"},a))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsx("div",{className:"h-12 bg-slate-800 rounded-md"}),e.jsx("div",{className:"h-12 bg-slate-800 rounded-md"})]}),e.jsx("div",{className:"h-10 bg-gradient-to-r from-slate-700 to-slate-600 rounded-lg"})]},t))})]}),e.jsx("div",{className:"h-4 w-20 bg-slate-700 rounded mb-3"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[1,2].map(t=>e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 p-4 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-2xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-32 bg-slate-700 rounded mb-2"}),e.jsx("div",{className:"h-3 w-20 bg-slate-800 rounded"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3].map(a=>e.jsx("div",{className:"h-14 bg-slate-800 rounded-xl"},a))})]},t))})]})});if(m.length===0)return e.jsx("div",{className:"min-h-screen overflow-x-hidden",children:e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"container mx-auto h-full px-4",children:e.jsx("div",{className:"h-full flex items-start justify-center pt-20",children:e.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},className:"relative text-center text-slate-100 p-2",children:[e.jsx("div",{className:"pointer-events-none absolute -top-16 -left-16 w-44 h-44 rounded-full bg-indigo-600/10 blur-3xl"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-16 -right-16 w-44 h-44 rounded-full bg-fuchsia-600/10 blur-3xl"}),e.jsx("h1",{className:"text-2xl font-bold heading-gradient text-shadow mb-4",children:"My Quizzes"}),e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.06},className:"relative max-w-md mx-auto rounded-3xl p-[2px] bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-rose-500 shadow-[0_30px_80px_-20px_rgba(99,102,241,0.25)]",children:e.jsxs("div",{className:"rounded-3xl bg-slate-950/80 backdrop-blur border border-white/10 px-6 py-9",children:[e.jsx("div",{className:"mx-auto mb-4 w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full p-[2px] bg-gradient-to-b from-amber-400 to-amber-600",children:e.jsx("div",{className:"w-full h-full rounded-full grid place-items-center bg-slate-950/90 p-1 sm:p-1.5 md:p-2",children:e.jsx(ae,{centered:!0,fitParent:!0})})}),e.jsx("h3",{className:"text-xl font-extrabold bg-gradient-to-r from-white to-slate-200 bg-clip-text text-transparent",children:"No Quizzes Yet"}),e.jsx("p",{className:"mt-2 text-sm text-slate-300",children:"Kickstart your journeyâ€”join your first quiz and build your streak!"}),e.jsxs("div",{className:"mt-5 flex flex-wrap items-center justify-center gap-2 text-[11px]",children:[e.jsx("span",{className:"px-2.5 py-1 rounded-full border border-indigo-500/40 bg-indigo-500/10 text-indigo-200",children:"Daily quizzes"}),e.jsx("span",{className:"px-2.5 py-1 rounded-full border border-fuchsia-500/40 bg-fuchsia-500/10 text-fuchsia-200",children:"Win coins"}),e.jsx("span",{className:"px-2.5 py-1 rounded-full border border-emerald-500/40 bg-emerald-500/10 text-emerald-200",children:"Leaderboards"})]})]})})]})})})})});const w=Date.now(),T=m.filter(t=>t.end_time&&w<new Date(t.end_time).getTime()),P=m.filter(t=>t.end_time&&w>=new Date(t.end_time).getTime()).sort((t,a)=>{const d=t.end_time?new Date(t.end_time).getTime():0;return(a.end_time?new Date(a.end_time).getTime():0)-d}).slice(0,5);return T.sort((t,a)=>{const d=t.start_time?new Date(t.start_time).getTime():0,r=t.end_time?new Date(t.end_time).getTime():0,l=a.start_time?new Date(a.start_time).getTime():0,n=a.end_time?new Date(a.end_time).getTime():0,o=d&&r&&w>=d&&w<r,i=l&&n&&w>=l&&w<n;return o!==i?o?-1:1:d-l}),e.jsxs("div",{className:"min-h-screen overflow-x-hidden",children:[e.jsx(q,{title:"My Quizzes â€“ Quiz Dangal",description:"Track the quizzes you have joined, monitor live rounds, and revisit completed contests on Quiz Dangal.",canonical:"https://quizdangal.com/my-quizzes/",robots:"noindex, nofollow"}),e.jsx("div",{className:"container mx-auto px-4 py-4 pt-16 sm:pt-20",children:e.jsxs(S.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},className:"overflow-hidden",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"qd-card rounded-2xl border border-slate-800/70 bg-slate-950/70 p-4 sm:p-6 shadow-[0_16px_50px_-28px_rgba(99,102,241,0.55)]",children:[e.jsx("h1",{className:"text-2xl font-bold heading-gradient text-shadow",children:"My Quizzes"}),e.jsx("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-700/40 bg-emerald-600/10 px-3 py-1 text-xs text-emerald-200",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-emerald-500/15",children:e.jsx(B,{className:"w-3.5 h-3.5"})}),T.length," Live/Upcoming"]})})]})}),T.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-2",children:[e.jsx("h2",{className:"text-sm sm:text-base font-semibold text-white",children:"Live & Upcoming"}),e.jsxs("span",{className:"text-xs text-slate-400",children:[T.length," quizzes"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:T.map((t,a)=>{var E,C,D;const d=t.start_time?new Date(t.start_time):null,r=t.end_time?new Date(t.end_time):null,l=d&&r&&w>=d.getTime()&&w<r.getTime(),n=l?Math.max(0,Math.floor((r.getTime()-Date.now())/1e3)):d?Math.max(0,Math.floor((d.getTime()-Date.now())/1e3)):0,o=d&&r?Math.max(1,r.getTime()-d.getTime()):null,i=l&&o?Math.min(100,Math.max(0,Math.round((Date.now()-d.getTime())/o*100))):null,h=Array.isArray(t.prizes)?t.prizes:[],s=t.prize_type||"coins",u=(E=h[0])!=null?E:0,x=(C=h[1])!=null?C:0,f=(D=h[2])!=null?D:0,g=k=>V(s,k,{fallback:0}).formatted,M=I[t.slot_id||t.id]||0,z=t.slot_id?`/quiz/slot/${t.slot_id}`:`/quiz/${t.id}`;return e.jsxs(S.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:a*.06,duration:.3,ease:[.25,.46,.45,.94]},whileHover:{y:-4,scale:1.01,transition:{duration:.2}},whileTap:{scale:.99},onClick:()=>p(z),className:`relative overflow-hidden rounded-2xl border ${l?"border-emerald-700/50":"border-slate-800"} bg-gradient-to-br from-slate-950/90 via-slate-900/85 to-slate-900/60 shadow-xl cursor-pointer group transition-shadow duration-300 qd-card p-4 sm:p-5`,children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(1200px 300px at -10% -10%, rgba(99,102,241,0.06), transparent), radial-gradient(900px 200px at 110% 20%, rgba(16,185,129,0.05), transparent)"}}),e.jsxs("div",{className:"absolute top-3 right-3 z-10 flex gap-2",children:[l&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-extrabold tracking-widest bg-rose-600 text-white ring-1 ring-rose-300/50 shadow",children:"LIVE"}),!l&&d&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-extrabold tracking-widest bg-sky-600 text-white ring-1 ring-sky-300/50 shadow",children:"SOON"})]}),e.jsx("div",{className:"flex items-center justify-between gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"truncate font-semibold text-slate-100 text-base sm:text-lg",children:t.title}),e.jsx("span",{className:ie(l?"active":"upcoming"),children:l?"active":"upcoming"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-semibold border ${l?"bg-emerald-500/15 text-emerald-300 border-emerald-700/40":"bg-indigo-500/15 text-indigo-300 border-indigo-700/40"}`,children:"Joined"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-amber-500/20 to-amber-400/10 text-amber-200 border border-amber-500/30 shadow-sm",children:["ðŸ¥‡ ",g(u)]}),e.jsxs("span",{className:"px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-sky-500/20 to-sky-400/10 text-sky-200 border border-sky-500/30 shadow-sm",children:["ðŸ¥ˆ ",g(x)]}),e.jsxs("span",{className:"px-2.5 py-1.5 rounded-lg bg-gradient-to-r from-violet-500/20 to-violet-400/10 text-violet-200 border border-violet-500/30 shadow-sm",children:["ðŸ¥‰ ",g(f)]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-[11px] text-slate-400",children:t.start_time?J(t.start_time):"â€”"}),e.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-2 text-[11px] text-slate-300",children:[e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-md px-2 py-1",children:[e.jsx("span",{className:"uppercase text-[9px] text-slate-400",children:"Start"}),e.jsx("div",{children:t.start_time?W(t.start_time):"â€”"})]}),e.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-md px-2 py-1",children:[e.jsx("span",{className:"uppercase text-[9px] text-slate-400",children:"End"}),e.jsx("div",{children:t.end_time?W(t.end_time):"â€”"})]})]})]}),n!==null&&e.jsxs("div",{className:"mt-2 text-sm font-semibold text-indigo-300",children:[l?"Ends in":"Starts in"," ",String(Math.floor(n/60)).padStart(2,"0"),":",String(n%60).padStart(2,"0")]}),e.jsx("div",{className:"mt-1 flex items-center gap-4 text-xs text-slate-400",children:e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(ee,{className:"w-3.5 h-3.5 mr-1"}),M," joined"]})}),i!==null&&e.jsx("div",{className:"mt-2 w-full bg-slate-800/50 border border-slate-700/70 rounded-full h-1 overflow-hidden",children:e.jsx("div",{className:"h-1 bg-emerald-500/80",style:{width:`${i}%`}})})]})}),e.jsx("div",{className:"mt-3 flex",children:e.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),p(z)},onMouseEnter:()=>U("/quiz"),onFocus:()=>U("/quiz"),className:"relative z-20 pointer-events-auto w-full px-4 py-2.5 rounded-lg text-sm sm:text-base font-extrabold border border-violet-500/40 text-white shadow-[0_8px_18px_rgba(139,92,246,0.4)] hover:shadow-[0_12px_24px_rgba(139,92,246,0.55)] hover:scale-[1.015] active:scale-[0.99] transition focus:outline-none focus:ring-2 focus:ring-fuchsia-300 bg-[linear-gradient(90deg,#4f46e5,#7c3aed,#9333ea,#c026d3)] overflow-hidden",children:e.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"})," PLAY"]})})})]},`lu-${t.slot_id||t.id}`)})})]}),e.jsxs("div",{className:"mt-7 flex items-center justify-between gap-3 mb-2",children:[e.jsx("h2",{className:"text-sm sm:text-base font-semibold text-white",children:"Finished"}),e.jsxs("span",{className:"text-xs text-slate-400",children:["Recent ",P.length]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:P.map((t,a)=>{var x,f;const d=new Date,r=new Date(t.end_time),l=r.toLocaleString([],{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}),n=Array.isArray(t.leaderboard)?t.leaderboard:[],o=d>=r&&n.length>0,i=o?n.find(g=>g.user_id===(c==null?void 0:c.id)):null,h=t.prize_type&&String(t.prize_type).trim()?t.prize_type:"coins",s=i!=null&&i.rank&&Array.isArray(t.prizes)?t.prizes[i.rank-1]:null,u=i!=null&&i.rank?V(h,s!=null?s:0,{fallback:0}).formatted:"â€”";return e.jsx(S.div,{initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{delay:a*.06,duration:.3,ease:[.25,.46,.45,.94]},whileHover:{y:-6,scale:1.01,transition:{duration:.2}},whileTap:{scale:.99},onClick:()=>p(t.slot_id?`/results/slot/${t.slot_id}`:`/results/${t.id}`),className:"group relative overflow-hidden rounded-2xl p-[1px] cursor-pointer shadow-[0_14px_34px_-22px_rgba(99,102,241,0.55)] transition-shadow duration-300 bg-gradient-to-r from-indigo-600/40 via-fuchsia-600/30 to-emerald-600/30",children:e.jsxs("div",{className:"qd-card rounded-2xl border border-slate-800/70 bg-slate-950/80 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx("span",{className:"shrink-0 inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-slate-700/70 bg-slate-900/60 text-slate-100",children:o?e.jsx(se,{className:"w-5 h-5 text-amber-200",strokeWidth:2.2}):e.jsx(B,{className:"w-5 h-5 text-indigo-200",strokeWidth:2.2})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-white break-words line-clamp-2",children:t.title}),o?e.jsx("span",{className:"inline-flex items-center rounded-full border border-emerald-500/35 bg-emerald-500/10 px-2 py-0.5 text-[10px] font-semibold text-emerald-200",children:"Result out"}):e.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-700/60 bg-slate-800/30 px-2 py-0.5 text-[10px] font-semibold text-slate-200",children:"Processing"})]}),e.jsxs("div",{className:"mt-1 text-[11px] text-slate-400",children:["Ended ",l]})]})]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),p(t.slot_id?`/results/slot/${t.slot_id}`:`/results/${t.id}`)},className:"shrink-0 rounded-full border border-violet-500/40 bg-gradient-to-r from-indigo-600 via-violet-600 to-fuchsia-600 px-3 py-1.5 text-[11px] sm:text-xs font-semibold text-white transition hover:scale-[1.03] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-fuchsia-300/60",children:"Result"})]}),o?e.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[e.jsx("div",{className:"rounded-xl border border-indigo-500/35 bg-gradient-to-br from-indigo-500/14 to-slate-950/30 px-3 py-2",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[9px] uppercase tracking-wider text-slate-400",children:"Rank"}),e.jsxs("div",{className:"mt-0.5 text-sm sm:text-base font-extrabold text-white",children:["#",(x=i==null?void 0:i.rank)!=null?x:"-"]})]})}),e.jsx("div",{className:"rounded-xl border border-sky-500/35 bg-gradient-to-br from-sky-500/14 to-slate-950/30 px-3 py-2",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[9px] uppercase tracking-wider text-slate-400",children:"Score"}),e.jsx("div",{className:"mt-0.5 text-sm sm:text-base font-extrabold text-white",children:(f=i==null?void 0:i.score)!=null?f:"-"})]})}),e.jsx("div",{className:"rounded-xl border border-fuchsia-500/40 bg-gradient-to-br from-fuchsia-500/14 to-slate-950/30 px-3 py-2",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[9px] uppercase tracking-wider text-slate-400",children:"Prize"}),e.jsx("div",{className:"mt-0.5 text-sm sm:text-base font-extrabold text-white",children:u})]})})]}):e.jsx("div",{className:"mt-3 rounded-xl border border-slate-800/70 bg-slate-900/65 px-3 py-2 text-[11px] sm:text-xs text-slate-300",children:"Results are being processed. Please check again soon."})]})},t.slot_id||t.id)})})]})})]})};export{he as default};
